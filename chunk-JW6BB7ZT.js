import{c as j,d as R}from"./chunk-ONWD6TM6.js";import{a as $,b as A,c as U}from"./chunk-7L7VICD2.js";import"./chunk-RAM765LW.js";import{$a as S,$b as F,B as d,C as _,Ea as c,Fa as u,Ga as b,Jb as k,Lb as E,Ma as P,Mc as Y,Nb as G,Ob as T,R as h,T as a,Vb as z,X as v,Ya as O,Yb as B,Z as C,Za as I,Zb as D,_b as V,ac as N,da as f,fa as m,hb as w,jb as y,oa as i,pa as r,qa as M,ta as x,va as p,wa as g}from"./chunk-KOLL3EMX.js";import"./chunk-ODN5LVDJ.js";var H=()=>[20];function J(n,t){n&1&&(i(0,"div",10),M(1,"mat-spinner"),i(2,"p"),c(3,"Cargando pel\xEDculas..."),r()())}function K(n,t){n&1&&(i(0,"div",11)(1,"mat-icon"),c(2,"movie_off"),r(),i(3,"h3"),c(4,"No se encontraron pel\xEDculas"),r(),i(5,"p"),c(6,"No hay pel\xEDculas disponibles para este g\xE9nero"),r()())}function L(n,t){if(n&1){let e=x();i(0,"mat-chip",24),p("click",function(s){let l=d(e).$implicit,q=g(4);return _(q.viewGenre(l.id,s))}),c(1),r()}if(n&2){let e=t.$implicit;a(),b(" ",e.name," ")}}function Q(n,t){if(n&1&&(i(0,"div",22),f(1,L,2,1,"mat-chip",23),r()),n&2){let e=g().$implicit;a(),m("ngForOf",e.genres.slice(0,3))}}function X(n,t){if(n&1){let e=x();i(0,"mat-card",14),p("click",function(){let s=d(e).$implicit,l=g(2);return _(l.viewMovieDetail(s.id))}),i(1,"img",15),p("error",function(s){d(e);let l=g(2);return _(l.onImageError(s))}),r(),i(2,"mat-card-content",16)(3,"h3",17),c(4),r(),i(5,"div",18)(6,"span",19),c(7),r(),i(8,"div",20)(9,"mat-icon"),c(10,"star"),r(),i(11,"span"),c(12),r()()(),f(13,Q,2,1,"div",21),r()()}if(n&2){let e=t.$implicit,o=g(2);a(),m("src",e.poster_path?o.getImageUrl(e.poster_path):"assets/img/poster-not-found.png",h)("alt",e.title),a(3),u(e.title),a(3),u(o.getYear(e.release_date)),a(5),u(e.vote_average.toFixed(1)),a(),m("ngIf",e.genres&&e.genres.length>0)}}function Z(n,t){if(n&1&&(i(0,"div",12),f(1,X,14,6,"mat-card",13),r()),n&2){let e=g();a(),m("ngForOf",e.movies)}}function ee(n,t){if(n&1){let e=x();i(0,"mat-paginator",25),p("page",function(s){d(e);let l=g();return _(l.onPageChange(s))}),r()}if(n&2){let e=g();m("length",e.totalResults)("pageSize",20)("pageIndex",e.currentPage-1)("pageSizeOptions",P(4,H))}}var W=class n{constructor(t,e,o,s){this.tmdbService=t;this.router=e;this.route=o;this.snackBar=s}movies=[];loading=!1;currentPage=1;totalPages=0;totalResults=0;genreId=0;genreName="";genres=[];ngOnInit(){this.scrollToTop(),this.route.params.subscribe(t=>{this.genreId=+t.id,this.genreId&&this.loadGenresAndMovies()})}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}loadGenresAndMovies(){this.loading=!0,this.tmdbService.getGenres().subscribe({next:t=>{this.genres=t.genres,this.updateGenreName(),this.loadMoviesByGenre()},error:t=>{console.error("Error loading genres:",t),this.loading=!1,this.snackBar.open("Error al cargar los g\xE9neros","Cerrar",{duration:3e3})}})}updateGenreName(){let t=this.genres.find(e=>e.id===this.genreId);this.genreName=t?t.name:`G\xE9nero ${this.genreId}`}loadMoviesByGenre(){this.tmdbService.getMoviesByGenreWithDetails(this.genreId,this.currentPage).subscribe({next:t=>{this.movies=t,this.tmdbService.getMoviesByGenre(this.genreId,this.currentPage).subscribe({next:e=>{this.totalPages=e.total_pages,this.totalResults=e.total_results,this.loading=!1}})},error:t=>{console.error("Error loading movies by genre:",t),this.loading=!1,this.snackBar.open("Error al cargar las pel\xEDculas del g\xE9nero","Cerrar",{duration:3e3})}})}onPageChange(t){this.currentPage=t.pageIndex+1,this.loadMoviesByGenre()}viewMovieDetail(t){this.router.navigate(["/movie",t])}getImageUrl(t){return this.tmdbService.getImageUrl(t)}onImageError(t){t.target.src="assets/img/poster-not-found.png"}getYear(t){return new Date(t).getFullYear().toString()}viewGenre(t,e){e.stopPropagation(),this.router.navigate(["/genre",t])}goBack(){this.router.navigate(["/"])}static \u0275fac=function(e){return new(e||n)(v(U),v(y),v(w),v(Y))};static \u0275cmp=C({type:n,selectors:[["app-genre"]],decls:13,vars:5,consts:[[1,"genre-container"],[1,"backdrop-overlay"],["mat-icon-button","","aria-label","Volver",1,"back-button",3,"click"],[1,"header"],[1,"genre-title"],[1,"content"],["class","loading-container",4,"ngIf"],["class","no-results",4,"ngIf"],["class","movies-grid",4,"ngIf"],["class","paginator",3,"length","pageSize","pageIndex","pageSizeOptions","page",4,"ngIf"],[1,"loading-container"],[1,"no-results"],[1,"movies-grid"],["class","movie-card",3,"click",4,"ngFor","ngForOf"],[1,"movie-card",3,"click"],["mat-card-image","",1,"movie-poster",3,"error","src","alt"],[1,"movie-content"],[1,"movie-title"],[1,"movie-meta"],[1,"movie-year"],[1,"movie-rating"],["class","movie-genres",4,"ngIf"],[1,"movie-genres"],["class","genre-chip clickable",3,"click",4,"ngFor","ngForOf"],[1,"genre-chip","clickable",3,"click"],[1,"paginator",3,"page","length","pageSize","pageIndex","pageSizeOptions"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),p("click",function(){return o.goBack()}),i(3,"mat-icon"),c(4,"arrow_back"),r()()(),i(5,"header",3)(6,"h1",4),c(7),r()(),i(8,"div",5),f(9,J,4,0,"div",6)(10,K,7,0,"div",7)(11,Z,2,1,"div",8)(12,ee,1,5,"mat-paginator",9),r()()),e&2&&(a(7),u(o.genreName),a(2),m("ngIf",o.loading),a(),m("ngIf",!o.loading&&o.movies.length===0),a(),m("ngIf",!o.loading&&o.movies.length>0),a(),m("ngIf",!o.loading&&o.totalPages>1))},dependencies:[S,O,I,T,k,E,G,B,z,V,D,N,F,R,j,A,$],styles:[".genre-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.back-button[_ngcontent-%COMP%]{color:#fff;background:#00000080;position:fixed;top:20px;left:20px;z-index:10}.header[_ngcontent-%COMP%]{margin-top:75px;text-align:center;margin-bottom:50px}.title[_ngcontent-%COMP%]{max-width:100%;height:auto;width:auto;object-fit:contain}.genre-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:600;margin:0;color:var(--text-color);text-transform:capitalize}.content[_ngcontent-%COMP%]{min-height:400px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.no-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.no-results[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:#ccc;margin-bottom:16px}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:var(--text-color)}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;color:#666}.movies-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:24px;margin-bottom:32px}.movie-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s ease,box-shadow .2s ease;border-radius:12px;overflow:hidden;background:var(--card-bg);border:1px solid var(--card-border)}.movie-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #00000026}.movie-poster[_ngcontent-%COMP%]{height:400px;object-fit:cover;width:100%}.movie-content[_ngcontent-%COMP%]{padding:16px}.movie-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;margin:0 0 8px;color:var(--text-color);line-height:1.3}.movie-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.movie-year[_ngcontent-%COMP%]{color:#666;font-size:.9rem}.movie-rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#f39c12;font-weight:500}.movie-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem}body.dark-mode[_ngcontent-%COMP%]   .movie-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f39c12!important}.movie-genres[_ngcontent-%COMP%]{display:flex;gap:6px;margin-bottom:12px;flex-wrap:wrap}.genre-chip[_ngcontent-%COMP%]{font-size:.75rem;height:24px;background:var(--detail-genre-bg);color:var(--detail-genre-color)}.paginator[_ngcontent-%COMP%]{margin-top:32px;background:var(--paginator-bg);color:var(--paginator-color);border-radius:8px;padding:8px 16px}@media (max-width: 1024px){.movies-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.genre-container[_ngcontent-%COMP%]{padding:16px}.genre-title[_ngcontent-%COMP%]{font-size:2rem}.movies-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:16px}.movie-poster[_ngcontent-%COMP%]{height:350px}}@media (max-width: 480px){.genre-title[_ngcontent-%COMP%]{font-size:1.8rem}.movies-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.movie-poster[_ngcontent-%COMP%]{height:400px}}"]})};export{W as GenreComponent};

import{b as Ca,c as ka,f as hd,g as Ta}from"./chunk-X5YLR3NI.js";import{a as pa,b as ya,c as je,d as Sa,e as xa}from"./chunk-NWSXHG2L.js";import{$ as Rs,$a as Ws,Aa as v,Ac as wa,Ba as X,Bc as Rn,C as qr,Ca as ve,Cb as xi,Cc as Fn,D as _i,Da as Gr,Db as Oe,Dc as io,E as Ts,Ea as Qe,Eb as na,Ec as Be,F as Ge,Fa as Je,Fb as ra,Fc as Ln,G as nt,Ga as Ye,Gb as oa,H as We,Ha as bn,Hb as Mn,I as Es,Ia as zs,Ib as Jr,J as Ms,Ja as Wr,Jb as Pn,K as Fe,Ka as wi,Kb as sa,L as pt,La as $s,Lb as aa,M as Ps,Ma as Kr,Mb as we,N as Os,Na as Si,Nb as la,O as ft,Oa as de,Ob as Ne,P as As,Pb as Se,Q as g,Qa as Vs,Qb as xe,R as Is,Ra as wn,Rb as Ce,S as yn,Sa as zt,Sb as qt,T as vi,Tb as Ht,U as N,Ua as ot,Ub as Ci,Va as be,Vb as Yr,W as G,Wa as qs,Wb as Xr,X as _e,Xa as re,Xb as Zr,Y as Ke,Ya as te,Yb as vt,Z as Ds,Za as Hs,_ as yi,_a as Gs,_b as ca,a as ae,aa as I,ab as Ks,b as ws,ba as Pe,bb as Qs,bc as eo,ca as w,cb as Sn,cc as da,d as Ss,da as rt,db as Js,dc as ua,e as xs,ea as ce,eb as st,ec as ki,fb as Ys,fc as Ti,g as gn,ga as Hr,gb as Xs,gc as ha,h as _n,hb as $t,hc as ma,i as Cs,ib as xn,ic as to,j as gi,jb as Zs,jc as Gt,k as jt,ka as m,kb as Vt,l as vn,la as p,ma as q,mb as Cn,mc as On,na as Fs,nb as Qr,nc as fa,o as z,oa as Ls,ob as kn,oc as Wt,p as ks,pa as J,pb as Tn,pc as ga,q as le,qa as bi,qc as _a,r as ge,ra as O,rc as Kt,s as se,sa as E,sb as ea,sc as An,t as Bt,ta as Ns,tb as ta,tc as Qt,u as S,ua as js,uc as Jt,va as Bs,vb as ia,vc as In,wa as Ut,wb as Le,wc as va,x as Vr,xa as gt,xb as En,xc as Dn,y as j,ya as _t,yc as Yt,z as B,za as Us,zc as ba}from"./chunk-L4XWPD5A.js";import{a as fe,b as ys,c as bs,e as He,g as dd,h as ud,i as h}from"./chunk-ODN5LVDJ.js";var Wo=He(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});var Ho=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Go.default=Ho});var Qo=He(Gi=>{"use strict";var Wl=Gi&&Gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gi,"__esModule",{value:!0});var Sh=Wl((Ta(),ud(hd))),xh=Wl(Wo()),Ko=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Sh.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let i=this.fetch,n=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(o=>h(this,null,function*(){var s,a,l;let c=null,d=null,u=null,_=o.status,f=o.statusText;if(o.ok){if(this.method!=="HEAD"){let M=yield o.text();M===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=M:d=JSON.parse(M))}let b=(s=this.headers.Prefer)===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),C=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");b&&C&&C.length>1&&(u=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,u=null,_=406,f="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{let b=yield o.text();try{c=JSON.parse(b),Array.isArray(c)&&o.status===404&&(d=[],c=null,_=200,f="OK")}catch{o.status===404&&b===""?(_=204,f="No Content"):c={message:b}}if(c&&this.isMaybeSingle&&(!((l=c?.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,_=200,f="OK"),c&&this.shouldThrowOnError)throw new xh.default(c)}return{error:c,data:d,count:u,status:_,statusText:f}}));return this.shouldThrowOnError||(n=n.catch(o=>{var s,a,l;return{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:`${(a=o?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,e)}returns(){return this}overrideTypes(){return this}};Gi.default=Ko});var Yo=He(Wi=>{"use strict";var Ch=Wi&&Wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wi,"__esModule",{value:!0});var kh=Ch(Qo()),Jo=class extends kh.default{select(t){let e=!1,i=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:i,foreignTable:n,referencedTable:o=n}={}){let s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:i=e}={}){let n=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:i,referencedTable:n=i}={}){let o=typeof n>"u"?"offset":`${n}.offset`,s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:i=!1,buffers:n=!1,wal:o=!1,format:s="text"}={}){var a;let l=[t?"analyze":null,e?"verbose":null,i?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${c}"; options=${l};`,s==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Wi.default=Jo});var pr=He(Ki=>{"use strict";var Th=Ki&&Ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ki,"__esModule",{value:!0});var Eh=Th(Yo()),Xo=class extends Eh.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let i=Array.from(new Set(e)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:i,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");let s=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${o}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,i])=>{this.url.searchParams.append(e,`eq.${i}`)}),this}not(t,e,i){return this.url.searchParams.append(t,`not.${e}.${i}`),this}or(t,{foreignTable:e,referencedTable:i=e}={}){let n=i?`${i}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,i){return this.url.searchParams.append(t,`${e}.${i}`),this}};Ki.default=Xo});var es=He(Ji=>{"use strict";var Mh=Ji&&Ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ji,"__esModule",{value:!0});var Qi=Mh(pr()),Zo=class{constructor(t,{headers:e={},schema:i,fetch:n}){this.url=t,this.headers=e,this.schema=i,this.fetch=n}select(t,{head:e=!1,count:i}={}){let n=e?"HEAD":"GET",o=!1,s=(t??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",s),i&&(this.headers.Prefer=`count=${i}`),new Qi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:i=!0}={}){let n="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),e&&o.push(`count=${e}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){let s=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(s.length>0){let a=[...new Set(s)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Qi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:i=!1,count:n,defaultToNull:o=!0}={}){let s="POST",a=[`resolution=${i?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){let l=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){let c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new Qi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let i="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),e&&n.push(`count=${e}`),this.headers.Prefer=n.join(","),new Qi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e="DELETE",i=[];return t&&i.push(`count=${t}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new Qi.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ji.default=Zo});var Kl=He(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.version=void 0;fr.version="0.0.0-automated"});var Ql=He(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.DEFAULT_HEADERS=void 0;var Ph=Kl();gr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Ph.version}`}});var Yl=He(Yi=>{"use strict";var Jl=Yi&&Yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yi,"__esModule",{value:!0});var Oh=Jl(es()),Ah=Jl(pr()),Ih=Ql(),ts=class r{constructor(t,{headers:e={},schema:i,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},Ih.DEFAULT_HEADERS),e),this.schemaName=i,this.fetch=n}from(t){let e=new URL(`${this.url}/${t}`);return new Oh.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new r(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:i=!1,get:n=!1,count:o}={}){let s,a=new URL(`${this.url}/rpc/${t}`),l;i||n?(s=i?"HEAD":"GET",Object.entries(e).filter(([d,u])=>u!==void 0).map(([d,u])=>[d,Array.isArray(u)?`{${u.join(",")}}`:`${u}`]).forEach(([d,u])=>{a.searchParams.append(d,u)})):(s="POST",l=e);let c=Object.assign({},this.headers);return o&&(c.Prefer=`count=${o}`),new Ah.default({method:s,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Yi.default=ts});var rc=He(ie=>{"use strict";var si=ie&&ie.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ie,"__esModule",{value:!0});ie.PostgrestError=ie.PostgrestBuilder=ie.PostgrestTransformBuilder=ie.PostgrestFilterBuilder=ie.PostgrestQueryBuilder=ie.PostgrestClient=void 0;var Xl=si(Yl());ie.PostgrestClient=Xl.default;var Zl=si(es());ie.PostgrestQueryBuilder=Zl.default;var ec=si(pr());ie.PostgrestFilterBuilder=ec.default;var tc=si(Yo());ie.PostgrestTransformBuilder=tc.default;var ic=si(Qo());ie.PostgrestBuilder=ic.default;var nc=si(Wo());ie.PostgrestError=nc.default;ie.default={PostgrestClient:Xl.default,PostgrestQueryBuilder:Zl.default,PostgrestFilterBuilder:ec.default,PostgrestTransformBuilder:tc.default,PostgrestBuilder:ic.default,PostgrestError:nc.default}});var D=function(r){return r[r.State=0]="State",r[r.Transition=1]="Transition",r[r.Sequence=2]="Sequence",r[r.Group=3]="Group",r[r.Animate=4]="Animate",r[r.Keyframes=5]="Keyframes",r[r.Style=6]="Style",r[r.Trigger=7]="Trigger",r[r.Reference=8]="Reference",r[r.AnimateChild=9]="AnimateChild",r[r.AnimateRef=10]="AnimateRef",r[r.Query=11]="Query",r[r.Stagger=12]="Stagger",r}(D||{}),Ae="*";function Ea(r,t=null){return{type:D.Sequence,steps:r,options:t}}function no(r){return{type:D.Style,styles:r,offset:null}}var Xe=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,e=0){this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Xt=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let e=0,i=0,n=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++n==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(i=>{let n=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(n)})}getPosition(){let t=this.players.reduce((e,i)=>e===null||i.totalTime>e.totalTime?i:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Ei="!";function Ma(r){return new z(3e3,!1)}function md(){return new z(3100,!1)}function pd(){return new z(3101,!1)}function fd(r){return new z(3001,!1)}function gd(r){return new z(3003,!1)}function _d(r){return new z(3004,!1)}function Oa(r,t){return new z(3005,!1)}function Aa(){return new z(3006,!1)}function Ia(){return new z(3007,!1)}function Da(r,t){return new z(3008,!1)}function Ra(r){return new z(3002,!1)}function Fa(r,t,e,i,n){return new z(3010,!1)}function La(){return new z(3011,!1)}function Na(){return new z(3012,!1)}function ja(){return new z(3200,!1)}function Ba(){return new z(3202,!1)}function Ua(){return new z(3013,!1)}function za(r){return new z(3014,!1)}function $a(r){return new z(3015,!1)}function Va(r){return new z(3016,!1)}function qa(r,t){return new z(3404,!1)}function vd(r){return new z(3502,!1)}function Ha(r){return new z(3503,!1)}function Ga(){return new z(3300,!1)}function Wa(r){return new z(3504,!1)}function Ka(r){return new z(3301,!1)}function Qa(r,t){return new z(3302,!1)}function Ja(r){return new z(3303,!1)}function Ya(r,t){return new z(3400,!1)}function Xa(r){return new z(3401,!1)}function Za(r){return new z(3402,!1)}function el(r,t){return new z(3505,!1)}function Ze(r){switch(r.length){case 0:return new Xe;case 1:return r[0];default:return new Xt(r)}}function ao(r,t,e=new Map,i=new Map){let n=[],o=[],s=-1,a=null;if(t.forEach(l=>{let c=l.get("offset"),d=c==s,u=d&&a||new Map;l.forEach((_,f)=>{let y=f,b=_;if(f!=="offset")switch(y=r.normalizePropertyName(y,n),b){case Ei:b=e.get(f);break;case Ae:b=i.get(f);break;default:b=r.normalizeStyleValue(f,y,b,n);break}u.set(y,b)}),d||o.push(u),a=u,s=c}),n.length)throw vd(n);return o}function Nn(r,t,e,i){switch(t){case"start":r.onStart(()=>i(e&&ro(e,"start",r)));break;case"done":r.onDone(()=>i(e&&ro(e,"done",r)));break;case"destroy":r.onDestroy(()=>i(e&&ro(e,"destroy",r)));break}}function ro(r,t,e){let i=e.totalTime,n=!!e.disabled,o=jn(r.element,r.triggerName,r.fromState,r.toState,t||r.phaseName,i??r.totalTime,n),s=r._data;return s!=null&&(o._data=s),o}function jn(r,t,e,i,n="",o=0,s){return{element:r,triggerName:t,fromState:e,toState:i,phaseName:n,totalTime:o,disabled:!!s}}function ue(r,t,e){let i=r.get(t);return i||r.set(t,i=e),i}function lo(r){let t=r.indexOf(":"),e=r.substring(1,t),i=r.slice(t+1);return[e,i]}var yd=typeof document>"u"?null:document.documentElement;function Bn(r){let t=r.parentNode||r.host||null;return t===yd?null:t}function bd(r){return r.substring(1,6)=="ebkit"}var yt=null,Pa=!1;function tl(r){yt||(yt=wd()||{},Pa=yt.style?"WebkitAppearance"in yt.style:!1);let t=!0;return yt.style&&!bd(r)&&(t=r in yt.style,!t&&Pa&&(t="Webkit"+r.charAt(0).toUpperCase()+r.slice(1)in yt.style)),t}function wd(){return typeof document<"u"?document.body:null}function co(r,t){for(;t;){if(t===r)return!0;t=Bn(t)}return!1}function uo(r,t,e){if(e)return Array.from(r.querySelectorAll(t));let i=r.querySelector(t);return i?[i]:[]}var Sd=1e3,ho="{{",xd="}}",mo="ng-enter",Un="ng-leave",Mi="ng-trigger",Pi=".ng-trigger",po="ng-animating",zn=".ng-animating";function Ue(r){if(typeof r=="number")return r;let t=r.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:oo(parseFloat(t[1]),t[2])}function oo(r,t){switch(t){case"s":return r*Sd;default:return r}}function Oi(r,t,e){return r.hasOwnProperty("duration")?r:Cd(r,t,e)}function Cd(r,t,e){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,n,o=0,s="";if(typeof r=="string"){let a=r.match(i);if(a===null)return t.push(Ma(r)),{duration:0,delay:0,easing:""};n=oo(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=oo(parseFloat(l),a[4]));let c=a[5];c&&(s=c)}else n=r;if(!e){let a=!1,l=t.length;n<0&&(t.push(md()),a=!0),o<0&&(t.push(pd()),a=!0),a&&t.splice(l,0,Ma(r))}return{duration:n,delay:o,easing:s}}function il(r){return r.length?r[0]instanceof Map?r:r.map(t=>new Map(Object.entries(t))):[]}function Ie(r,t,e){t.forEach((i,n)=>{let o=$n(n);e&&!e.has(n)&&e.set(n,r.style[o]),r.style[o]=i})}function at(r,t){t.forEach((e,i)=>{let n=$n(i);r.style[n]=""})}function Zt(r){return Array.isArray(r)?r.length==1?r[0]:Ea(r):r}function nl(r,t,e){let i=t.params||{},n=fo(r);n.length&&n.forEach(o=>{i.hasOwnProperty(o)||e.push(fd(o))})}var so=new RegExp(`${ho}\\s*(.+?)\\s*${xd}`,"g");function fo(r){let t=[];if(typeof r=="string"){let e;for(;e=so.exec(r);)t.push(e[1]);so.lastIndex=0}return t}function ei(r,t,e){let i=`${r}`,n=i.replace(so,(o,s)=>{let a=t[s];return a==null&&(e.push(gd(s)),a=""),a.toString()});return n==i?r:n}var kd=/-+([a-z0-9])/g;function $n(r){return r.replace(kd,(...t)=>t[1].toUpperCase())}function rl(r,t){return r===0||t===0}function ol(r,t,e){if(e.size&&t.length){let i=t[0],n=[];if(e.forEach((o,s)=>{i.has(s)||n.push(s),i.set(s,o)}),n.length)for(let o=1;o<t.length;o++){let s=t[o];n.forEach(a=>s.set(a,Vn(r,a)))}}return t}function he(r,t,e){switch(t.type){case D.Trigger:return r.visitTrigger(t,e);case D.State:return r.visitState(t,e);case D.Transition:return r.visitTransition(t,e);case D.Sequence:return r.visitSequence(t,e);case D.Group:return r.visitGroup(t,e);case D.Animate:return r.visitAnimate(t,e);case D.Keyframes:return r.visitKeyframes(t,e);case D.Style:return r.visitStyle(t,e);case D.Reference:return r.visitReference(t,e);case D.AnimateChild:return r.visitAnimateChild(t,e);case D.AnimateRef:return r.visitAnimateRef(t,e);case D.Query:return r.visitQuery(t,e);case D.Stagger:return r.visitStagger(t,e);default:throw _d(t.type)}}function Vn(r,t){return window.getComputedStyle(r)[t]}var Io=(()=>{class r{validateStyleProperty(e){return tl(e)}containsElement(e,i){return co(e,i)}getParentElement(e){return Bn(e)}query(e,i,n){return uo(e,i,n)}computeStyle(e,i,n){return n||""}animate(e,i,n,o,s,a=[],l){return new Xe(n,o)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=le({token:r,factory:r.\u0275fac})}return r})(),wt=class{static NOOP=new Io},St=class{};var Td=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Kn=class extends St{normalizePropertyName(t,e){return $n(t)}normalizeStyleValue(t,e,i,n){let o="",s=i.toString().trim();if(Td.has(e)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&n.push(Oa(t,i))}return s+o}};var Qn="*";function Ed(r,t){let e=[];return typeof r=="string"?r.split(/\s*,\s*/).forEach(i=>Md(i,e,t)):e.push(r),e}function Md(r,t,e){if(r[0]==":"){let l=Pd(r,e);if(typeof l=="function"){t.push(l);return}r=l}let i=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return e.push($a(r)),t;let n=i[1],o=i[2],s=i[3];t.push(sl(n,s));let a=n==Qn&&s==Qn;o[0]=="<"&&!a&&t.push(sl(s,n))}function Pd(r,t){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(Va(r)),"* => *"}}var qn=new Set(["true","1"]),Hn=new Set(["false","0"]);function sl(r,t){let e=qn.has(r)||Hn.has(r),i=qn.has(t)||Hn.has(t);return(n,o)=>{let s=r==Qn||r==n,a=t==Qn||t==o;return!s&&e&&typeof n=="boolean"&&(s=n?qn.has(r):Hn.has(r)),!a&&i&&typeof o=="boolean"&&(a=o?qn.has(t):Hn.has(t)),s&&a}}var gl=":self",Od=new RegExp(`s*${gl}s*,?`,"g");function _l(r,t,e,i){return new wo(r).build(t,e,i)}var al="",wo=class{_driver;constructor(t){this._driver=t}build(t,e,i){let n=new So(e);return this._resetContextStyleTimingState(n),he(this,Zt(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector=al,t.collectedStyles=new Map,t.collectedStyles.set(al,new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,n=e.depCount=0,o=[],s=[];return t.name.charAt(0)=="@"&&e.errors.push(Aa()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==D.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,o.push(this.visitState(l,e))}),l.name=c}else if(a.type==D.Transition){let l=this.visitTransition(a,e);i+=l.queryCount,n+=l.depCount,s.push(l)}else e.errors.push(Ia())}),{type:D.Trigger,name:t.name,states:o,transitions:s,queryCount:i,depCount:n,options:null}}visitState(t,e){let i=this.visitStyle(t.styles,e),n=t.options&&t.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=n||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{fo(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&e.errors.push(Da(t.name,[...o.values()]))}return{type:D.State,name:t.name,style:i,options:n?{params:n}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let i=he(this,Zt(t.animation),e),n=Ed(t.expr,e.errors);return{type:D.Transition,matchers:n,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:bt(t.options)}}visitSequence(t,e){return{type:D.Sequence,steps:t.steps.map(i=>he(this,i,e)),options:bt(t.options)}}visitGroup(t,e){let i=e.currentTime,n=0,o=t.steps.map(s=>{e.currentTime=i;let a=he(this,s,e);return n=Math.max(n,e.currentTime),a});return e.currentTime=n,{type:D.Group,steps:o,options:bt(t.options)}}visitAnimate(t,e){let i=Rd(t.timings,e.errors);e.currentAnimateTimings=i;let n,o=t.styles?t.styles:no({});if(o.type==D.Keyframes)n=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;let c={};i.easing&&(c.easing=i.easing),s=no(c)}e.currentTime+=i.duration+i.delay;let l=this.visitStyle(s,e);l.isEmptyStep=a,n=l}return e.currentAnimateTimings=null,{type:D.Animate,timings:i,style:n,options:null}}visitStyle(t,e){let i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){let i=[],n=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of n)typeof a=="string"?a===Ae?i.push(a):e.errors.push(Ra(a)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(ho)>=0){o=!0;break}}}),{type:D.Style,styles:i,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){let i=e.currentAnimateTimings,n=e.currentTime,o=e.currentTime;i&&o>0&&(o-=i.duration+i.delay),t.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=e.collectedStyles.get(e.currentQuerySelector),d=c.get(l),u=!0;d&&(o!=n&&o>=d.startTime&&n<=d.endTime&&(e.errors.push(Fa(l,d.startTime,d.endTime,o,n)),u=!1),o=d.startTime),u&&c.set(l,{startTime:o,endTime:n}),e.options&&nl(a,e.options,e.errors)})})}visitKeyframes(t,e){let i={type:D.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(La()),i;let n=1,o=0,s=[],a=!1,l=!1,c=0,d=t.steps.map(M=>{let F=this._makeStyleAst(M,e),V=F.offset!=null?F.offset:Dd(F.styles),x=0;return V!=null&&(o++,x=F.offset=V),l=l||x<0||x>1,a=a||x<c,c=x,s.push(x),F});l&&e.errors.push(Na()),a&&e.errors.push(ja());let u=t.steps.length,_=0;o>0&&o<u?e.errors.push(Ba()):o==0&&(_=n/(u-1));let f=u-1,y=e.currentTime,b=e.currentAnimateTimings,C=b.duration;return d.forEach((M,F)=>{let V=_>0?F==f?1:_*F:s[F],x=V*C;e.currentTime=y+b.delay+x,b.duration=x,this._validateStyleAst(M,e),M.offset=V,i.styles.push(M)}),i}visitReference(t,e){return{type:D.Reference,animation:he(this,Zt(t.animation),e),options:bt(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:D.AnimateChild,options:bt(t.options)}}visitAnimateRef(t,e){return{type:D.AnimateRef,animation:this.visitReference(t.animation,e),options:bt(t.options)}}visitQuery(t,e){let i=e.currentQuerySelector,n=t.options||{};e.queryCount++,e.currentQuery=t;let[o,s]=Ad(t.selector);e.currentQuerySelector=i.length?i+" "+o:o,ue(e.collectedStyles,e.currentQuerySelector,new Map);let a=he(this,Zt(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:D.Query,selector:o,limit:n.limit||0,optional:!!n.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:bt(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(Ua());let i=t.timings==="full"?{duration:0,delay:0,easing:"full"}:Oi(t.timings,e.errors,!0);return{type:D.Stagger,animation:he(this,Zt(t.animation),e),timings:i,options:null}}};function Ad(r){let t=!!r.split(/\s*,\s*/).find(e=>e==gl);return t&&(r=r.replace(Od,"")),r=r.replace(/@\*/g,Pi).replace(/@\w+/g,e=>Pi+"-"+e.slice(1)).replace(/:animating/g,zn),[r,t]}function Id(r){return r?fe({},r):null}var So=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function Dd(r){if(typeof r=="string")return null;let t=null;if(Array.isArray(r))r.forEach(e=>{if(e instanceof Map&&e.has("offset")){let i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(r instanceof Map&&r.has("offset")){let e=r;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function Rd(r,t){if(r.hasOwnProperty("duration"))return r;if(typeof r=="number"){let o=Oi(r,t).duration;return go(o,0,"")}let e=r;if(e.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=go(0,0,"");return o.dynamic=!0,o.strValue=e,o}let n=Oi(e,t);return go(n.duration,n.delay,n.easing)}function bt(r){return r?(r=fe({},r),r.params&&(r.params=Id(r.params))):r={},r}function go(r,t,e){return{duration:r,delay:t,easing:e}}function Do(r,t,e,i,n,o,s=null,a=!1){return{type:1,element:r,keyframes:t,preStyleProps:e,postStyleProps:i,duration:n,delay:o,totalTime:n+o,easing:s,subTimeline:a}}var Ii=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},Fd=1,Ld=":enter",Nd=new RegExp(Ld,"g"),jd=":leave",Bd=new RegExp(jd,"g");function vl(r,t,e,i,n,o=new Map,s=new Map,a,l,c=[]){return new xo().buildKeyframes(r,t,e,i,n,o,s,a,l,c)}var xo=class{buildKeyframes(t,e,i,n,o,s,a,l,c,d=[]){c=c||new Ii;let u=new Co(t,e,c,n,o,d,[]);u.options=l;let _=l.delay?Ue(l.delay):0;u.currentTimeline.delayNextStep(_),u.currentTimeline.setStyles([s],null,u.errors,l),he(this,i,u);let f=u.timelines.filter(y=>y.containsAnimation());if(f.length&&a.size){let y;for(let b=f.length-1;b>=0;b--){let C=f[b];if(C.element===e){y=C;break}}y&&!y.allowOnlyTimelineStyles()&&y.setStyles([a],null,u.errors,l)}return f.length?f.map(y=>y.buildKeyframes()):[Do(e,[],[],[],0,_,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let i=e.subInstructions.get(e.element);if(i){let n=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(i,n,n.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){let i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(let n of t){let o=n?.delay;if(o){let s=typeof o=="number"?o:Ue(ei(o,n?.params??{},e.errors));i.delayNextStep(s)}}}_visitSubInstructions(t,e,i){let o=e.currentTimeline.currentTime,s=i.duration!=null?Ue(i.duration):null,a=i.delay!=null?Ue(i.delay):null;return s!==0&&t.forEach(l=>{let c=e.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),he(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let i=e.subContextCount,n=e,o=t.options;if(o&&(o.params||o.delay)&&(n=e.createSubContext(o),n.transformIntoNewTimeline(),o.delay!=null)){n.previousNode.type==D.Style&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Jn);let s=Ue(o.delay);n.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>he(this,s,n)),n.currentTimeline.applyStylesToKeyframe(),n.subContextCount>i&&n.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let i=[],n=e.currentTimeline.currentTime,o=t.options&&t.options.delay?Ue(t.options.delay):0;t.steps.forEach(s=>{let a=e.createSubContext(t.options);o&&a.delayNextStep(o),he(this,s,a),n=Math.max(n,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(n),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let i=t.strValue,n=e.params?ei(i,e.params,e.errors):i;return Oi(n,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let i=e.currentAnimateTimings=this._visitTiming(t.timings,e),n=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),n.snapshotCurrentStyles());let o=t.style;o.type==D.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(i.duration),this.visitStyle(o,e),n.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let i=e.currentTimeline,n=e.currentAnimateTimings;!n&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=n&&n.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(o):i.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let i=e.currentAnimateTimings,n=e.currentTimeline.duration,o=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*o),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(n+o),e.previousNode=t}visitQuery(t,e){let i=e.currentTimeline.currentTime,n=t.options||{},o=n.delay?Ue(n.delay):0;o&&(e.previousNode.type===D.Style||i==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Jn);let s=i,a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!n.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{e.currentQueryIndex=d;let u=e.createSubContext(t.options,c);o&&u.delayNextStep(o),c===e.element&&(l=u.currentTimeline),he(this,t.animation,u),u.currentTimeline.applyStylesToKeyframe();let _=u.currentTimeline.currentTime;s=Math.max(s,_)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let i=e.parentContext,n=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1),l=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let d=e.currentTimeline;l&&d.delayNextStep(l);let u=d.currentTime;he(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=n.currentTime-u+(n.startTime-i.currentTimeline.startTime)}},Jn={},Co=class r{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Jn;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,i,n,o,s,a,l){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=n,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new Yn(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let i=t,n=this.options;i.duration!=null&&(n.duration=Ue(i.duration)),i.delay!=null&&(n.delay=Ue(i.delay));let o=i.params;if(o){let s=n.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=ei(o[a],s,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let i=t.params={};Object.keys(e).forEach(n=>{i[n]=e[n]})}}return t}createSubContext(t=null,e,i){let n=e||this.element,o=new r(this._driver,n,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(n,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=Jn,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){let n={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},o=new ko(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,n,t.stretchStartingKeyframe);return this.timelines.push(o),n}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,n,o,s){let a=[];if(n&&a.push(this.element),t.length>0){t=t.replace(Nd,"."+this._enterClassName),t=t.replace(Bd,"."+this._leaveClassName);let l=i!=1,c=this._driver.query(this.element,t,l);i!==0&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&a.length==0&&s.push(za(e)),a}},Yn=class r{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,i,n){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=n,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new r(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Fd,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Ae),this._currentKeyframe.set(e,Ae);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,n){e&&this._previousKeyframe.set("easing",e);let o=n&&n.params||{},s=Ud(t,this._globalTimelineStyles);for(let[a,l]of s){let c=ei(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ae),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{let n=this._styleSummary.get(i);(!n||e.time>n.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,i=this._keyframes.size===1&&this.duration===0,n=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((d,u)=>{d===Ei?t.add(u):d===Ae&&e.add(u)}),i||c.set("offset",l/this.duration),n.push(c)});let o=[...t.values()],s=[...e.values()];if(i){let a=n[0],l=new Map(a);a.set("offset",0),l.set("offset",1),n=[a,l]}return Do(this.element,n,o,s,this.duration,this.startTime,this.easing,!1)}},ko=class extends Yn{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,i,n,o,s,a=!1){super(t,e,s.delay),this.keyframes=i,this.preStyleProps=n,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:n}=this.timings;if(this._stretchStartingKeyframe&&e){let o=[],s=i+e,a=e/s,l=new Map(t[0]);l.set("offset",0),o.push(l);let c=new Map(t[0]);c.set("offset",ll(a)),o.push(c);let d=t.length-1;for(let u=1;u<=d;u++){let _=new Map(t[u]),f=_.get("offset"),y=e+f*i;_.set("offset",ll(y/s)),o.push(_)}i=s,e=0,n="",t=o}return Do(this.element,t,this.preStyleProps,this.postStyleProps,i,e,n,!0)}};function ll(r,t=3){let e=Math.pow(10,t-1);return Math.round(r*e)/e}function Ud(r,t){let e=new Map,i;return r.forEach(n=>{if(n==="*"){i??=t.keys();for(let o of i)e.set(o,Ae)}else for(let[o,s]of n)e.set(o,s)}),e}function cl(r,t,e,i,n,o,s,a,l,c,d,u,_){return{type:0,element:r,triggerName:t,isRemovalTransition:n,fromState:e,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:u,errors:_}}var _o={},Xn=class{_triggerName;ast;_stateStyles;constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,n){return zd(this.ast.matchers,t,e,i,n)}buildStyles(t,e,i){let n=this._stateStyles.get("*");return t!==void 0&&(n=this._stateStyles.get(t?.toString())||n),n?n.buildStyles(e,i):new Map}build(t,e,i,n,o,s,a,l,c,d){let u=[],_=this.ast.options&&this.ast.options.params||_o,f=a&&a.params||_o,y=this.buildStyles(i,f,u),b=l&&l.params||_o,C=this.buildStyles(n,b,u),M=new Set,F=new Map,V=new Map,x=n==="void",$={params:yl(b,_),delay:this.ast.options?.delay},Q=d?[]:vl(t,e,this.ast.animation,o,s,y,C,$,c,u),L=0;return Q.forEach(H=>{L=Math.max(H.duration+H.delay,L)}),u.length?cl(e,this._triggerName,i,n,x,y,C,[],[],F,V,L,u):(Q.forEach(H=>{let ut=H.element,Nt=ue(F,ut,new Set);H.preStyleProps.forEach(ht=>Nt.add(ht));let fs=ue(V,ut,new Set);H.postStyleProps.forEach(ht=>fs.add(ht)),ut!==e&&M.add(ut)}),cl(e,this._triggerName,i,n,x,y,C,Q,[...M.values()],F,V,L))}};function zd(r,t,e,i,n){return r.some(o=>o(t,e,i,n))}function yl(r,t){let e=fe({},t);return Object.entries(r).forEach(([i,n])=>{n!=null&&(e[i]=n)}),e}var To=class{styles;defaultParams;normalizer;constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){let i=new Map,n=yl(t,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=ei(s,n,e));let l=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,l,s,e),i.set(a,s)})}),i}};function $d(r,t,e){return new Eo(r,t,e)}var Eo=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,e.states.forEach(n=>{let o=n.options&&n.options.params||{};this.states.set(n.name,new To(n.style,o,i))}),dl(this.states,"true","1"),dl(this.states,"false","0"),e.transitions.forEach(n=>{this.transitionFactories.push(new Xn(t,n,this.states))}),this.fallbackTransition=Vd(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,n){return this.transitionFactories.find(s=>s.match(t,e,i,n))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}};function Vd(r,t,e){let i=[(s,a)=>!0],n={type:D.Sequence,steps:[],options:null},o={type:D.Transition,animation:n,matchers:i,options:null,queryCount:0,depCount:0};return new Xn(r,o,t)}function dl(r,t,e){r.has(t)?r.has(e)||r.set(e,r.get(t)):r.has(e)&&r.set(t,r.get(e))}var qd=new Ii,Mo=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i}register(t,e){let i=[],n=[],o=_l(this._driver,e,i,n);if(i.length)throw Ha(i);this._animations.set(t,o)}_buildPlayer(t,e,i){let n=t.element,o=ao(this._normalizer,t.keyframes,e,i);return this._driver.animate(n,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){let n=[],o=this._animations.get(t),s,a=new Map;if(o?(s=vl(this._driver,e,o,mo,Un,new Map,new Map,i,qd,n),s.forEach(d=>{let u=ue(a,d.element,new Map);d.postStyleProps.forEach(_=>u.set(_,null))})):(n.push(Ga()),s=[]),n.length)throw Wa(n);a.forEach((d,u)=>{d.forEach((_,f)=>{d.set(f,this._driver.computeStyle(u,f,Ae))})});let l=s.map(d=>{let u=a.get(d.element);return this._buildPlayer(d,new Map,u)}),c=Ze(l);return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw Ka(t);return e}listen(t,e,i,n){let o=jn(e,"","","");return Nn(this._getPlayer(t),i,o,n),()=>{}}command(t,e,i,n){if(i=="register"){this.register(t,n[0]);return}if(i=="create"){let s=n[0]||{};this.create(t,e,s);return}let o=this._getPlayer(t);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(n[0]));break;case"destroy":this.destroy(t);break}}},ul="ng-animate-queued",Hd=".ng-animate-queued",vo="ng-animate-disabled",Gd=".ng-animate-disabled",Wd="ng-star-inserted",Kd=".ng-star-inserted",Qd=[],bl={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Jd={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},De="__ng_removed",Di=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let i=t&&t.hasOwnProperty("value"),n=i?t.value:t;if(this.value=Xd(n),i){let o=t,{value:s}=o,a=bs(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let i=this.options.params;Object.keys(e).forEach(n=>{i[n]==null&&(i[n]=e[n])})}}},Ai="void",yo=new Di(Ai),Po=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this._hostClassName="ng-tns-"+t,ke(e,this._hostClassName)}listen(t,e,i,n){if(!this._triggers.has(e))throw Qa(i,e);if(i==null||i.length==0)throw Ja(e);if(!Zd(i))throw Ya(i,e);let o=ue(this._elementListeners,t,[]),s={name:e,phase:i,callback:n};o.push(s);let a=ue(this._engine.statesByElement,t,new Map);return a.has(e)||(ke(t,Mi),ke(t,Mi+"-"+e),a.set(e,yo)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw Xa(t);return e}trigger(t,e,i,n=!0){let o=this._getTrigger(e),s=new Ri(this.id,e,t),a=this._engine.statesByElement.get(t);a||(ke(t,Mi),ke(t,Mi+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e),c=new Di(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=yo),!(c.value===Ai)&&l.value===c.value){if(!iu(l.params,c.params)){let b=[],C=o.matchStyles(l.value,l.params,b),M=o.matchStyles(c.value,c.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{at(t,C),Ie(t,M)})}return}let _=ue(this._engine.playersByElement,t,[]);_.forEach(b=>{b.namespaceId==this.id&&b.triggerName==e&&b.queued&&b.destroy()});let f=o.matchTransition(l.value,c.value,t,c.params),y=!1;if(!f){if(!n)return;f=o.fallbackTransition,y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:f,fromState:l,toState:c,player:s,isFallbackTransition:y}),y||(ke(t,ul),s.onStart(()=>{ti(t,ul)})),s.onDone(()=>{let b=this.players.indexOf(s);b>=0&&this.players.splice(b,1);let C=this._engine.playersByElement.get(t);if(C){let M=C.indexOf(s);M>=0&&C.splice(M,1)}}),this.players.push(s),_.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(n=>n.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let i=this._engine.driver.query(t,Pi,!0);i.forEach(n=>{if(n[De])return;let o=this._engine.fetchNamespacesByElement(n);o.size?o.forEach(s=>s.triggerLeaveAnimation(n,e,!1,!0)):this.clearElementCache(n)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(n=>this.clearElementCache(n)))}triggerLeaveAnimation(t,e,i,n){let o=this._engine.statesByElement.get(t),s=new Map;if(o){let a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let d=this.trigger(t,c,Ai,n);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),i&&Ze(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){let n=new Set;e.forEach(o=>{let s=o.name;if(n.has(s))return;n.add(s);let l=this._triggers.get(s).fallbackTransition,c=i.get(s)||yo,d=new Di(Ai),u=new Ri(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:c,toState:d,player:u,isFallbackTransition:!0})})}}removeNode(t,e){let i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let n=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(t):[];if(o&&o.length)n=!0;else{let s=t;for(;s=s.parentNode;)if(i.statesByElement.get(s)){n=!0;break}}}if(this.prepareLeaveAnimationListeners(t),n)i.markElementAsRemoved(this.id,t,!1,e);else{let o=t[De];(!o||o===bl)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){ke(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(i=>{let n=i.player;if(n.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let l=jn(o,i.triggerName,i.fromState.value,i.toState.value);l._data=t,Nn(i.player,a.phase,l,a.callback)}}),n.markedForDestroy?this._engine.afterFlush(()=>{n.destroy()}):e.push(i)}),this._queue=[],e.sort((i,n)=>{let o=i.transition.ast.depCount,s=n.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,n.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},Oo=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){let i=new Po(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){let i=this._namespaceList,n=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){let l=n.get(a);if(l){let c=i.indexOf(l);i.splice(c+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(t)}else i.push(t);return n.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let n=this._namespaceLookup[t];n&&n.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);let n=this._namespaceList.indexOf(i);n>=0&&this._namespaceList.splice(n,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,i=this.statesByElement.get(t);if(i){for(let n of i.values())if(n.namespaceId){let o=this._fetchNamespace(n.namespaceId);o&&e.add(o)}}return e}trigger(t,e,i,n){if(Gn(e)){let o=this._fetchNamespace(t);if(o)return o.trigger(e,i,n),!0}return!1}insertNode(t,e,i,n){if(!Gn(e))return;let o=e[De];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){let s=this._fetchNamespace(t);s&&s.insertNode(e,i)}n&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),ke(t,vo)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),ti(t,vo))}removeNode(t,e,i){if(Gn(e)){let n=t?this._fetchNamespace(t):null;n?n.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);let o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,n,o){this.collectedLeaveElements.push(e),e[De]={namespaceId:t,setForRemoval:n,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,i,n,o){return Gn(e)?this._fetchNamespace(t).listen(e,i,n,o):()=>{}}_buildInstruction(t,e,i,n,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,n,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,Pi,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,zn,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Ze(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[De];if(e&&e.setForRemoval){if(t[De]=bl,e.namespaceId){this.destroyInnerAnimations(t);let i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(vo)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Gd,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,n)=>this._balanceNamespaceList(i,n)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let n=this.collectedEnterElements[i];ke(n,Wd)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{e=this._flushAnimations(i,t)}finally{for(let n=0;n<i.length;n++)i[n]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let n=this.collectedLeaveElements[i];this.processLeaveNode(n)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],e.length?Ze(e).onDone(()=>{i.forEach(n=>n())}):i.forEach(n=>n())}}reportError(t){throw Za(t)}_flushAnimations(t,e){let i=new Ii,n=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(k=>{d.add(k);let T=this.driver.query(k,Hd,!0);for(let P=0;P<T.length;P++)d.add(T[P])});let u=this.bodyNode,_=Array.from(this.statesByElement.keys()),f=pl(_,this.collectedEnterElements),y=new Map,b=0;f.forEach((k,T)=>{let P=mo+b++;y.set(T,P),k.forEach(U=>ke(U,P))});let C=[],M=new Set,F=new Set;for(let k=0;k<this.collectedLeaveElements.length;k++){let T=this.collectedLeaveElements[k],P=T[De];P&&P.setForRemoval&&(C.push(T),M.add(T),P.hasAnimation?this.driver.query(T,Kd,!0).forEach(U=>M.add(U)):F.add(T))}let V=new Map,x=pl(_,Array.from(M));x.forEach((k,T)=>{let P=Un+b++;V.set(T,P),k.forEach(U=>ke(U,P))}),t.push(()=>{f.forEach((k,T)=>{let P=y.get(T);k.forEach(U=>ti(U,P))}),x.forEach((k,T)=>{let P=V.get(T);k.forEach(U=>ti(U,P))}),C.forEach(k=>{this.processLeaveNode(k)})});let $=[],Q=[];for(let k=this._namespaceList.length-1;k>=0;k--)this._namespaceList[k].drainQueuedTransitions(e).forEach(P=>{let U=P.player,ee=P.element;if($.push(U),this.collectedEnterElements.length){let ne=ee[De];if(ne&&ne.setForMove){if(ne.previousTriggersValues&&ne.previousTriggersValues.has(P.triggerName)){let mt=ne.previousTriggersValues.get(P.triggerName),ye=this.statesByElement.get(P.element);if(ye&&ye.has(P.triggerName)){let fn=ye.get(P.triggerName);fn.value=mt,ye.set(P.triggerName,fn)}}U.destroy();return}}let Re=!u||!this.driver.containsElement(u,ee),pe=V.get(ee),it=y.get(ee),K=this._buildInstruction(P,i,it,pe,Re);if(K.errors&&K.errors.length){Q.push(K);return}if(Re){U.onStart(()=>at(ee,K.fromStyles)),U.onDestroy(()=>Ie(ee,K.toStyles)),n.push(U);return}if(P.isFallbackTransition){U.onStart(()=>at(ee,K.fromStyles)),U.onDestroy(()=>Ie(ee,K.toStyles)),n.push(U);return}let vs=[];K.timelines.forEach(ne=>{ne.stretchStartingKeyframe=!0,this.disabledNodes.has(ne.element)||vs.push(ne)}),K.timelines=vs,i.append(ee,K.timelines);let cd={instruction:K,player:U,element:ee};s.push(cd),K.queriedElements.forEach(ne=>ue(a,ne,[]).push(U)),K.preStyleProps.forEach((ne,mt)=>{if(ne.size){let ye=l.get(mt);ye||l.set(mt,ye=new Set),ne.forEach((fn,$r)=>ye.add($r))}}),K.postStyleProps.forEach((ne,mt)=>{let ye=c.get(mt);ye||c.set(mt,ye=new Set),ne.forEach((fn,$r)=>ye.add($r))})});if(Q.length){let k=[];Q.forEach(T=>{k.push(el(T.triggerName,T.errors))}),$.forEach(T=>T.destroy()),this.reportError(k)}let L=new Map,H=new Map;s.forEach(k=>{let T=k.element;i.has(T)&&(H.set(T,T),this._beforeAnimationBuild(k.player.namespaceId,k.instruction,L))}),n.forEach(k=>{let T=k.element;this._getPreviousPlayers(T,!1,k.namespaceId,k.triggerName,null).forEach(U=>{ue(L,T,[]).push(U),U.destroy()})});let ut=C.filter(k=>fl(k,l,c)),Nt=new Map;ml(Nt,this.driver,F,c,Ae).forEach(k=>{fl(k,l,c)&&ut.push(k)});let ht=new Map;f.forEach((k,T)=>{ml(ht,this.driver,new Set(k),l,Ei)}),ut.forEach(k=>{let T=Nt.get(k),P=ht.get(k);Nt.set(k,new Map([...T?.entries()??[],...P?.entries()??[]]))});let zr=[],gs=[],_s={};s.forEach(k=>{let{element:T,player:P,instruction:U}=k;if(i.has(T)){if(d.has(T)){P.onDestroy(()=>Ie(T,U.toStyles)),P.disabled=!0,P.overrideTotalTime(U.totalTime),n.push(P);return}let ee=_s;if(H.size>1){let pe=T,it=[];for(;pe=pe.parentNode;){let K=H.get(pe);if(K){ee=K;break}it.push(pe)}it.forEach(K=>H.set(K,ee))}let Re=this._buildAnimation(P.namespaceId,U,L,o,ht,Nt);if(P.setRealPlayer(Re),ee===_s)zr.push(P);else{let pe=this.playersByElement.get(ee);pe&&pe.length&&(P.parentPlayer=Ze(pe)),n.push(P)}}else at(T,U.fromStyles),P.onDestroy(()=>Ie(T,U.toStyles)),gs.push(P),d.has(T)&&n.push(P)}),gs.forEach(k=>{let T=o.get(k.element);if(T&&T.length){let P=Ze(T);k.setRealPlayer(P)}}),n.forEach(k=>{k.parentPlayer?k.syncPlayerEvents(k.parentPlayer):k.destroy()});for(let k=0;k<C.length;k++){let T=C[k],P=T[De];if(ti(T,Un),P&&P.hasAnimation)continue;let U=[];if(a.size){let Re=a.get(T);Re&&Re.length&&U.push(...Re);let pe=this.driver.query(T,zn,!0);for(let it=0;it<pe.length;it++){let K=a.get(pe[it]);K&&K.length&&U.push(...K)}}let ee=U.filter(Re=>!Re.destroyed);ee.length?eu(this,T,ee):this.processLeaveNode(T)}return C.length=0,zr.forEach(k=>{this.players.push(k),k.onDone(()=>{k.destroy();let T=this.players.indexOf(k);this.players.splice(T,1)}),k.play()}),zr}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,n,o){let s=[];if(e){let a=this.playersByQueriedElement.get(t);a&&(s=a)}else{let a=this.playersByElement.get(t);if(a){let l=!o||o==Ai;a.forEach(c=>{c.queued||!l&&c.triggerName!=n||s.push(c)})}}return(i||n)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||n&&n!=a.triggerName))),s}_beforeAnimationBuild(t,e,i){let n=e.triggerName,o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:n;for(let l of e.timelines){let c=l.element,d=c!==o,u=ue(i,c,[]);this._getPreviousPlayers(c,d,s,a,e.toState).forEach(f=>{let y=f.getRealPlayer();y.beforeDestroy&&y.beforeDestroy(),f.destroy(),u.push(f)})}at(o,e.fromStyles)}_buildAnimation(t,e,i,n,o,s){let a=e.triggerName,l=e.element,c=[],d=new Set,u=new Set,_=e.timelines.map(y=>{let b=y.element;d.add(b);let C=b[De];if(C&&C.removedBeforeQueried)return new Xe(y.duration,y.delay);let M=b!==l,F=tu((i.get(b)||Qd).map(L=>L.getRealPlayer())).filter(L=>{let H=L;return H.element?H.element===b:!1}),V=o.get(b),x=s.get(b),$=ao(this._normalizer,y.keyframes,V,x),Q=this._buildPlayer(y,$,F);if(y.subTimeline&&n&&u.add(b),M){let L=new Ri(t,a,b);L.setRealPlayer(Q),c.push(L)}return Q});c.forEach(y=>{ue(this.playersByQueriedElement,y.element,[]).push(y),y.onDone(()=>Yd(this.playersByQueriedElement,y.element,y))}),d.forEach(y=>ke(y,po));let f=Ze(_);return f.onDestroy(()=>{d.forEach(y=>ti(y,po)),Ie(l,e.toStyles)}),u.forEach(y=>{ue(n,y,[]).push(f)}),f}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Xe(t.duration,t.delay)}},Ri=class{namespaceId;triggerName;element;_player=new Xe;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(n=>Nn(t,i,void 0,n))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ue(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function Yd(r,t,e){let i=r.get(t);if(i){if(i.length){let n=i.indexOf(e);i.splice(n,1)}i.length==0&&r.delete(t)}return i}function Xd(r){return r??null}function Gn(r){return r&&r.nodeType===1}function Zd(r){return r=="start"||r=="done"}function hl(r,t){let e=r.style.display;return r.style.display=t??"none",e}function ml(r,t,e,i,n){let o=[];e.forEach(l=>o.push(hl(l)));let s=[];i.forEach((l,c)=>{let d=new Map;l.forEach(u=>{let _=t.computeStyle(c,u,n);d.set(u,_),(!_||_.length==0)&&(c[De]=Jd,s.push(c))}),r.set(c,d)});let a=0;return e.forEach(l=>hl(l,o[a++])),s}function pl(r,t){let e=new Map;if(r.forEach(a=>e.set(a,[])),t.length==0)return e;let i=1,n=new Set(t),o=new Map;function s(a){if(!a)return i;let l=o.get(a);if(l)return l;let c=a.parentNode;return e.has(c)?l=c:n.has(c)?l=i:l=s(c),o.set(a,l),l}return t.forEach(a=>{let l=s(a);l!==i&&e.get(l).push(a)}),e}function ke(r,t){r.classList?.add(t)}function ti(r,t){r.classList?.remove(t)}function eu(r,t,e){Ze(e).onDone(()=>r.processLeaveNode(t))}function tu(r){let t=[];return wl(r,t),t}function wl(r,t){for(let e=0;e<r.length;e++){let i=r[e];i instanceof Xt?wl(i.players,t):t.push(i)}}function iu(r,t){let e=Object.keys(r),i=Object.keys(t);if(e.length!=i.length)return!1;for(let n=0;n<e.length;n++){let o=e[n];if(!t.hasOwnProperty(o)||r[o]!==t[o])return!1}return!0}function fl(r,t,e){let i=e.get(r);if(!i)return!1;let n=t.get(r);return n?i.forEach(o=>n.add(o)):t.set(r,i),e.delete(r),!0}var ii=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,i){this._driver=e,this._normalizer=i,this._transitionEngine=new Oo(t.body,e,i),this._timelineEngine=new Mo(t.body,e,i),this._transitionEngine.onRemovalComplete=(n,o)=>this.onRemovalComplete(n,o)}registerTrigger(t,e,i,n,o){let s=t+"-"+n,a=this._triggerCache[s];if(!a){let l=[],c=[],d=_l(this._driver,o,l,c);if(l.length)throw qa(n,l);a=$d(n,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,n,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,n){this._transitionEngine.insertNode(t,e,i,n)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,n){if(i.charAt(0)=="@"){let[o,s]=lo(i),a=n;this._timelineEngine.command(o,e,s,a)}else this._transitionEngine.trigger(t,e,i,n)}listen(t,e,i,n,o){if(i.charAt(0)=="@"){let[s,a]=lo(i);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,i,n,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function nu(r,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=bo(t[0]),t.length>1&&(i=bo(t[t.length-1]))):t instanceof Map&&(e=bo(t)),e||i?new ru(r,e,i):null}var ru=(()=>{class r{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,i,n){this._element=e,this._startStyles=i,this._endStyles=n;let o=r.initialStylesByElement.get(e);o||r.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Ie(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ie(this._element,this._initialStyles),this._endStyles&&(Ie(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(at(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(at(this._element,this._endStyles),this._endStyles=null),Ie(this._element,this._initialStyles),this._state=3)}}return r})();function bo(r){let t=null;return r.forEach((e,i)=>{ou(i)&&(t=t||new Map,t.set(i,e))}),t}function ou(r){return r==="display"||r==="position"}var Zn=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,i,n){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=n,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,n)=>{n!=="offset"&&t.set(n,this._finished?i:Vn(this.element,n))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},er=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return co(t,e)}getParentElement(t){return Bn(t)}query(t,e,i){return uo(t,e,i)}computeStyle(t,e,i){return Vn(t,e)}animate(t,e,i,n,o,s=[]){let a=n==0?"both":"forwards",l={duration:i,delay:n,fill:a};o&&(l.easing=o);let c=new Map,d=s.filter(f=>f instanceof Zn);rl(i,n)&&d.forEach(f=>{f.currentSnapshot.forEach((y,b)=>c.set(b,y))});let u=il(e).map(f=>new Map(f));u=ol(t,u,c);let _=nu(t,u);return new Zn(t,u,l,_)}};var Wn="@",Sl="@.disabled",tr=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,i,n){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=n}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,n=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,n)}removeChild(t,e,i){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,n){this.delegate.setAttribute(t,e,i,n)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,n){this.delegate.setStyle(t,e,i,n)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){e.charAt(0)==Wn&&e==Sl?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i,n){return this.delegate.listen(t,e,i,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},Ao=class extends tr{factory;constructor(t,e,i,n,o){super(e,i,n,o),this.factory=t,this.namespaceId=e}setProperty(t,e,i){e.charAt(0)==Wn?e.charAt(1)=="."&&e==Sl?(i=i===void 0?!0:!!i,this.disableAnimations(t,i)):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i,n){if(e.charAt(0)==Wn){let o=su(t),s=e.slice(1),a="";return s.charAt(0)!=Wn&&([s,a]=au(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,i,l)})}return this.delegate.listen(t,e,i,n)}};function su(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}function au(r){let t=r.indexOf("."),e=r.substring(0,t),i=r.slice(t+1);return[e,i]}var ir=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,i){this.delegate=t,this.engine=e,this._zone=i,e.onRemovalComplete=(n,o)=>{o?.removeChild(null,n)}}createRenderer(t,e){let i="",n=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let c=this._rendererCache,d=c.get(n);if(!d){let u=()=>c.delete(n);d=new tr(i,n,this.engine,u),c.set(n,d)}return d}let o=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,t);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,t,c.name,c)};return e.data.animation.forEach(a),new Ao(this,s,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,i){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(i));return}let n=this._animationCallbacksBuffer;n.length==0&&queueMicrotask(()=>{this._zone.run(()=>{n.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),n.push([e,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var cu=(()=>{class r extends ii{constructor(e,i,n){super(e,i,n)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||r)(Bt(wn),Bt(wt),Bt(St))};static \u0275prov=le({token:r,factory:r.\u0275fac})}return r})();function du(){return new Kn}function uu(r,t,e){return new ir(r,t,e)}var xl=[{provide:St,useFactory:du},{provide:ii,useClass:cu},{provide:yn,useFactory:uu,deps:[Hs,ii,nt]}],$m=[{provide:wt,useClass:Io},{provide:pt,useValue:"NoopAnimations"},...xl],hu=[{provide:wt,useFactory:()=>new er},{provide:pt,useFactory:()=>"BrowserAnimations"},...xl];function Cl(){return Ps("NgEagerAnimations"),[...hu]}var mu=["button"],pu=["*"];function fu(r,t){if(r&1&&(m(0,"div",2),q(1,"mat-pseudo-checkbox",6),p()),r&2){let e=E();g(),w("disabled",e.disabled)}}var kl=new se("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:gu});function gu(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1,disabledInteractive:!1}}var Tl=new se("MatButtonToggleGroup"),_u={provide:fa,useExisting:ks(()=>Ro),multi:!0},nr=class{source;value;constructor(t,e){this.source=t,this.value=e}},Ro=(()=>{class r{_changeDetector=S(Si);_dir=S(xi,{optional:!0});_multiple=!1;_disabled=!1;_disabledInteractive=!1;_selectionModel;_rawValue;_controlValueAccessorChangeFn=()=>{};_onTouched=()=>{};_buttonToggles;appearance;get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}_name=S(Le).getId("mat-button-toggle-group-");vertical;get value(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(i=>i.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}valueChange=new Ge;get selected(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=e,this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markButtonsForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markButtonsForCheck()}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}change=new Ge;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._markButtonsForCheck()}_hideSingleSelectionIndicator;get hideMultipleSelectionIndicator(){return this._hideMultipleSelectionIndicator}set hideMultipleSelectionIndicator(e){this._hideMultipleSelectionIndicator=e,this._markButtonsForCheck()}_hideMultipleSelectionIndicator;constructor(){let e=S(kl,{optional:!0});this.appearance=e&&e.appearance?e.appearance:"standard",this.hideSingleSelectionIndicator=e?.hideSingleSelectionIndicator??!1,this.hideMultipleSelectionIndicator=e?.hideMultipleSelectionIndicator??!1}ngOnInit(){this._selectionModel=new pa(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked)),this.multiple||this._initializeTabIndex()}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_keydown(e){if(this.multiple||this.disabled)return;let n=e.target.id,o=this._buttonToggles.toArray().findIndex(a=>a.buttonId===n),s=null;switch(e.keyCode){case 32:case 13:s=this._buttonToggles.get(o)||null;break;case 38:s=this._getNextButton(o,-1);break;case 37:s=this._getNextButton(o,this.dir==="ltr"?-1:1);break;case 40:s=this._getNextButton(o,1);break;case 39:s=this._getNextButton(o,this.dir==="ltr"?1:-1);break;default:return}s&&(e.preventDefault(),s._onButtonClick(),s.focus())}_emitChangeEvent(e){let i=new nr(e,this.value);this._rawValue=i.value,this._controlValueAccessorChangeFn(i.value),this.change.emit(i)}_syncButtonToggle(e,i,n=!1,o=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?i?this._selectionModel.select(e):this._selectionModel.deselect(e):o=!0,o?Promise.resolve().then(()=>this._updateModelValue(e,n)):this._updateModelValue(e,n)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return typeof this._rawValue>"u"?!1:this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(i=>e.value!=null&&i===e.value):e.value===this._rawValue}_initializeTabIndex(){if(this._buttonToggles.forEach(e=>{e.tabIndex=-1}),this.selected)this.selected.tabIndex=0;else for(let e=0;e<this._buttonToggles.length;e++){let i=this._buttonToggles.get(e);if(!i.disabled){i.tabIndex=0;break}}this._markButtonsForCheck()}_getNextButton(e,i){let n=this._buttonToggles;for(let o=1;o<=n.length;o++){let s=(e+i*o+n.length)%n.length,a=n.get(s);if(a&&!a.disabled)return a}return null}_setSelectionByValue(e){if(this._rawValue=e,!this._buttonToggles)return;let i=this._buttonToggles.toArray();if(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(n=>this._selectValue(n,i))):(this._clearSelection(),this._selectValue(e,i)),!this.multiple&&i.every(n=>n.tabIndex===-1)){for(let n of i)if(!n.disabled){n.tabIndex=0;break}}}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>{e.checked=!1,this.multiple||(e.tabIndex=-1)})}_selectValue(e,i){for(let n of i)if(n.value===e){n.checked=!0,this._selectionModel.select(n),this.multiple||(n.tabIndex=0);break}}_updateModelValue(e,i){i&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}static \u0275fac=function(i){return new(i||r)};static \u0275dir=Ke({type:r,selectors:[["mat-button-toggle-group"]],contentQueries:function(i,n,o){if(i&1&&Bs(o,rr,5),i&2){let s;gt(s=_t())&&(n._buttonToggles=s)}},hostAttrs:[1,"mat-button-toggle-group"],hostVars:6,hostBindings:function(i,n){i&1&&O("keydown",function(s){return n._keydown(s)}),i&2&&(Pe("role",n.multiple?"group":"radiogroup")("aria-disabled",n.disabled),ce("mat-button-toggle-vertical",n.vertical)("mat-button-toggle-group-appearance-standard",n.appearance==="standard"))},inputs:{appearance:"appearance",name:"name",vertical:[2,"vertical","vertical",de],value:"value",multiple:[2,"multiple","multiple",de],disabled:[2,"disabled","disabled",de],disabledInteractive:[2,"disabledInteractive","disabledInteractive",de],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",de],hideMultipleSelectionIndicator:[2,"hideMultipleSelectionIndicator","hideMultipleSelectionIndicator",de]},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[bn([_u,{provide:Tl,useExisting:r}])]})}return r})(),rr=(()=>{class r{_changeDetectorRef=S(Si);_elementRef=S(We);_focusMonitor=S(kn);_idGenerator=S(Le);_animationMode=S(pt,{optional:!0});_checked=!1;ariaLabel;ariaLabelledby=null;_buttonElement;buttonToggleGroup;get buttonId(){return`${this.id}-button`}id;name;value;get tabIndex(){return this._tabIndex}set tabIndex(e){e!==this._tabIndex&&(this._tabIndex=e,this._markForCheck())}_tabIndex;disableRipple;get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}_appearance;get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=e}_disabled=!1;get disabledInteractive(){return this._disabledInteractive||this.buttonToggleGroup!==null&&this.buttonToggleGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}_disabledInteractive;change=new Ge;constructor(){S(Tn).load(aa);let e=S(Tl,{optional:!0}),i=S(new Ts("tabindex"),{optional:!0})||"",n=S(kl,{optional:!0});this._tabIndex=parseInt(i)||0,this.buttonToggleGroup=e,this.appearance=n&&n.appearance?n.appearance:"standard",this.disabledInteractive=n?.disabledInteractive??!1}ngOnInit(){let e=this.buttonToggleGroup;this.id=this.id||this._idGenerator.getId("mat-button-toggle-"),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._animationMode!=="NoopAnimations"&&this._elementRef.nativeElement.classList.add("mat-button-toggle-animations-enabled"),this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){let e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){if(this.disabled)return;let e=this.isSingleSelector()?!0:!this._checked;if(e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){let i=this.buttonToggleGroup._buttonToggles.find(n=>n.tabIndex===0);i&&(i.tabIndex=-1),this.tabIndex=0}this.change.emit(new nr(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=G({type:r,selectors:[["mat-button-toggle"]],viewQuery:function(i,n){if(i&1&&Ut(mu,5),i&2){let o;gt(o=_t())&&(n._buttonElement=o.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:14,hostBindings:function(i,n){i&1&&O("focus",function(){return n.focus()}),i&2&&(Pe("aria-label",null)("aria-labelledby",null)("id",n.id)("name",null),ce("mat-button-toggle-standalone",!n.buttonToggleGroup)("mat-button-toggle-checked",n.checked)("mat-button-toggle-disabled",n.disabled)("mat-button-toggle-disabled-interactive",n.disabledInteractive)("mat-button-toggle-appearance-standard",n.appearance==="standard"))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",de],appearance:"appearance",checked:[2,"checked","checked",de],disabled:[2,"disabled","disabled",de],disabledInteractive:[2,"disabledInteractive","disabledInteractive",de]},outputs:{change:"change"},exportAs:["matButtonToggle"],ngContentSelectors:pu,decls:7,vars:13,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-checkbox-wrapper"],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"],["state","checked","aria-hidden","true","appearance","minimal",3,"disabled"]],template:function(i,n){if(i&1){let o=J();Ns(),m(0,"button",1,0),O("click",function(){return j(o),B(n._onButtonClick())}),I(2,fu,2,1,"div",2),m(3,"span",3),js(4),p()(),q(5,"span",4)(6,"span",5)}if(i&2){let o=Us(1);w("id",n.buttonId)("disabled",n.disabled&&!n.disabledInteractive||null),Pe("role",n.isSingleSelector()?"radio":"button")("tabindex",n.disabled&&!n.disabledInteractive?-1:n.tabIndex)("aria-pressed",n.isSingleSelector()?null:n.checked)("aria-checked",n.isSingleSelector()?n.checked:null)("name",n._getButtonName())("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby)("aria-disabled",n.disabled&&n.disabledInteractive?"true":null),g(2),Hr(n.buttonToggleGroup&&(!n.buttonToggleGroup.multiple&&!n.buttonToggleGroup.hideSingleSelectionIndicator||n.buttonToggleGroup.multiple&&!n.buttonToggleGroup.hideMultipleSelectionIndicator)?2:-1),g(4),w("matRippleTrigger",o)("matRippleDisabled",n.disableRipple||n.disabled)}},dependencies:[sa,ya],styles:[`.mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}@media(forced-colors: active){.mat-button-toggle-standalone,.mat-button-toggle-group{outline:solid 1px}}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large));border:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}@media(forced-colors: active){.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{outline:0}}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-legacy-button-toggle-selected-state-text-color)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle-checkbox-wrapper{display:inline-block;justify-content:flex-start;align-items:center;width:0;height:18px;line-height:18px;overflow:hidden;box-sizing:border-box;position:absolute;top:50%;left:16px;transform:translate3d(0, -50%, 0)}[dir=rtl] .mat-button-toggle-checkbox-wrapper{left:auto;right:16px}.mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:12px}[dir=rtl] .mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:auto;right:12px}.mat-button-toggle-checked .mat-button-toggle-checkbox-wrapper{width:18px}.mat-button-toggle-animations-enabled .mat-button-toggle-checkbox-wrapper{transition:width 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-checkbox-wrapper{transition:none}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{pointer-events:none;color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-legacy-button-toggle-disabled-state-text-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-disabled-interactive{pointer-events:auto}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color, var(--mat-sys-on-surface));background-color:var(--mat-standard-button-toggle-background-color, transparent);font-family:var(--mat-standard-button-toggle-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-standard-button-toggle-label-text-size, var(--mat-sys-label-large-size));line-height:var(--mat-standard-button-toggle-label-text-line-height, var(--mat-sys-label-large-line-height));font-weight:var(--mat-standard-button-toggle-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mat-standard-button-toggle-label-text-tracking, var(--mat-sys-label-large-tracking))}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-standard-button-toggle-selected-state-background-color, var(--mat-sys-secondary-container))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-standard-button-toggle-disabled-state-background-color, transparent)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-standard-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color, var(--mat-sys-on-surface))}.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-button-toggle-appearance-standard.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}@media(hover: none){.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height, 40px)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}@media(forced-colors: active){.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-animations-enabled .mat-button-toggle-button{transition:padding 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-button{transition:none}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:30px}[dir=rtl] .mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:0;padding-right:30px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard:not(.mat-button-toggle-vertical) .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large));border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard:not(.mat-button-toggle-vertical) .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large));border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large))}
`],encapsulation:2,changeDetection:0})}return r})(),El=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=_e({type:r});static \u0275inj=ge({imports:[Oe,la,rr,Oe]})}return r})();var yu=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=G({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(i,n){},styles:[`textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}
`],encapsulation:2,changeDetection:0})}return r})(),bu={passive:!0},Ml=(()=>{class r{_platform=S(Vt);_ngZone=S(nt);_renderer=S(yn).createRenderer(null,null);_styleLoader=S(Tn);_monitoredElements=new Map;constructor(){}monitor(e){if(!this._platform.isBrowser)return Ss;this._styleLoader.load(yu);let i=Qr(e),n=this._monitoredElements.get(i);if(n)return n.subject;let o=new ae,s="cdk-text-field-autofilled",a=c=>{c.animationName==="cdk-text-field-autofill-start"&&!i.classList.contains(s)?(i.classList.add(s),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!0}))):c.animationName==="cdk-text-field-autofill-end"&&i.classList.contains(s)&&(i.classList.remove(s),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!1})))},l=this._ngZone.runOutsideAngular(()=>(i.classList.add("cdk-text-field-autofill-monitored"),Zs(this._renderer,i,"animationstart",a,bu)));return this._monitoredElements.set(i,{subject:o,unlisten:l}),o}stopMonitoring(e){let i=Qr(e),n=this._monitoredElements.get(i);n&&(n.unlisten(),n.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}static \u0275fac=function(i){return new(i||r)};static \u0275prov=le({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Pl=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=_e({type:r});static \u0275inj=ge({})}return r})();var Ol=new se("MAT_INPUT_VALUE_ACCESSOR");var wu=["button","checkbox","file","hidden","image","radio","range","reset","submit"],Su=new se("MAT_INPUT_CONFIG"),ni=(()=>{class r{_elementRef=S(We);_platform=S(Vt);ngControl=S(_a,{optional:!0,self:!0});_autofillMonitor=S(Ml);_ngZone=S(nt);_formField=S(Zr,{optional:!0});_renderer=S(vi);_uid=S(Le).getId("mat-input-");_previousNativeValue;_inputValueAccessor;_signalBasedValueAccessor;_previousPlaceholder;_errorStateTracker;_config=S(Su,{optional:!0});_cleanupIosKeyup;_cleanupWebkitWheel;_formFieldDescribedBy;_isServer;_isNativeSelect;_isTextarea;_isInFormField;focused=!1;stateChanges=new ae;controlType="mat-input";autofilled=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=Pn(e),this.focused&&(this.focused=!1,this.stateChanges.next())}_disabled=!1;get id(){return this._id}set id(e){this._id=e||this._uid}_id;placeholder;name;get required(){return this._required??this.ngControl?.control?.hasValidator(ga.required)??!1}set required(e){this._required=Pn(e)}_required;get type(){return this._type}set type(e){let i=this._type;this._type=e||"text",this._validateType(),!this._isTextarea&&Jr().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._type!==i&&this._ensureWheelDefaultBehavior()}_type="text";get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}userAriaDescribedBy;get value(){return this._signalBasedValueAccessor?this._signalBasedValueAccessor.value():this._inputValueAccessor.value}set value(e){e!==this.value&&(this._signalBasedValueAccessor?this._signalBasedValueAccessor.value.set(e):this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Pn(e)}_readonly=!1;disabledInteractive;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}_neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(e=>Jr().has(e));constructor(){let e=S(Qt,{optional:!0}),i=S(va,{optional:!0}),n=S(ba),o=S(Ol,{optional:!0,self:!0}),s=this._elementRef.nativeElement,a=s.nodeName.toLowerCase();o?Es(o.value)?this._signalBasedValueAccessor=o:this._inputValueAccessor=o:this._inputValueAccessor=s,this._previousNativeValue=this.value,this.id=this.id,this._platform.IOS&&this._ngZone.runOutsideAngular(()=>{this._cleanupIosKeyup=this._renderer.listen(s,"keyup",this._iOSKeyupListener)}),this._errorStateTracker=new wa(n,this.ngControl,i,e,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=a==="select",this._isTextarea=a==="textarea",this._isInFormField=!!this._formField,this.disabledInteractive=this._config?.disabledInteractive||!1,this._isNativeSelect&&(this.controlType=s.multiple?"mat-native-select-multiple":"mat-native-select"),this._signalBasedValueAccessor&&Vs(()=>{this._signalBasedValueAccessor.value(),this.stateChanges.next()})}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._cleanupIosKeyup?.(),this._cleanupWebkitWheel?.()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){if(e!==this.focused){if(!this._isNativeSelect&&e&&this.disabled&&this.disabledInteractive){let i=this._elementRef.nativeElement;i.type==="number"?(i.type="text",i.setSelectionRange(0,0),i.type="number"):i.setSelectionRange(0,0)}this.focused=e,this.stateChanges.next()}}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let i=this._elementRef.nativeElement;this._previousPlaceholder=e,e?i.setAttribute("placeholder",e):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){wu.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}else return this.focused&&!this.disabled||!this.empty}setDescribedByIds(e){let i=this._elementRef.nativeElement,n=i.getAttribute("aria-describedby"),o;if(n){let s=this._formFieldDescribedBy||e;o=e.concat(n.split(" ").filter(a=>a&&!s.includes(a)))}else o=e;this._formFieldDescribedBy=e,o.length?i.setAttribute("aria-describedby",o.join(" ")):i.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}_iOSKeyupListener=e=>{let i=e.target;!i.value&&i.selectionStart===0&&i.selectionEnd===0&&(i.setSelectionRange(1,1),i.setSelectionRange(0,0))};_webkitBlinkWheelListener=()=>{};_ensureWheelDefaultBehavior(){this._cleanupWebkitWheel?.(),this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._cleanupWebkitWheel=this._renderer.listen(this._elementRef.nativeElement,"wheel",this._webkitBlinkWheelListener))}_getReadonlyAttribute(){return this._isNativeSelect?null:this.readonly||this.disabled&&this.disabledInteractive?"true":null}static \u0275fac=function(i){return new(i||r)};static \u0275dir=Ke({type:r,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:21,hostBindings:function(i,n){i&1&&O("focus",function(){return n._focusChanged(!0)})("blur",function(){return n._focusChanged(!1)})("input",function(){return n._onInput()}),i&2&&(bi("id",n.id)("disabled",n.disabled&&!n.disabledInteractive)("required",n.required),Pe("name",n.name||null)("readonly",n._getReadonlyAttribute())("aria-disabled",n.disabled&&n.disabledInteractive?"true":null)("aria-invalid",n.empty&&n.required?null:n.errorState)("aria-required",n.required)("id",n.id),ce("mat-input-server",n._isServer)("mat-mdc-form-field-textarea-control",n._isInFormField&&n._isTextarea)("mat-mdc-form-field-input-control",n._isInFormField)("mat-mdc-input-disabled-interactive",n.disabledInteractive)("mdc-text-field__input",n._isInFormField)("mat-mdc-native-select-inline",n._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly",disabledInteractive:[2,"disabledInteractive","disabledInteractive",de]},exportAs:["matInput"],features:[bn([{provide:Xr,useExisting:r}]),Vr]})}return r})(),ri=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=_e({type:r});static \u0275inj=ge({imports:[Oe,je,je,Pl,Oe]})}return r})();function xu(r,t){if(r&1){let e=J();m(0,"button",7),O("click",function(){j(e);let n=E();return B(n.clearSearch())}),m(1,"mat-icon"),v(2,"close"),p()()}}var or=class r{search=new Ge;searchQuery="";onSearch(){this.searchQuery.trim()&&this.search.emit(this.searchQuery.trim())}clearSearch(){this.searchQuery="",this.search.emit("")}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=G({type:r,selectors:[["app-search-bar"]],outputs:{search:"search"},decls:9,vars:2,consts:[[1,"search-container"],[1,"search-field-wrapper"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Buscar pel\xEDcula",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix",""],["matSuffix","","mat-icon-button","","aria-label","Limpiar b\xFAsqueda",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","type","button",1,"search-button",3,"click"],["matSuffix","","mat-icon-button","","aria-label","Limpiar b\xFAsqueda",3,"click"]],template:function(e,i){e&1&&(m(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),Ye("ngModelChange",function(o){return Je(i.searchQuery,o)||(i.searchQuery=o),o}),O("keyup.enter",function(){return i.onSearch()}),p(),m(4,"mat-icon",4),v(5,"search"),p(),I(6,xu,3,0,"button",5),p()(),m(7,"button",6),O("click",function(){return i.onSearch()}),v(8," Buscar "),p()()),e&2&&(g(3),Qe("ngModel",i.searchQuery),g(3),w("ngIf",i.searchQuery))},dependencies:[re,be,Yt,Wt,Kt,Jt,je,vt,Yr,ri,ni,Ce,xe,Se,Ne,we],styles:["[_ngcontent-%COMP%]:root{--searchbar-bg: #fff;--searchbar-text: #222;--searchbar-border: #ccc;--searchbar-btn-bg: #1976d2;--searchbar-btn-text: #fff}body.dark-mode[_ngcontent-%COMP%]{--searchbar-bg: #232323;--searchbar-text: #1565c0;--searchbar-border: #444;--searchbar-btn-bg: #1565c0;--searchbar-btn-text: #fafafa}.search-container[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;margin-bottom:24px;flex-wrap:wrap}.search-field-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;height:56px;flex:1;min-width:300px}.search-field[_ngcontent-%COMP%]{width:100%;height:100%}.search-field-wrapper[_ngcontent-%COMP%], .search-field[_ngcontent-%COMP%], input[matInput][_ngcontent-%COMP%]{background:var(--searchbar-bg)!important;color:var(--searchbar-text)!important}.mat-form-field-outline[_ngcontent-%COMP%], .mat-form-field-outline-thick[_ngcontent-%COMP%]{color:var(--searchbar-border)!important;border-color:var(--searchbar-border)!important}.mat-form-field-label[_ngcontent-%COMP%], .mat-icon[_ngcontent-%COMP%]{color:var(--searchbar-text)!important}input[matInput][_ngcontent-%COMP%]::placeholder{color:var(--searchbar-text)!important;opacity:1}input[matInput][_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--searchbar-text)!important}input[matInput][_ngcontent-%COMP%]:-ms-input-placeholder{color:var(--searchbar-text)!important}.search-button[_ngcontent-%COMP%]{height:56px;min-width:100px;padding:0 24px;font-size:16px;display:flex;align-items:center;justify-content:center}.poster-section[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.search-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:0px}.search-field-wrapper[_ngcontent-%COMP%]{width:100%;height:auto}.search-button[_ngcontent-%COMP%]{width:100%;height:44px;margin-top:0}}"]})};var oi=class r{constructor(t){this.platformId=t;this.loadThemePreference()}isDarkModeSubject=new ws(!1);isDarkMode$=this.isDarkModeSubject.asObservable();get isDarkMode(){return this.isDarkModeSubject.value}loadThemePreference(){if(te(this.platformId)){let e=localStorage.getItem("darkMode")==="true";this.isDarkModeSubject.next(e),this.applyTheme(e)}}toggleDarkMode(){let t=!this.isDarkModeSubject.value;this.setDarkMode(t)}setDarkMode(t){this.isDarkModeSubject.next(t),this.applyTheme(t),this.saveThemePreference(t)}applyTheme(t){te(this.platformId)&&(t?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"))}saveThemePreference(t){te(this.platformId)&&localStorage.setItem("darkMode",t.toString())}static \u0275fac=function(e){return new(e||r)(Bt(Fe))};static \u0275prov=le({token:r,factory:r.\u0275fac,providedIn:"root"})};var Tu=()=>[20];function Eu(r,t){if(r&1){let e=J();m(0,"div",24),O("click",function(){j(e);let n=E();return B(n.toggleSideMenu())}),p()}}function Mu(r,t){r&1&&(m(0,"div",29),q(1,"mat-spinner",30),m(2,"span"),v(3,"Cargando categor\xEDas..."),p()())}function Pu(r,t){if(r&1){let e=J();m(0,"button",31),O("click",function(){let n=j(e).$implicit,o=E(2);return B(o.navigateToGenre(n.id))}),v(1),p()}if(r&2){let e=t.$implicit;g(),ve(" ",e.name," ")}}function Ou(r,t){r&1&&(m(0,"span",32),v(1," No se encontraron categor\xEDas "),p())}function Au(r,t){if(r&1&&(m(0,"div",25),I(1,Mu,4,0,"div",26)(2,Pu,2,1,"button",27)(3,Ou,2,0,"span",28),p()),r&2){let e=E();g(),w("ngIf",e.loadingGenres),g(),w("ngForOf",e.genres),g(),w("ngIf",!e.loadingGenres&&e.genres.length===0)}}function Iu(r,t){r&1&&(m(0,"div",33),q(1,"mat-spinner"),m(2,"p"),v(3,"Cargando pel\xEDculas..."),p()())}function Du(r,t){r&1&&(m(0,"p"),v(1,"Intenta con otros t\xE9rminos de b\xFAsqueda"),p())}function Ru(r,t){if(r&1){let e=J();m(0,"button",37),O("click",function(){j(e);let n=E(2);return B(n.loadPopularMovies())}),v(1," Ver pel\xEDculas populares "),p()}}function Fu(r,t){if(r&1&&(m(0,"div",34)(1,"mat-icon"),v(2,"movie_off"),p(),m(3,"h3"),v(4,"No se encontraron pel\xEDculas"),p(),I(5,Du,2,0,"p",35)(6,Ru,2,0,"button",36),p()),r&2){let e=E();g(5),w("ngIf",e.searchQuery),g(),w("ngIf",e.searchQuery)}}function Lu(r,t){if(r&1){let e=J();m(0,"mat-chip",50),O("click",function(n){let o=j(e).$implicit,s=E(4);return B(s.viewGenre(o.id,n))}),v(1),p()}if(r&2){let e=t.$implicit;g(),ve(" ",e.name," ")}}function Nu(r,t){if(r&1&&(m(0,"div",48),I(1,Lu,2,1,"mat-chip",49),p()),r&2){let e=E().$implicit;g(),w("ngForOf",e.genres.slice(0,3))}}function ju(r,t){if(r&1){let e=J();m(0,"mat-card",40),O("click",function(){let n=j(e).$implicit,o=E(2);return B(o.viewMovieDetail(n.id))}),m(1,"img",41),O("error",function(n){j(e);let o=E(2);return B(o.onImageError(n))}),p(),m(2,"mat-card-content",42)(3,"h3",43),v(4),p(),m(5,"div",44)(6,"span",45),v(7),p(),m(8,"div",46)(9,"mat-icon"),v(10,"star"),p(),m(11,"span"),v(12),p()()(),I(13,Nu,2,1,"div",47),p()()}if(r&2){let e=t.$implicit,i=E(2);g(),w("src",e.poster_path?i.getImageUrl(e.poster_path):"assets/img/poster-not-found.png",ft)("alt",e.title),g(3),X(e.title),g(3),X(i.getYear(e.release_date)),g(5),X(e.vote_average.toFixed(1)),g(),w("ngIf",e.genres&&e.genres.length>0)}}function Bu(r,t){if(r&1&&(m(0,"div",38),I(1,ju,14,6,"mat-card",39),p()),r&2){let e=E();g(),w("ngForOf",e.movies)}}function Uu(r,t){if(r&1){let e=J();m(0,"mat-paginator",51),O("page",function(n){j(e);let o=E();return B(o.onPageChange(n))}),p()}if(r&2){let e=E();w("length",e.totalResults)("pageSize",20)("pageIndex",e.currentPage-1)("pageSizeOptions",zs(4,Tu))}}var sr=class r{constructor(t,e,i,n,o){this.tmdbService=t;this.router=e;this.snackBar=i;this.themeService=n;this.platformId=o}movies=[];loading=!1;currentPage=1;totalPages=0;totalResults=0;searchQuery="";categoriesOpen=!1;sideMenuOpen=!1;genres=[];loadingGenres=!1;toggleSideMenu(){this.sideMenuOpen=!this.sideMenuOpen}toggleCategories(){this.categoriesOpen=!this.categoriesOpen}navigateToLogin(){this.sideMenuOpen=!1,this.router.navigate(["/login"])}ngOnInit(){this.scrollToTop(),this.loadPopularMovies(),this.loadGenres()}scrollToTop(){te(this.platformId)&&window.scrollTo({top:0,behavior:"smooth"})}loadGenres(){this.loadingGenres=!0,this.tmdbService.getGenres().subscribe({next:t=>{this.genres=t.genres,this.loadingGenres=!1},error:t=>{console.error("Error loading genres:",t),this.loadingGenres=!1,this.snackBar.open("Error al cargar las categor\xEDas","Cerrar",{duration:3e3})}})}get isDarkMode(){return this.themeService.isDarkMode}toggleDarkMode(){this.themeService.toggleDarkMode()}loadPopularMovies(){this.loading=!0,this.searchQuery="",this.tmdbService.getPopularMoviesWithDetails(this.currentPage).subscribe({next:t=>{this.movies=t,this.tmdbService.getPopularMovies(this.currentPage).subscribe({next:e=>{this.totalPages=e.total_pages,this.totalResults=e.total_results,this.loading=!1}})},error:t=>{console.error("Error loading movies:",t),this.loading=!1,this.snackBar.open("Error al cargar las pel\xEDculas","Cerrar",{duration:3e3})}})}onSearch(t){if(this.searchQuery=t,this.currentPage=1,!t.trim()){this.loadPopularMovies();return}this.performSearch(t,this.currentPage)}performSearch(t,e){this.loading=!0,this.tmdbService.searchMoviesWithDetails(t,e).subscribe({next:i=>{this.movies=i,this.tmdbService.searchMovies(t,e).subscribe({next:n=>{this.totalPages=n.total_pages,this.totalResults=n.total_results,this.loading=!1}})},error:i=>{console.error("Error searching movies:",i),this.loading=!1,this.snackBar.open("Error al buscar pel\xEDculas","Cerrar",{duration:3e3})}})}onPageChange(t){this.currentPage=t.pageIndex+1,this.scrollToTop(),this.searchQuery?this.performSearch(this.searchQuery,this.currentPage):this.loadPopularMovies()}viewMovieDetail(t){this.router.navigate(["/movie",t])}getImageUrl(t){return this.tmdbService.getImageUrl(t)}onImageError(t){t.target.src="assets/no-image.jpg"}getYear(t){return new Date(t).getFullYear().toString()}viewGenre(t,e){e.stopPropagation(),this.router.navigate(["/genre",t])}navigateToGenre(t){this.sideMenuOpen=!1,this.router.navigate(["/genre",t])}static \u0275fac=function(e){return new(e||r)(N(Be),N(st),N(Ln),N(oi),N(Fe))};static \u0275cmp=G({type:r,selectors:[["app-home"]],decls:40,vars:11,consts:[["mat-icon-button","",1,"menu-toggle-btn",3,"click"],["class","side-menu-backdrop",3,"click",4,"ngIf"],[1,"side-menu"],["mat-icon-button","",1,"side-menu-close",3,"click"],["mat-button","",1,"side-menu-btn",3,"click"],[1,"side-menu-section"],["mat-button","",1,"side-menu-accordion",3,"click"],["class","side-menu-categories",4,"ngIf"],[1,"side-menu-divider"],[1,"side-menu-theme-section"],[1,"side-menu-theme-label"],[1,"theme-toggle-group",3,"change","value","hideSingleSelectionIndicator"],["value","light",1,"theme-toggle-btn"],["value","dark",1,"theme-toggle-btn"],[1,"home-layout"],[1,"home-container"],[1,"header"],["src","assets/img/filmnest-text-logo.png","alt","FilmNest",1,"title"],[3,"search"],[1,"content"],["class","loading-container",4,"ngIf"],["class","no-results",4,"ngIf"],["class","movies-grid",4,"ngIf"],["class","paginator",3,"length","pageSize","pageIndex","pageSizeOptions","page",4,"ngIf"],[1,"side-menu-backdrop",3,"click"],[1,"side-menu-categories"],["class","side-menu-loading",4,"ngIf"],["mat-button","","class","side-menu-genre-btn",3,"click",4,"ngFor","ngForOf"],["class","side-menu-empty",4,"ngIf"],[1,"side-menu-loading"],["diameter","20"],["mat-button","",1,"side-menu-genre-btn",3,"click"],[1,"side-menu-empty"],[1,"loading-container"],[1,"no-results"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"movies-grid"],["class","movie-card",3,"click",4,"ngFor","ngForOf"],[1,"movie-card",3,"click"],["mat-card-image","",1,"movie-poster",3,"error","src","alt"],[1,"movie-content"],[1,"movie-title"],[1,"movie-meta"],[1,"movie-year"],[1,"movie-rating"],["class","movie-genres",4,"ngIf"],[1,"movie-genres"],["class","genre-chip clickable",3,"click",4,"ngFor","ngForOf"],[1,"genre-chip","clickable",3,"click"],[1,"paginator",3,"page","length","pageSize","pageIndex","pageSizeOptions"]],template:function(e,i){e&1&&(m(0,"button",0),O("click",function(){return i.toggleSideMenu()}),m(1,"mat-icon"),v(2,"menu"),p()(),I(3,Eu,1,0,"div",1),m(4,"aside",2)(5,"nav")(6,"button",3),O("click",function(){return i.toggleSideMenu()}),m(7,"mat-icon"),v(8,"close"),p()(),m(9,"button",4),O("click",function(){return i.navigateToLogin()}),m(10,"mat-icon"),v(11,"login"),p(),v(12," Iniciar sesi\xF3n "),p(),m(13,"div",5)(14,"button",6),O("click",function(){return i.toggleCategories()}),v(15," Categor\xEDas "),m(16,"mat-icon"),v(17),p()(),I(18,Au,4,3,"div",7),p(),q(19,"div",8),m(20,"div",9)(21,"span",10),v(22,"Tema"),p(),m(23,"mat-button-toggle-group",11),O("change",function(){return i.toggleDarkMode()}),m(24,"mat-button-toggle",12)(25,"mat-icon"),v(26,"light_mode"),p()(),m(27,"mat-button-toggle",13)(28,"mat-icon"),v(29,"dark_mode"),p()()()()()(),m(30,"div",14)(31,"div",15)(32,"header",16),q(33,"img",17),p(),m(34,"app-search-bar",18),O("search",function(o){return i.onSearch(o)}),p(),m(35,"div",19),I(36,Iu,4,0,"div",20)(37,Fu,7,2,"div",21)(38,Bu,2,1,"div",22)(39,Uu,1,5,"mat-paginator",23),p()()()),e&2&&(g(3),w("ngIf",i.sideMenuOpen),g(),ce("open",i.sideMenuOpen),g(13),X(i.categoriesOpen?"expand_less":"expand_more"),g(),w("ngIf",i.categoriesOpen),g(5),w("value",i.isDarkMode?"dark":"light")("hideSingleSelectionIndicator",!0),g(13),w("ngIf",i.loading),g(),w("ngIf",!i.loading&&i.movies.length===0),g(),w("ngIf",!i.loading&&i.movies.length>0),g(),w("ngIf",!i.loading&&i.totalPages>1))},dependencies:[re,ot,be,Mn,na,ra,oa,Se,Ne,we,Ce,xe,Ht,qt,xa,Sa,Fn,Rn,El,Ro,rr,or],styles:[".home-layout[_ngcontent-%COMP%]{display:flex;min-height:100vh;background:var(--background-color)}.home-container[_ngcontent-%COMP%]{flex:1;width:100%;max-width:1200px;margin:0 auto;padding:20px}.menu-toggle-btn[_ngcontent-%COMP%]{position:fixed;top:24px;left:24px;z-index:1201;background:var(--card-bg);color:var(--text-color)!important;box-shadow:0 2px 8px #00000014;border-radius:50%;transition:background .3s,color .3s,opacity .3s}.menu-toggle-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--text-color)!important}.side-menu.open[_ngcontent-%COMP%] ~ .menu-toggle-btn[_ngcontent-%COMP%]{opacity:0;pointer-events:none}.side-menu[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100vh;width:260px;background:var(--card-bg);border-right:1px solid var(--card-border);box-shadow:2px 0 16px #0000001a;padding:32px 0 0;display:flex;flex-direction:column;align-items:stretch;z-index:1202;transform:translate(-110%);transition:transform .3s cubic-bezier(.4,0,.2,1);overflow:hidden}.side-menu.open[_ngcontent-%COMP%]{transform:translate(0)}.side-menu[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:0 16px;height:100%;overflow-y:auto;scrollbar-width:none;-ms-overflow-style:none}.side-menu[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.side-menu-close[_ngcontent-%COMP%]{align-self:flex-end;margin-bottom:8px;color:var(--text-color)!important;cursor:pointer}.side-menu-close[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--text-color)!important}.side-menu-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#00000059;z-index:1200}.side-menu-btn[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;color:var(--text-color)!important;font-weight:500;border-radius:8px;margin-bottom:8px;background:transparent!important}.side-menu-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;color:var(--text-color)!important}.side-menu-section[_ngcontent-%COMP%]{margin-top:16px}.side-menu-accordion[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;color:var(--text-color)!important;font-weight:500;border-radius:8px;display:flex;align-items:center;background:transparent!important;padding:0}.side-menu-categories[_ngcontent-%COMP%]{padding-left:32px;margin-top:6px;color:var(--detail-meta);font-size:.95rem}.side-menu-empty[_ngcontent-%COMP%]{color:var(--detail-meta);font-style:italic}.side-menu-loading[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:var(--detail-meta);font-size:.9rem}.side-menu-loading[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0}.side-menu-genre-btn[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;color:var(--text-color)!important;font-size:.9rem;padding:8px 12px;margin-bottom:4px;border-radius:6px;background:transparent!important;transition:background .2s ease}.side-menu-genre-btn[_ngcontent-%COMP%]:hover{background:var(--card-border)!important}.side-menu-genre-btn[_ngcontent-%COMP%]:last-child{margin-bottom:0}.side-menu-divider[_ngcontent-%COMP%]{height:1px;background:var(--card-border);margin:24px 0;opacity:.6}.side-menu-theme-section[_ngcontent-%COMP%]{margin-top:auto;padding-top:16px;flex-shrink:0}.side-menu-theme-label[_ngcontent-%COMP%]{display:block;color:var(--text-color);font-weight:500;margin-bottom:8px;font-size:.85rem}.theme-toggle-group[_ngcontent-%COMP%]{width:50%;height:50%;border-radius:6px;overflow:hidden;border:1px solid var(--card-border)}.theme-toggle-btn[_ngcontent-%COMP%]{flex:1;color:var(--text-color)!important;background:var(--card-bg)!important;border:none!important;padding:4px 8px;display:flex;align-items:center;justify-content:center}.theme-toggle-btn.mat-button-toggle-checked[_ngcontent-%COMP%]{background:var(--primary-color)!important;color:#fff!important}.theme-toggle-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.1rem;width:1.1rem;height:1.1rem}@media (min-width: 900px){.side-menu[_ngcontent-%COMP%]{width:280px}}.header[_ngcontent-%COMP%]{text-align:center}.title[_ngcontent-%COMP%]{max-width:100%;height:auto;width:auto;object-fit:contain}.content[_ngcontent-%COMP%]{min-height:400px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.no-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.no-results[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:#ccc;margin-bottom:16px}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:var(--text-color)}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;color:#666}.movies-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:24px;margin-bottom:32px}.movie-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s ease,box-shadow .2s ease;border-radius:12px;overflow:hidden;background:var(--card-bg);border:1px solid var(--card-border)}.movie-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #00000026}.movie-poster[_ngcontent-%COMP%]{height:400px;object-fit:cover;width:100%}.movie-content[_ngcontent-%COMP%]{padding:16px}.movie-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;margin:0 0 8px;color:var(--text-color);line-height:1.3}.movie-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.movie-year[_ngcontent-%COMP%]{color:#666;font-size:.9rem}.movie-rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#f39c12;font-weight:500}.movie-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem}body.dark-mode[_ngcontent-%COMP%]   .movie-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f39c12!important}.movie-genres[_ngcontent-%COMP%]{display:flex;gap:6px;margin-bottom:12px;flex-wrap:wrap}.genre-chip[_ngcontent-%COMP%]{font-size:.75rem;height:24px;background:var(--detail-genre-bg);color:var(--detail-genre-color)}.paginator[_ngcontent-%COMP%]{margin-top:32px;background:var(--paginator-bg);color:var(--paginator-color);border-radius:8px;padding:8px 16px}@media (max-width: 1024px){.movies-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.home-container[_ngcontent-%COMP%]{padding:16px}.movies-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:16px}.movie-poster[_ngcontent-%COMP%]{height:350px}}@media (max-width: 480px){.movies-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.movie-poster[_ngcontent-%COMP%]{height:400px}}"]})};var Rl=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=_e({type:r});static \u0275inj=ge({imports:[Oe]})}return r})();function zu(r,t){}var ct=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var Bo=(()=>{class r extends ua{_elementRef=S(We);_focusTrapFactory=S(ta);_config;_interactivityChecker=S(ea);_ngZone=S(nt);_overlayRef=S(to);_focusMonitor=S(kn);_renderer=S(vi);_changeDetectorRef=S(Si);_injector=S(_i);_platform=S(Vt);_document=S(wn,{optional:!0});_portalOutlet;_focusTrapped=new ae;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=S(ct,{optional:!0})||new ct,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let i=this._ariaLabelledByQueue.indexOf(e);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}attachDomPortal=e=>{this._portalOutlet.hasAttached();let i=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),i};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let n=()=>{o(),s(),e.removeAttribute("tabindex")},o=this._renderer.listen(e,"blur",n),s=this._renderer.listen(e,"mousedown",n)})),e.focus(i)}_focusByCssSelector(e,i){let n=this._elementRef.nativeElement.querySelector(e);n&&this._forceFocus(n,i)}_trapFocus(e){this._isDestroyed||Os(()=>{let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus(e);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(e)||this._focusDialogContainer(e);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',e);break;default:this._focusByCssSelector(this._config.autoFocus,e);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,i=null;if(typeof e=="string"?i=this._document.querySelector(e):typeof e=="boolean"?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&typeof i.focus=="function"){let n=xn(),o=this._elementRef.nativeElement;(!n||n===this._document.body||n===o||o.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(e){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus(e)}_containsFocus(){let e=this._elementRef.nativeElement,i=xn();return e===i||e.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=xn()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=G({type:r,selectors:[["cdk-dialog-container"]],viewQuery:function(i,n){if(i&1&&Ut(ki,7),i&2){let o;gt(o=_t())&&(n._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,n){i&2&&Pe("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[yi],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,n){i&1&&I(0,zu,0,0,"ng-template",0)},dependencies:[ki],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return r})(),Ni=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new ae;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(t,e){this.overlayRef=t,this.config=e,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!En(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(t,e){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}},$u=new se("DialogScrollStrategy",{providedIn:"root",factory:()=>{let r=S(Gt);return()=>r.scrollStrategies.block()}}),Vu=new se("DialogData"),qu=new se("DefaultDialogConfig");var Uo=(()=>{class r{_overlay=S(Gt);_injector=S(_i);_defaultOptions=S(qu,{optional:!0});_parentDialog=S(r,{optional:!0,skipSelf:!0});_overlayContainer=S(ma);_idGenerator=S(Le);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new ae;_afterOpenedAtThisLevel=new ae;_ariaHiddenElements=new Map;_scrollStrategy=S($u);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=gn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(vn(void 0)));constructor(){}open(e,i){let n=this._defaultOptions||new ct;i=fe(fe({},n),i),i.id=i.id||this._idGenerator.getId("cdk-dialog-"),i.id&&this.getDialogById(i.id);let o=this._getOverlayConfig(i),s=this._overlay.create(o),a=new Ni(s,i),l=this._attachContainer(s,a,i);if(a.containerInstance=l,!this.openDialogs.length){let c=this._overlayContainer.getContainerElement();l._focusTrapped?l._focusTrapped.pipe(jt(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(c)}):this._hideNonDialogContentFromAssistiveTechnology(c)}return this._attachDialogContent(e,a,l,i),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){jo(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){jo(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),jo(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let i=new ha({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,n){let o=n.injector||n.viewContainerRef?.injector,s=[{provide:ct,useValue:n},{provide:Ni,useValue:i},{provide:to,useValue:e}],a;n.container?typeof n.container=="function"?a=n.container:(a=n.container.type,s.push(...n.container.providers(n))):a=Bo;let l=new eo(a,n.viewContainerRef,_i.create({parent:o||this._injector,providers:s}));return e.attach(l).instance}_attachDialogContent(e,i,n,o){if(e instanceof Is){let s=this._createInjector(o,i,n,void 0),a={$implicit:o.data,dialogRef:i};o.templateContext&&(a=fe(fe({},a),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),n.attachTemplatePortal(new da(e,null,a,s))}else{let s=this._createInjector(o,i,n,this._injector),a=n.attachComponentPortal(new eo(e,o.viewContainerRef,s));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(e,i,n,o){let s=e.injector||e.viewContainerRef?.injector,a=[{provide:Vu,useValue:e.data},{provide:Ni,useValue:i}];return e.providers&&(typeof e.providers=="function"?a.push(...e.providers(i,e,n)):a.push(...e.providers)),e.direction&&(!s||!s.get(xi,null,{optional:!0}))&&a.push({provide:xi,useValue:{value:e.direction,change:xs()}}),_i.create({parent:s||o,providers:a})}_removeOpenDialog(e,i){let n=this.openDialogs.indexOf(e);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(e){if(e.parentElement){let i=e.parentElement.children;for(let n=i.length-1;n>-1;n--){let o=i[n];o!==e&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(i){return new(i||r)};static \u0275prov=le({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function jo(r,t){let e=r.length;for(;e--;)t(r[e])}var Ll=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=_e({type:r});static \u0275inj=ge({providers:[Uo],imports:[On,Ti,ia,Ti]})}return r})();function Hu(r,t){}var Bi=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration},zo="mdc-dialog--open",Nl="mdc-dialog--opening",jl="mdc-dialog--closing",Gu=150,Wu=75,zl=(()=>{class r extends Bo{_animationMode=S(pt,{optional:!0});_animationStateChanged=new Ge;_animationsEnabled=this._animationMode!=="NoopAnimations";_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?Ul(this._config.enterAnimationDuration)??Gu:0;_exitAnimationDuration=this._animationsEnabled?Ul(this._config.exitAnimationDuration)??Wu:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Bl,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Nl,zo)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(zo),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(zo),this._animationsEnabled?(this._hostElement.style.setProperty(Bl,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(jl)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Nl,jl)}_waitForAnimationToComplete(e,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let i=super.attachComponentPortal(e);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static \u0275fac=(()=>{let e;return function(n){return(e||(e=qr(r)))(n||r)}})();static \u0275cmp=G({type:r,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,n){i&2&&(bi("id",n._config.id),Pe("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),ce("_mat-animation-noopable",!n._animationsEnabled)("mat-mdc-dialog-container-with-actions",n._actionSectionCount>0))},features:[yi],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,n){i&1&&(m(0,"div",0)(1,"div",1),I(2,Hu,0,0,"ng-template",2),p()())},dependencies:[ki],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return r})(),Bl="--mat-dialog-transition-duration";function Ul(r){return r==null?null:typeof r=="number"?r:r.endsWith("ms")?Cn(r.substring(0,r.length-2)):r.endsWith("s")?Cn(r.substring(0,r.length-1))*1e3:r==="0"?0:null}var ji=function(r){return r[r.OPEN=0]="OPEN",r[r.CLOSING=1]="CLOSING",r[r.CLOSED=2]="CLOSED",r}(ji||{}),Ct=class{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new ae;_beforeClosed=new ae;_result;_closeFallbackTimeout;_state=ji.OPEN;_closeInteractionType;constructor(t,e,i){this._ref=t,this._containerInstance=i,this.disableClose=e.disableClose,this.id=t.id,t.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(gi(n=>n.state==="opened"),jt(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(gi(n=>n.state==="closed"),jt(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Cs(this.backdropClick(),this.keydownEvents().pipe(gi(n=>n.keyCode===27&&!this.disableClose&&!En(n)))).subscribe(n=>{this.disableClose||(n.preventDefault(),$l(this,n.type==="keydown"?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(gi(e=>e.state==="closing"),jt(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=ji.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=ji.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function $l(r,t,e){return r._closeInteractionType=t,r.close(e)}var lr=new se("MatMdcDialogData"),Vl=new se("mat-mdc-dialog-default-options"),ql=new se("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let r=S(Gt);return()=>r.scrollStrategies.block()}});var Ui=(()=>{class r{_overlay=S(Gt);_defaultOptions=S(Vl,{optional:!0});_scrollStrategy=S(ql);_parentDialog=S(r,{optional:!0,skipSelf:!0});_idGenerator=S(Le);_dialog=S(Uo);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new ae;_afterOpenedAtThisLevel=new ae;dialogConfigClass=Bi;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=gn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(vn(void 0)));constructor(){this._dialogRefConstructor=Ct,this._dialogContainerType=zl,this._dialogDataToken=lr}open(e,i){let n;i=fe(fe({},this._defaultOptions||new Bi),i),i.id=i.id||this._idGenerator.getId("mat-mdc-dialog-"),i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(e,ys(fe({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:ct,useValue:i}]},templateContext:()=>({dialogRef:n}),providers:(s,a,l)=>(n=new this._dialogRefConstructor(s,i,l),n.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:n}])}));return n.componentRef=o.componentRef,n.componentInstance=o.componentInstance,this.openDialogs.push(n),this.afterOpened.next(n),n.afterClosed().subscribe(()=>{let s=this.openDialogs.indexOf(n);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),n}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static \u0275fac=function(i){return new(i||r)};static \u0275prov=le({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Ku=(()=>{class r{_dialogRef=S(Ct,{optional:!0});_elementRef=S(We);_dialog=S(Ui);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=Qu(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(i){return new(i||r)};static \u0275dir=Ke({type:r})}return r})(),$o=(()=>{class r extends Ku{id=S(Le).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=qr(r)))(n||r)}})();static \u0275dir=Ke({type:r,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,n){i&2&&bi("id",n.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[yi]})}return r})(),Vo=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275dir=Ke({type:r,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[Rs([ca])]})}return r})();function Qu(r,t){let e=r.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?t.find(i=>i.id===e.id):null}var zi=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=_e({type:r});static \u0275inj=ge({providers:[Ui],imports:[Ll,On,Ti,Oe,Oe]})}return r})();var cr=class r{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustResourceUrl(t)}static \u0275fac=function(e){return new(e||r)(N(Qs,16))};static \u0275pipe=Ds({name:"safe",type:r,pure:!0})};function Ju(r,t){r&1&&(m(0,"div",8),q(1,"mat-spinner"),m(2,"p"),v(3,"Cargando trailer..."),p()())}function Yu(r,t){r&1&&(m(0,"div",9)(1,"mat-icon"),v(2,"error"),p(),m(3,"h3"),v(4,"Trailer no disponible"),p(),m(5,"p"),v(6,"No se encontr\xF3 un trailer para esta pel\xEDcula."),p()())}function Xu(r,t){if(r&1&&(m(0,"div",10),q(1,"iframe",11),wi(2,"safe"),p()),r&2){let e=E();g(),w("src",$s(2,1,e.getEmbedUrl()),As)}}var dr=class r{constructor(t,e,i){this.dialogRef=t;this.data=e;this.tmdbService=i}trailerUrl=null;loading=!0;error=!1;ngOnInit(){this.loadTrailer()}loadTrailer(){this.tmdbService.getMovieTrailerUrl(this.data.movieId).subscribe({next:t=>{this.trailerUrl=t,this.loading=!1,t||(this.error=!0)},error:()=>{this.loading=!1,this.error=!0}})}getEmbedUrl(){return this.trailerUrl?`https://www.youtube.com/embed/${this.trailerUrl.split("v=")[1]}`:""}close(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||r)(N(Ct),N(lr),N(Be))};static \u0275cmp=G({type:r,selectors:[["app-trailer-modal"]],decls:11,vars:4,consts:[[1,"trailer-modal-container"],[1,"modal-header"],["mat-dialog-title",""],["mat-icon-button","","aria-label","Cerrar",1,"close-button",3,"click"],["mat-dialog-content","",1,"modal-content"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","video-container",4,"ngIf"],[1,"loading-container"],[1,"error-container"],[1,"video-container"],["frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",1,"youtube-iframe",3,"src"]],template:function(e,i){e&1&&(m(0,"div",0)(1,"div",1)(2,"h2",2),v(3),p(),m(4,"button",3),O("click",function(){return i.close()}),m(5,"mat-icon"),v(6,"close"),p()()(),m(7,"div",4),I(8,Ju,4,0,"div",5)(9,Yu,7,0,"div",6)(10,Xu,3,3,"div",7),p()()),e&2&&(g(3),ve("Trailer: ",i.data.movieTitle,""),g(5),w("ngIf",i.loading),g(),w("ngIf",i.error),g(),w("ngIf",!i.loading&&!i.error&&i.trailerUrl))},dependencies:[re,be,zi,$o,Vo,Se,we,Ce,xe,Ht,qt,cr],styles:[".trailer-modal-container[_ngcontent-%COMP%]{max-width:90vw;max-height:90vh;width:800px;background:var(--card-bg);overflow:hidden}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:4px 8px;border-bottom:1px solid var(--card-border);background:var(--card-bg)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:500;color:var(--text-color)}.close-button[_ngcontent-%COMP%]{color:var(--text-color)}.modal-content[_ngcontent-%COMP%]{padding:0;max-height:70vh;overflow:hidden}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:var(--text-color)}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem;color:#f44336;margin-bottom:16px}.error-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:var(--text-color)}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-color);opacity:.7}.video-container[_ngcontent-%COMP%]{position:relative;width:100%;height:0;padding-bottom:56.25%;background:#000}.youtube-iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;border:none}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:16px 24px;border-top:1px solid var(--card-border);background:var(--card-bg)}.close-btn[_ngcontent-%COMP%]{color:var(--text-color)}@media (max-width: 768px){.trailer-modal-container[_ngcontent-%COMP%]{width:95vw;max-height:95vh}.modal-header[_ngcontent-%COMP%]{padding:4px 8px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.modal-actions[_ngcontent-%COMP%]{padding:12px 20px}}@media (max-width: 480px){.trailer-modal-container[_ngcontent-%COMP%]{width:98vw}.modal-header[_ngcontent-%COMP%]{padding:6px 8px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.modal-actions[_ngcontent-%COMP%]{padding:8px 16px}}"]})};var Zu=r=>["/cast",r],eh=r=>["/movie",r];function th(r,t){r&1&&(m(0,"div",4),q(1,"mat-spinner"),m(2,"p"),v(3,"Cargando detalles de la pel\xEDcula..."),p()())}function ih(r,t){if(r&1&&(m(0,"h2",24),v(1),p()),r&2){let e=E(2);g(),X(e.movie.tagline)}}function nh(r,t){r&1&&(m(0,"span",29),v(1,"/"),p())}function rh(r,t){if(r&1&&(Fs(0),q(1,"img",27),I(2,nh,2,0,"span",28),Ls()),r&2){let e=t.$implicit,i=t.last,n=E(3);g(),w("src",n.getCountryFlagUrl(e.iso_3166_1),ft)("alt",e.name)("title",e.name),g(),w("ngIf",!i)}}function oh(r,t){if(r&1&&(m(0,"div",14)(1,"span",25),I(2,rh,3,4,"ng-container",26),p()()),r&2){let e=E(2);g(2),w("ngForOf",e.movie.production_countries)}}function sh(r,t){if(r&1){let e=J();m(0,"mat-chip",32),O("click",function(){let n=j(e).$implicit,o=E(3);return B(o.viewGenre(n.id))}),v(1),p()}if(r&2){let e=t.$implicit;g(),ve(" ",e.name," ")}}function ah(r,t){if(r&1&&(m(0,"div",30),I(1,sh,2,1,"mat-chip",31),p()),r&2){let e=E(2);g(),w("ngForOf",e.movie.genres)}}function lh(r,t){if(r&1&&(m(0,"div",37)(1,"strong"),v(2,"Presupuesto: "),p(),v(3),p()),r&2){let e=E(3);g(3),ve("",e.formatCurrency(e.movie.budget)," ")}}function ch(r,t){if(r&1&&(m(0,"div",37)(1,"strong"),v(2,"Recaudaci\xF3n: "),p(),v(3),p()),r&2){let e=E(3);g(3),ve("",e.formatCurrency(e.movie.revenue)," ")}}function dh(r,t){if(r&1&&(m(0,"div",38)(1,"div",39)(2,"div",40),q(3,"div",41)(4,"div",42),p(),m(5,"div",43)(6,"span",44),v(7),p(),m(8,"span",45),v(9),p()()()()),r&2){let e=E(3);g(3),rt("width",e.getBudgetPercentage(e.movie.budget,e.movie.revenue),"%"),g(),rt("width",e.getRevenuePercentage(e.movie.budget,e.movie.revenue),"%"),g(3),ve("Presupuesto (",e.getBudgetPercentage(e.movie.budget,e.movie.revenue),"%)"),g(2),ve("Recaudaci\xF3n (",e.getRevenuePercentage(e.movie.budget,e.movie.revenue),"%)")}}function uh(r,t){if(r&1&&(m(0,"div",33)(1,"h3",34),v(2,"Informaci\xF3n financiera"),p(),I(3,lh,4,1,"div",35)(4,ch,4,1,"div",35)(5,dh,10,6,"div",36),p()),r&2){let e=E(2);g(3),w("ngIf",e.movie.budget),g(),w("ngIf",e.movie.revenue),g(),w("ngIf",e.movie.budget&&e.movie.revenue)}}function hh(r,t){if(r&1&&(m(0,"div",51),q(1,"img",52),m(2,"div",53)(3,"span",54),v(4),p(),m(5,"span",55),v(6),p()()()),r&2){let e=t.$implicit;w("routerLink",Wr(5,Zu,e.id)),g(),w("src",e.profile_path?"https://image.tmdb.org/t/p/w185"+e.profile_path:"assets/img/cast-not-found.png",ft)("alt",e.name),g(3),X(e.name),g(2),X(e.character)}}function mh(r,t){if(r&1){let e=J();m(0,"div",56)(1,"button",57),O("click",function(){j(e);let n=E(3);return B(n.prevCastPage())}),m(2,"mat-icon"),v(3,"chevron_left"),p()(),m(4,"span",58),v(5),p(),m(6,"button",57),O("click",function(){j(e);let n=E(3);return B(n.nextCastPage())}),m(7,"mat-icon"),v(8,"chevron_right"),p()()()}if(r&2){let e=E(3);g(),w("disabled",e.castPage===0),g(4),Gr("",e.castPage+1," / ",e.castTotalPages,""),g(),w("disabled",(e.castPage+1)*e.castPageSize>=e.actors.length)}}function ph(r,t){if(r&1&&(m(0,"div",46)(1,"h3",47),v(2,"Reparto"),p(),m(3,"div",48),I(4,hh,7,7,"div",49),p(),I(5,mh,9,4,"div",50),p()),r&2){let e=E(2);g(4),w("ngForOf",e.visibleActors),g(),w("ngIf",e.actors.length>5)}}function fh(r,t){if(r&1&&(m(0,"div",51),q(1,"img",52),m(2,"div",53)(3,"span",54),v(4),p(),m(5,"span",55),v(6),wi(7,"date"),p()()()),r&2){let e=t.$implicit,i=E(3);w("routerLink",Wr(8,eh,e.id)),g(),w("src",e.poster_path?i.getImageUrl(e.poster_path):"assets/img/poster-not-found.png",ft)("alt",e.title),g(3),X(e.title),g(2),X(Kr(7,5,e.release_date,"yyyy"))}}function gh(r,t){if(r&1){let e=J();m(0,"div",56)(1,"button",57),O("click",function(){j(e);let n=E(3);return B(n.prevRecommendationsPage())}),m(2,"mat-icon"),v(3,"chevron_left"),p()(),m(4,"span",58),v(5),p(),m(6,"button",57),O("click",function(){j(e);let n=E(3);return B(n.nextRecommendationsPage())}),m(7,"mat-icon"),v(8,"chevron_right"),p()()()}if(r&2){let e=E(3);g(),w("disabled",e.recommendationsPage===0),g(4),Gr("",e.recommendationsPage+1," / ",e.recommendationsTotalPages,""),g(),w("disabled",(e.recommendationsPage+1)*e.recommendationsPageSize>=e.recommendations.length)}}function _h(r,t){if(r&1&&(m(0,"div",59)(1,"h3",47),v(2,"Te puede interesar..."),p(),m(3,"div",48),I(4,fh,8,10,"div",49),p(),I(5,gh,9,4,"div",50),p()),r&2){let e=E(2);g(4),w("ngForOf",e.visibleRecommendations),g(),w("ngIf",e.recommendations.length>e.recommendationsPageSize)}}function vh(r,t){if(r&1){let e=J();m(0,"div",5)(1,"button",6),O("click",function(){j(e);let n=E();return B(n.goBack())}),m(2,"mat-icon"),v(3,"arrow_back"),p()(),m(4,"div",7)(5,"div",8)(6,"img",9),O("error",function(n){j(e);let o=E();return B(o.onImageError(n))}),p()(),m(7,"div",10)(8,"h1",11),v(9),p(),I(10,ih,2,1,"h2",12),m(11,"div",13)(12,"div",14)(13,"mat-icon"),v(14,"calendar_today"),p(),m(15,"span"),v(16),wi(17,"date"),p()(),m(18,"div",14)(19,"mat-icon"),v(20,"schedule"),p(),m(21,"span"),v(22),p()(),m(23,"div",14)(24,"mat-icon"),v(25,"star"),p(),m(26,"span"),v(27),p()(),I(28,oh,3,1,"div",15),p(),I(29,ah,2,1,"div",16),m(30,"div",17)(31,"button",18),O("click",function(){j(e);let n=E();return B(n.openTrailerModal())}),m(32,"mat-icon"),v(33,"play_circle"),p(),v(34," Ver Trailer "),p()(),m(35,"div",19)(36,"h3"),v(37,"Sinopsis"),p(),m(38,"p",20),v(39),p()(),I(40,uh,6,3,"div",21)(41,ph,6,2,"div",22)(42,_h,6,2,"div",23),p()()()}if(r&2){let e=E();g(6),w("src",e.movie.poster_path?e.getImageUrl(e.movie.poster_path):"assets/img/poster-not-found.png",ft)("alt",e.movie.title),g(3),X(e.movie.title),g(),w("ngIf",e.movie.tagline),g(6),X(Kr(17,13,e.movie.release_date,"dd/MM/yyyy")),g(6),ve("",e.movie.runtime," min"),g(5),ve("",e.movie.vote_average.toFixed(1),"/10"),g(),w("ngIf",e.movie.production_countries&&e.movie.production_countries.length>0),g(),w("ngIf",e.movie.genres&&e.movie.genres.length>0),g(10),X(e.movie.overview||"Sinopsis no disponible"),g(),w("ngIf",e.movie.budget||e.movie.revenue),g(),w("ngIf",e.actors.length>0),g(),w("ngIf",e.recommendations.length>0)}}function yh(r,t){if(r&1){let e=J();m(0,"div",60)(1,"mat-icon"),v(2,"error"),p(),m(3,"h3"),v(4,"Pel\xEDcula no encontrada"),p(),m(5,"p"),v(6,"La pel\xEDcula que buscas no existe o ha sido eliminada."),p(),m(7,"button",61),O("click",function(){j(e);let n=E();return B(n.goBack())}),v(8," Volver al cat\xE1logo "),p()()}}var ur=class r{constructor(t,e,i,n,o,s,a){this.route=t;this.router=e;this.tmdbService=i;this.snackBar=n;this.dialog=o;this.location=s;this.platformId=a;te(this.platformId)&&(this.updateCastPageSize(),this.updateRecommendationsPageSize(),window.addEventListener("resize",()=>{this.updateCastPageSize(),this.updateRecommendationsPageSize()}))}movie=null;loading=!1;actors=[];castPage=0;castPageSize=5;randomBackdrop="";recommendations=[];recommendationsPage=0;recommendationsPageSize=3;updateCastPageSize(){te(this.platformId)&&(this.castPageSize=window.innerWidth<=480?3:5,this.castPage*this.castPageSize>=this.actors.length&&(this.castPage=0))}updateRecommendationsPageSize(){te(this.platformId)&&(this.recommendationsPageSize=window.innerWidth<=480?1:3,this.recommendationsPage*this.recommendationsPageSize>=this.recommendations.length&&(this.recommendationsPage=0))}ngOnInit(){this.scrollToTop(),this.route.params.subscribe(t=>{let e=+t.id;e&&(this.loadMovieDetail(e),this.loadMovieCast(e),this.loadMovieRecommendations(e))})}scrollToTop(){te(this.platformId)&&window.scrollTo({top:0,behavior:"smooth"})}loadMovieDetail(t){this.loading=!0,this.tmdbService.getMovieDetail(t).subscribe({next:e=>{this.movie=e,this.loading=!1,this.loadMovieImages(t)},error:e=>{console.error("Error loading movie detail:",e),this.loading=!1,this.snackBar.open("Error al cargar los detalles de la pel\xEDcula","Cerrar",{duration:3e3})}})}loadMovieImages(t){this.tmdbService.getMovieImages(t).subscribe({next:e=>{this.selectRandomBackdrop(e)},error:e=>{console.error("Error loading movie images:",e),this.movie?.backdrop_path&&(this.randomBackdrop=this.getBackdropUrl(this.movie.backdrop_path))}})}selectRandomBackdrop(t){if(t.backdrops&&t.backdrops.length>0){let e=t.backdrops[Math.floor(Math.random()*t.backdrops.length)];this.randomBackdrop=this.tmdbService.getHighQualityImageUrl(e.file_path),this.updateBackdropBackground()}else this.useOriginalBackdrop()}useOriginalBackdrop(){this.movie?.backdrop_path&&(this.randomBackdrop=this.getBackdropUrl(this.movie.backdrop_path),this.updateBackdropBackground())}updateBackdropBackground(){if(te(this.platformId)){let t=this.randomBackdrop||this.getBackdropUrl(this.movie?.backdrop_path||"");document.documentElement.style.setProperty("--backdrop-image",`url(${t})`)}}loadMovieCast(t){this.tmdbService.getMovieCast(t).subscribe({next:e=>{this.actors=e},error:e=>{console.error("Error loading cast:",e)}})}loadMovieRecommendations(t){this.tmdbService.getMovieRecommendations(t).subscribe({next:e=>{this.recommendations=e.results||[]},error:e=>{console.error("Error loading recommendations:",e)}})}goBack(){this.location.back()}getImageUrl(t){return this.tmdbService.getImageUrl(t)}getBackdropUrl(t){return this.tmdbService.getImageUrl(t,"w1280")}onImageError(t){t.target.src="assets/no-image.jpg"}formatCurrency(t){return t===0?"No disponible":new Intl.NumberFormat("es-ES",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}getRevenueRatio(t,e){return Math.min(Math.round(e/t*100),500)}getBudgetPercentage(t,e){let i=t+e;return Math.round(t/i*100)}getRevenuePercentage(t,e){let i=t+e;return Math.round(e/i*100)}openTrailerModal(){this.movie&&this.dialog.open(dr,{data:{movieId:this.movie.id,movieTitle:this.movie.title},maxWidth:"90vw",maxHeight:"90vh",width:"800px"})}getCountryFlag(t){let e=t.toUpperCase().split("").map(i=>127397+i.charCodeAt(0));return String.fromCodePoint(...e)}getCountryFlagUrl(t){return`https://flagsapi.com/${t.toUpperCase()}/flat/32.png`}get visibleActors(){let t=this.castPage*this.castPageSize;return this.actors.slice(t,t+this.castPageSize)}prevCastPage(){this.castPage>0&&this.castPage--}nextCastPage(){(this.castPage+1)*this.castPageSize<this.actors.length&&this.castPage++}get castTotalPages(){return Math.ceil(this.actors.length/this.castPageSize)}get visibleRecommendations(){let t=this.recommendationsPage*this.recommendationsPageSize;return this.recommendations.slice(t,t+this.recommendationsPageSize)}get recommendationsTotalPages(){return Math.ceil(this.recommendations.length/this.recommendationsPageSize)}prevRecommendationsPage(){this.recommendationsPage>0&&this.recommendationsPage--}nextRecommendationsPage(){(this.recommendationsPage+1)*this.recommendationsPageSize<this.recommendations.length&&this.recommendationsPage++}viewGenre(t){this.router.navigate(["/genre",t])}ngOnDestroy(){te(this.platformId)&&window.removeEventListener("resize",()=>{this.updateCastPageSize(),this.updateRecommendationsPageSize()})}static \u0275fac=function(e){return new(e||r)(N(Sn),N(st),N(Be),N(Ln),N(Ui),N(zt),N(Fe))};static \u0275cmp=G({type:r,selectors:[["app-movie-detail"]],decls:4,vars:3,consts:[[1,"movie-detail-container"],["class","loading-container",4,"ngIf"],["class","movie-content",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"loading-container"],[1,"movie-content"],["mat-icon-button","","aria-label","Volver",1,"back-button",3,"click"],[1,"movie-info"],[1,"poster-section"],[1,"movie-poster",3,"error","src","alt"],[1,"details-section"],[1,"movie-title"],["class","movie-tagline",4,"ngIf"],[1,"movie-meta"],[1,"meta-item"],["class","meta-item",4,"ngIf"],["class","genres",4,"ngIf"],[1,"trailer-section"],["mat-flat-button","","color","primary",1,"trailer-button",3,"click"],[1,"overview-section"],[1,"overview"],["class","additional-info",4,"ngIf"],["class","main-cast",4,"ngIf"],["class","recommendations-section",4,"ngIf"],[1,"movie-tagline"],[1,"country-flags"],[4,"ngFor","ngForOf"],[1,"country-flag",3,"src","alt","title"],["class","flag-separator",4,"ngIf"],[1,"flag-separator"],[1,"genres"],["class","genre-chip clickable",3,"click",4,"ngFor","ngForOf"],[1,"genre-chip","clickable",3,"click"],[1,"additional-info"],[1,"info-title"],["class","info-item",4,"ngIf"],["class","revenue-comparison",4,"ngIf"],[1,"info-item"],[1,"revenue-comparison"],[1,"progress-container"],[1,"progress-bar"],[1,"budget-segment"],[1,"revenue-segment"],[1,"progress-labels"],[1,"budget-label"],[1,"revenue-label"],[1,"main-cast"],[1,"cast-title"],[1,"cast-cards"],["class","cast-card","style","cursor: pointer;",3,"routerLink",4,"ngFor","ngForOf"],["class","cast-carousel-controls",4,"ngIf"],[1,"cast-card",2,"cursor","pointer",3,"routerLink"],[1,"cast-photo",3,"src","alt"],[1,"cast-info"],[1,"cast-name"],[1,"cast-character"],[1,"cast-carousel-controls"],["mat-icon-button","",3,"click","disabled"],[1,"cast-page-indicator"],[1,"recommendations-section"],[1,"error-container"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,i){e&1&&(m(0,"div",0),I(1,th,4,0,"div",1)(2,vh,43,16,"div",2)(3,yh,9,0,"div",3),p()),e&2&&(g(),w("ngIf",i.loading),g(),w("ngIf",!i.loading&&i.movie),g(),w("ngIf",!i.loading&&!i.movie))},dependencies:[re,ot,be,qs,$t,Ys,Mn,Se,Ne,we,Ce,xe,Ht,qt,Rl,Fn,Rn,zi],styles:['.movie-detail-container[_ngcontent-%COMP%]{min-height:100vh;background:var(--detail-bg)}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.movie-content[_ngcontent-%COMP%]{position:relative;min-height:100vh;background-image:var(--backdrop-image);background-size:cover;background-position:center;background-repeat:no-repeat;padding-top:150px}.movie-content[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(to bottom,#0000004d,#000000b3);z-index:0}.back-button[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;z-index:10;color:#fff;background:#00000080}.movie-info[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:40px 20px;display:grid;grid-template-columns:300px 1fr;gap:40px;position:relative;z-index:1}.poster-section[_ngcontent-%COMP%]{display:flex;justify-content:center}.movie-poster[_ngcontent-%COMP%]{width:280px;height:420px;object-fit:cover;border-radius:12px;box-shadow:0 8px 25px #00000026}.details-section[_ngcontent-%COMP%]{background:var(--detail-card-bg);padding:32px;border-radius:12px;box-shadow:var(--detail-card-shadow)}.movie-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:300;margin:0 0 16px;color:var(--detail-title);line-height:1.2}.movie-tagline[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:400;font-style:italic;margin:0 0 24px;color:var(--detail-meta);line-height:1.3;opacity:.8}.movie-meta[_ngcontent-%COMP%]{display:flex;gap:24px;margin-bottom:24px;flex-wrap:wrap}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:var(--detail-meta);font-size:1rem}.meta-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f39c12}body.dark-mode[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f39c12!important}.country-flags[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.country-flag[_ngcontent-%COMP%]{width:24px;height:16px;border-radius:2px;object-fit:cover;cursor:help}.flag-separator[_ngcontent-%COMP%]{color:var(--detail-meta);font-size:.9rem;margin:0 2px}.genres[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:24px;flex-wrap:wrap}.genre-chip[_ngcontent-%COMP%]{background:var(--detail-genre-bg);color:var(--detail-genre-color)}.trailer-section[_ngcontent-%COMP%]{margin-bottom:24px}.trailer-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 24px;font-size:1rem;font-weight:500;border-radius:25px}.trailer-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:1.2rem;height:1.2rem}.overview-section[_ngcontent-%COMP%]{margin-bottom:12px}.overview-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:500;margin:0 0 16px;color:var(--detail-title)}.overview[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;color:var(--detail-overview);margin:0}.info-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:500;margin:0 0 16px;color:var(--detail-title)}.info-item[_ngcontent-%COMP%]{margin-bottom:12px;font-size:.95rem;color:var(--detail-info)}.info-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--detail-info-strong)}.revenue-comparison[_ngcontent-%COMP%]{margin-top:10px;padding-top:10px}.progress-container[_ngcontent-%COMP%]{margin-top:12px}.progress-bar[_ngcontent-%COMP%]{display:flex;height:24px;border-radius:12px;overflow:hidden;background:var(--card-border);margin-bottom:8px}.budget-segment[_ngcontent-%COMP%]{background:#b71c1c;transition:width .3s ease;display:flex;align-items:center;justify-content:center;color:#fff;font-size:.75rem;font-weight:600;min-width:0}.revenue-segment[_ngcontent-%COMP%]{background:#33691e;transition:width .3s ease;display:flex;align-items:center;justify-content:center;color:#fff;font-size:.75rem;font-weight:600;min-width:0}.progress-labels[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.85rem;color:var(--detail-info)}.budget-label[_ngcontent-%COMP%]{color:#b71c1c;font-weight:500}.revenue-label[_ngcontent-%COMP%]{color:#33691e;font-weight:500}.cast-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:500;margin:18px 0 16px;color:var(--detail-title)}.cast-cards[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap;justify-content:center}.cast-card[_ngcontent-%COMP%]{background:var(--card-bg);border:1px solid var(--card-border);border-radius:10px;box-shadow:0 2px 8px #00000012;padding:12px 10px 10px;display:flex;flex-direction:column;align-items:center;width:120px;min-height:210px;transition:all .3s ease}.cast-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #00000026;border-color:var(--primary-color)}.cast-photo[_ngcontent-%COMP%]{width:80px;height:110px;object-fit:cover;border-radius:6px;margin-bottom:8px;background:#eee}.cast-info[_ngcontent-%COMP%]{text-align:center}.cast-name[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500;color:var(--detail-title);display:block}.cast-character[_ngcontent-%COMP%]{font-size:.85rem;color:var(--detail-meta);font-style:italic;display:block}.cast-carousel-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:8px}.cast-page-indicator[_ngcontent-%COMP%]{font-size:1rem;color:var(--detail-meta);min-width:40px;text-align:center}.recommendations-section[_ngcontent-%COMP%]   .cast-card[_ngcontent-%COMP%]{width:180px;min-height:260px}.recommendations-section[_ngcontent-%COMP%]   .cast-photo[_ngcontent-%COMP%]{width:120px;height:180px}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:#f44336;margin-bottom:16px}.error-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:var(--detail-title)}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;color:var(--detail-info)}@media (max-width: 768px){.movie-content[_ngcontent-%COMP%]{padding-top:100px}.movie-info[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:24px;margin-top:0;padding:20px}.poster-section[_ngcontent-%COMP%]{order:2}.movie-poster[_ngcontent-%COMP%]{width:240px;height:360px}.details-section[_ngcontent-%COMP%]{padding:24px}.movie-title[_ngcontent-%COMP%]{font-size:2rem}.movie-meta[_ngcontent-%COMP%]{gap:16px}.cast-cards[_ngcontent-%COMP%]{gap:10px}.cast-card[_ngcontent-%COMP%]{width:90px;min-height:170px;padding:8px 4px}.cast-photo[_ngcontent-%COMP%]{width:60px;height:80px}}@media (max-width: 480px){.movie-content[_ngcontent-%COMP%]{padding-top:250px}.movie-info[_ngcontent-%COMP%]{margin-top:0;padding:16px}.poster-section[_ngcontent-%COMP%]{display:none}.movie-poster[_ngcontent-%COMP%]{width:200px;height:300px}.details-section[_ngcontent-%COMP%]{padding:20px}.movie-title[_ngcontent-%COMP%]{font-size:1.8rem}.movie-meta[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.recommendations-section[_ngcontent-%COMP%]   .cast-cards[_ngcontent-%COMP%]{flex-direction:row;overflow-x:auto;align-items:flex-start;gap:12px;width:100%;padding-bottom:8px}.recommendations-section[_ngcontent-%COMP%]   .cast-card[_ngcontent-%COMP%]{width:70vw;min-width:180px;max-width:240px;min-height:200px;flex:0 0 auto}.recommendations-section[_ngcontent-%COMP%]   .cast-photo[_ngcontent-%COMP%]{width:60vw;max-width:180px;height:90vw;max-height:260px}}']})};function bh(r,t){if(r&1&&q(0,"div",2),r&2){let e=t.$implicit,i=t.index,n=E();rt("background-image","url("+e+")"),ce("visible",i===n.currentIndex)}}var hr=class r{constructor(t,e){this.tmdb=t;this.platformId=e;this.isBrowser=te(this.platformId)}backdropUrls=[];currentIndex=0;timerSub;fadeInterval=5e3;isBrowser;ngOnInit(){this.isBrowser&&this.loadPopularMovies()}loadPopularMovies(){this.tmdb.getPopularMovies(1).subscribe({next:t=>{this.backdropUrls=t.results.map(e=>e.backdrop_path).filter(Boolean).map(e=>this.tmdb.getHighQualityImageUrl(e)),this.startAnimation()},error:t=>{console.error("Error cargando pel\xEDculas populares:",t)}})}startAnimation(){this.backdropUrls.length>1&&(this.timerSub=_n(this.fadeInterval).subscribe(()=>{this.currentIndex=(this.currentIndex+1)%this.backdropUrls.length}))}ngOnDestroy(){this.timerSub?.unsubscribe()}static \u0275fac=function(e){return new(e||r)(N(Be),N(Fe))};static \u0275cmp=G({type:r,selectors:[["app-login-background"]],decls:2,vars:1,consts:[[1,"background-wrapper"],["class","background-image",3,"visible","backgroundImage",4,"ngFor","ngForOf"],[1,"background-image"]],template:function(e,i){e&1&&(m(0,"div",0),I(1,bh,1,4,"div",1),p()),e&2&&(g(),w("ngForOf",i.backdropUrls))},dependencies:[re,ot],styles:[".background-wrapper[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:-1;overflow:hidden;pointer-events:none}.background-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100vw;height:100vh;background-size:cover;background-position:center;opacity:0;transition:opacity 1.5s ease;will-change:opacity}.background-image.visible[_ngcontent-%COMP%]{opacity:1;z-index:0}"]})};var Gl=r=>{let t;return r?t=r:typeof fetch>"u"?t=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:i})=>i(...e)):t=fetch,(...e)=>t(...e)};var $i=class extends Error{constructor(t,e="FunctionsError",i){super(t),this.name=e,this.context=i}},mr=class extends $i{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},Vi=class extends $i{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},qi=class extends $i{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},qo=function(r){return r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2",r}(qo||{});var wh=function(r,t,e,i){function n(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,t||[])).next())})},Hi=class{constructor(t,{headers:e={},customFetch:i,region:n=qo.Any}={}){this.url=t,this.headers=e,this.region=n,this.fetch=Gl(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var i;return wh(this,void 0,void 0,function*(){try{let{headers:n,method:o,body:s}=e,a={},{region:l}=e;l||(l=this.region);let c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let d;s&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=s):typeof s=="string"?(a["Content-Type"]="text/plain",d=s):typeof FormData<"u"&&s instanceof FormData?d=s:(a["Content-Type"]="application/json",d=JSON.stringify(s)));let u=yield this.fetch(c.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:d}).catch(b=>{throw new mr(b)}),_=u.headers.get("x-relay-error");if(_&&_==="true")throw new Vi(u);if(!u.ok)throw new qi(u);let f=((i=u.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),y;return f==="application/json"?y=yield u.json():f==="application/octet-stream"?y=yield u.blob():f==="text/event-stream"?y=u:f==="multipart/form-data"?y=yield u.formData():y=yield u.text(),{data:y,error:null,response:u}}catch(n){return{data:null,error:n,response:n instanceof qi||n instanceof Vi?n.context:void 0}}})}};var oc=dd(rc(),1),{PostgrestClient:sc,PostgrestQueryBuilder:B_,PostgrestFilterBuilder:U_,PostgrestTransformBuilder:z_,PostgrestBuilder:$_,PostgrestError:Dh}=oc.default;function ac(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}var lc=ac();var cc="2.11.15";var dc=`realtime-js/${cc}`,uc="1.0.0";var _r=1e4,hc=1e3,Xi=function(r){return r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed",r}(Xi||{}),oe=function(r){return r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving",r}(oe||{}),Te=function(r){return r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token",r}(Te||{}),is=function(r){return r.websocket="websocket",r}(is||{}),kt=function(r){return r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed",r}(kt||{});var vr=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,e,i)}_decodeBroadcast(t,e,i){let n=e.getUint8(1),o=e.getUint8(2),s=this.HEADER_LENGTH+2,a=i.decode(t.slice(s,s+n));s=s+n;let l=i.decode(t.slice(s,s+o));s=s+o;let c=JSON.parse(i.decode(t.slice(s,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}};var ai=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var W=function(r){return r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange",r}(W||{}),rs=(r,t,e={})=>{var i;let n=(i=e.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((o,s)=>(o[s]=Rh(s,r,t,n),o),{})},Rh=(r,t,e,i)=>{let n=t.find(a=>a.name===r),o=n?.type,s=e[r];return o&&!i.includes(o)?mc(o,s):ns(s)},mc=(r,t)=>{if(r.charAt(0)==="_"){let e=r.slice(1,r.length);return jh(t,e)}switch(r){case W.bool:return Fh(t);case W.float4:case W.float8:case W.int2:case W.int4:case W.int8:case W.numeric:case W.oid:return Lh(t);case W.json:case W.jsonb:return Nh(t);case W.timestamp:return Bh(t);case W.abstime:case W.date:case W.daterange:case W.int4range:case W.int8range:case W.money:case W.reltime:case W.text:case W.time:case W.timestamptz:case W.timetz:case W.tsrange:case W.tstzrange:return ns(t);default:return ns(t)}},ns=r=>r,Fh=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Lh=r=>{if(typeof r=="string"){let t=parseFloat(r);if(!Number.isNaN(t))return t}return r},Nh=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(t){return console.log(`JSON parse error: ${t}`),r}return r},jh=(r,t)=>{if(typeof r!="string")return r;let e=r.length-1,i=r[e];if(r[0]==="{"&&i==="}"){let o,s=r.slice(1,e);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>mc(t,a))}return r},Bh=r=>typeof r=="string"?r.replace(" ","T"):r,yr=r=>{let t=r;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};var li=class{constructor(t,e,i={},n=_r){this.channel=t,this.event=e,this.payload=i,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var i;return this._hasReceived(t)&&e((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var Zi=class r{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let i=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},n=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=r.syncState(this.state,n,o,s),this.pendingDiffs.forEach(l=>{this.state=r.syncDiff(this.state,l,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},n=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=r.syncDiff(this.state,n,o,s),a())}),this.onJoin((n,o,s)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:o,newPresences:s})}),this.onLeave((n,o,s)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,i,n){let o=this.cloneDeep(t),s=this.transformState(e),a={},l={};return this.map(o,(c,d)=>{s[c]||(l[c]=d)}),this.map(s,(c,d)=>{let u=o[c];if(u){let _=d.map(C=>C.presence_ref),f=u.map(C=>C.presence_ref),y=d.filter(C=>f.indexOf(C.presence_ref)<0),b=u.filter(C=>_.indexOf(C.presence_ref)<0);y.length>0&&(a[c]=y),b.length>0&&(l[c]=b)}else a[c]=d}),this.syncDiff(o,{joins:a,leaves:l},i,n)}static syncDiff(t,e,i,n){let{joins:o,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return i||(i=()=>{}),n||(n=()=>{}),this.map(o,(a,l)=>{var c;let d=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),d.length>0){let u=t[a].map(f=>f.presence_ref),_=d.filter(f=>u.indexOf(f.presence_ref)<0);t[a].unshift(..._)}i(a,d,l)}),this.map(s,(a,l)=>{let c=t[a];if(!c)return;let d=l.map(u=>u.presence_ref);c=c.filter(u=>d.indexOf(u.presence_ref)<0),t[a]=c,n(a,c,l),c.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(i=>e(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,i)=>{let n=t[i];return"metas"in n?e[i]=n.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):e[i]=n,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var et=function(r){return r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR",r}(et||{});var en=class r{constructor(t,e={config:{}},i){this.topic=t,this.params=e,this.socket=i,this.bindings={},this.state=oe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new li(this,Te.join,this.params,this.timeout),this.rejoinTimer=new ai(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=oe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=oe.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=oe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Te.reply,{},(n,o)=>{this._trigger(this._replyEventName(o),n)}),this.presence=new Zi(this),this.broadcastEndpointURL=yr(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var i,n;if(this.socket.isConnected()||this.socket.connect(),this.state==oe.closed){let{config:{broadcast:o,presence:s,private:a}}=this.params;this._onError(d=>t?.(et.CHANNEL_ERROR,d)),this._onClose(()=>t?.(et.CLOSED));let l={},c={broadcast:o,presence:s,postgres_changes:(n=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(d=>d.filter))!==null&&n!==void 0?n:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",u=>h(this,[u],function*({postgres_changes:d}){var _;if(this.socket.setAuth(),d===void 0){t?.(et.SUBSCRIBED);return}else{let f=this.bindings.postgres_changes,y=(_=f?.length)!==null&&_!==void 0?_:0,b=[];for(let C=0;C<y;C++){let M=f[C],{filter:{event:F,schema:V,table:x,filter:$}}=M,Q=d&&d[C];if(Q&&Q.event===F&&Q.schema===V&&Q.table===x&&Q.filter===$)b.push(Object.assign(Object.assign({},M),{id:Q.id}));else{this.unsubscribe(),this.state=oe.errored,t?.(et.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(et.SUBSCRIBED);return}})).receive("error",d=>{this.state=oe.errored,t?.(et.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t?.(et.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(i){return h(this,arguments,function*(t,e={}){return yield this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)})}untrack(){return h(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,e,i){return this._on(t,e,i)}send(i){return h(this,arguments,function*(t,e={}){var n,o;if(!this._canPush()&&t.type==="broadcast"){let{event:s,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{let d=yield this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=e.timeout)!==null&&n!==void 0?n:this.timeout);return yield(o=d.body)===null||o===void 0?void 0:o.cancel(),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,l,c;let d=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=oe.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Te.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(n=>{i=new li(this,Te.leave,{},t),i.receive("ok",()=>{e(),n("ok")}).receive("timeout",()=>{e(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}_fetchWithTimeout(t,e,i){return h(this,null,function*(){let n=new AbortController,o=setTimeout(()=>n.abort(),i),s=yield this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:n.signal}));return clearTimeout(o),s})}_push(t,e,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new li(this,t,e,i);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,e,i){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,i){var n,o;let s=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=Te;if(i&&[a,l,c,d].indexOf(s)>=0&&i!==this._joinRef())return;let _=this._onMessage(s,e,i);if(e&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var y,b,C;return((y=f.filter)===null||y===void 0?void 0:y.event)==="*"||((C=(b=f.filter)===null||b===void 0?void 0:b.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===s}).map(f=>f.callback(_,i)):(o=this.bindings[s])===null||o===void 0||o.filter(f=>{var y,b,C,M,F,V;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in f){let x=f.id,$=(y=f.filter)===null||y===void 0?void 0:y.event;return x&&((b=e.ids)===null||b===void 0?void 0:b.includes(x))&&($==="*"||$?.toLocaleLowerCase()===((C=e.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{let x=(F=(M=f?.filter)===null||M===void 0?void 0:M.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return x==="*"||x===((V=e?.event)===null||V===void 0?void 0:V.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===s}).map(f=>{if(typeof _=="object"&&"ids"in _){let y=_.data,{schema:b,table:C,commit_timestamp:M,type:F,errors:V}=y;_=Object.assign(Object.assign({},{schema:b,table:C,commit_timestamp:M,eventType:F,new:{},old:{},errors:V}),this._getPayloadRecords(y))}f.callback(_,i)})}_isClosed(){return this.state===oe.closed}_isJoined(){return this.state===oe.joined}_isJoining(){return this.state===oe.joining}_isLeaving(){return this.state===oe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,i){let n=t.toLocaleLowerCase(),o={type:n,filter:e,callback:i};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(t,e){let i=t.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(n=>{var o;return!(((o=n.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&r.isEqual(n.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let i in t)if(t[i]!==e[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Te.close,{},t)}_onError(t){this._on(Te.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=oe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=rs(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=rs(t.columns,t.old_record)),e}};var pc=()=>{},zh=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,tn=class{constructor(t,e){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_r,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=pc,this.ref=0,this.logger=pc,this.conn=null,this.sendBuffer=[],this.serializer=new vr,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...a)=>import("./chunk-NPJLHOA5.js").then(({default:l})=>l(...a)):s=fetch,(...a)=>s(...a)},this.endPoint=`${t}/${is.websocket}`,this.httpEndpoint=yr(t),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let n=(i=e?.params)===null||i===void 0?void 0:i.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=e?.encode?e.encode:(o,s)=>s(JSON.stringify(o)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ai(()=>h(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch),e?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=e?.worker||!1,this.workerUrl=e?.workerUrl}this.accessToken=e?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=lc),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:uc}))}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}removeChannel(t){return h(this,null,function*(){let e=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return h(this,null,function*(){let t=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t})}log(t,e,i){this.logger(t,e,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Xi.connecting:return kt.Connecting;case Xi.open:return kt.Open;case Xi.closing:return kt.Closing;default:return kt.Closed}}isConnected(){return this.connectionState()===kt.Open}channel(t,e={config:{}}){let i=`realtime:${t}`,n=this.getChannels().find(o=>o.topic===i);if(n)return n;{let o=new en(`realtime:${t}`,e,this);return this.channels.push(o),o}}push(t){let{topic:e,event:i,payload:n,ref:o}=t,s=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${i} (${o})`,n),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(t=null){return h(this,null,function*(){let e=t||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(i=>{let n={access_token:e,version:dc};e&&i.updateJoinPayload(n),i.joinedOnce&&i._isJoined()&&i._push(Te.access_token,{access_token:e})}))})}sendHeartbeat(){return h(this,null,function*(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(hc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),yield this.setAuth()})}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:i,event:n,payload:o,ref:s}=e;i==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(e.payload.status=="ok"?"ok":"error"),s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${i} ${n} ${s&&"("+s+")"||""}`,o),Array.from(this.channels).filter(a=>a._isMember(i)).forEach(a=>a._trigger(n,o,s)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Te.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let i=t.match(/\?/)?"&":"?",n=new URLSearchParams(e);return`${t}${i}${n}`}_workerObjectUrl(t){let e;if(t)e=t;else{let i=new Blob([zh],{type:"application/javascript"});e=URL.createObjectURL(i)}return e}};var ci=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Y(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var br=class extends ci{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Tt=class extends ci{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var $h=function(r,t,e,i){function n(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,t||[])).next())})},Sr=r=>{let t;return r?t=r:typeof fetch>"u"?t=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:i})=>i(...e)):t=fetch,(...e)=>t(...e)},fc=()=>$h(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-NPJLHOA5.js")).Response:Response}),wr=r=>{if(Array.isArray(r))return r.map(e=>wr(e));if(typeof r=="function"||r!==Object(r))return r;let t={};return Object.entries(r).forEach(([e,i])=>{let n=e.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[n]=wr(i)}),t};var Et=function(r,t,e,i){function n(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,t||[])).next())})},os=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Vh=(r,t,e)=>Et(void 0,void 0,void 0,function*(){let i=yield fc();r instanceof i&&!e?.noResolveJson?r.json().then(n=>{t(new br(os(n),r.status||500))}).catch(n=>{t(new Tt(os(n),n))}):t(new Tt(os(r),r))}),qh=(r,t,e,i)=>{let n={method:r,headers:t?.headers||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i&&(n.body=JSON.stringify(i)),Object.assign(Object.assign({},n),e))};function nn(r,t,e,i,n,o){return Et(this,void 0,void 0,function*(){return new Promise((s,a)=>{r(e,qh(t,i,n,o)).then(l=>{if(!l.ok)throw l;return i?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>Vh(l,a,i))})})}function di(r,t,e,i){return Et(this,void 0,void 0,function*(){return nn(r,"GET",t,e,i)})}function ze(r,t,e,i,n){return Et(this,void 0,void 0,function*(){return nn(r,"POST",t,i,n,e)})}function gc(r,t,e,i,n){return Et(this,void 0,void 0,function*(){return nn(r,"PUT",t,i,n,e)})}function _c(r,t,e,i){return Et(this,void 0,void 0,function*(){return nn(r,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),i)})}function xr(r,t,e,i,n){return Et(this,void 0,void 0,function*(){return nn(r,"DELETE",t,i,n,e)})}var me=function(r,t,e,i){function n(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,t||[])).next())})},Hh={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Cr=class{constructor(t,e={},i,n){this.url=t,this.headers=e,this.bucketId=i,this.fetch=Sr(n)}uploadOrUpdate(t,e,i,n){return me(this,void 0,void 0,function*(){try{let o,s=Object.assign(Object.assign({},vc),n),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)}),l=s.metadata;typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=i,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n?.headers&&(a=Object.assign(Object.assign({},a),n.headers));let c=this._removeEmptyFolders(e),d=this._getFinalPath(c),u=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:o,headers:a},s?.duplex?{duplex:s.duplex}:{})),_=yield u.json();return u.ok?{data:{path:c,id:_.Id,fullPath:_.Key},error:null}:{data:null,error:_}}catch(o){if(Y(o))return{data:null,error:o};throw o}})}upload(t,e,i){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,i)})}uploadToSignedUrl(t,e,i,n){return me(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(t),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let l,c=Object.assign({upsert:vc.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl)):(l=i,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);let u=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),_=yield u.json();return u.ok?{data:{path:o,fullPath:_.Key},error:null}:{data:null,error:_}}catch(l){if(Y(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return me(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),n=Object.assign({},this.headers);e?.upsert&&(n["x-upsert"]="true");let o=yield ze(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:n}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new ci("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(i){if(Y(i))return{data:null,error:i};throw i}})}update(t,e,i){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,i)})}move(t,e,i){return me(this,void 0,void 0,function*(){try{return{data:yield ze(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}})}copy(t,e,i){return me(this,void 0,void 0,function*(){try{return{data:{path:(yield ze(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}})}createSignedUrl(t,e,i){return me(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),o=yield ze(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:e},i?.transform?{transform:i.transform}:{}),{headers:this.headers}),s=i?.download?`&download=${i.download===!0?"":i.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}})}createSignedUrls(t,e,i){return me(this,void 0,void 0,function*(){try{let n=yield ze(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),o=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:n.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}})}download(t,e){return me(this,void 0,void 0,function*(){let n=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),s=o?`?${o}`:"";try{let a=this._getFinalPath(t);return{data:yield(yield di(this.fetch,`${this.url}/${n}/${a}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Y(a))return{data:null,error:a};throw a}})}info(t){return me(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let i=yield di(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:wr(i),error:null}}catch(i){if(Y(i))return{data:null,error:i};throw i}})}exists(t){return me(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield _c(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Y(i)&&i instanceof Tt){let n=i.originalError;if([400,404].includes(n?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,e){let i=this._getFinalPath(t),n=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&n.push(o);let a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&n.push(l);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${i}${c}`)}}}remove(t){return me(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(Y(e))return{data:null,error:e};throw e}})}list(t,e,i){return me(this,void 0,void 0,function*(){try{let n=Object.assign(Object.assign(Object.assign({},Hh),e),{prefix:t||""});return{data:yield ze(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},i),error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var yc="2.7.1";var bc={"X-Client-Info":`storage-js/${yc}`};var ui=function(r,t,e,i){function n(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,t||[])).next())})},kr=class{constructor(t,e={},i){this.url=t,this.headers=Object.assign(Object.assign({},bc),e),this.fetch=Sr(i)}listBuckets(){return ui(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}})}getBucket(t){return ui(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(Y(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return ui(this,void 0,void 0,function*(){try{return{data:yield ze(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Y(i))return{data:null,error:i};throw i}})}updateBucket(t,e){return ui(this,void 0,void 0,function*(){try{return{data:yield gc(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Y(i))return{data:null,error:i};throw i}})}emptyBucket(t){return ui(this,void 0,void 0,function*(){try{return{data:yield ze(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(Y(e))return{data:null,error:e};throw e}})}deleteBucket(t){return ui(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(Y(e))return{data:null,error:e};throw e}})}};var rn=class extends kr{constructor(t,e={},i){super(t,e,i)}from(t){return new Cr(this.url,this.headers,t,this.fetch)}};var wc="2.50.3";var on="";typeof Deno<"u"?on="deno":typeof document<"u"?on="web":typeof navigator<"u"&&navigator.product==="ReactNative"?on="react-native":on="node";var Gh={"X-Client-Info":`supabase-js-${on}/${wc}`},Sc={headers:Gh},xc={schema:"public"},Cc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kc={};Ta();var Wh=function(r,t,e,i){function n(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,t||[])).next())})},Kh=r=>{let t;return r?t=r:typeof fetch>"u"?t=Ca:t=fetch,(...e)=>t(...e)},Qh=()=>typeof Headers>"u"?ka:Headers,Tc=(r,t,e)=>{let i=Kh(e),n=Qh();return(o,s)=>Wh(void 0,void 0,void 0,function*(){var a;let l=(a=yield t())!==null&&a!==void 0?a:r,c=new n(s?.headers);return c.has("apikey")||c.set("apikey",r),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),i(o,Object.assign(Object.assign({},s),{headers:c}))})};var Jh=function(r,t,e,i){function n(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,t||[])).next())})};function Ec(r){return r.endsWith("/")?r:r+"/"}function Mc(r,t){var e,i;let{db:n,auth:o,realtime:s,global:a}=r,{db:l,auth:c,realtime:d,global:u}=t,_={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},d),s),global:Object.assign(Object.assign(Object.assign({},u),a),{headers:Object.assign(Object.assign({},(e=u?.headers)!==null&&e!==void 0?e:{}),(i=a?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>Jh(this,void 0,void 0,function*(){return""})};return r.accessToken?_.accessToken=r.accessToken:delete _.accessToken,_}var Tr="2.70.0";var Mt=30*1e3,Er=3,Mr=Er*Mt,Pc="http://localhost:9999",Oc="supabase.auth.token";var Ac={"X-Client-Info":`gotrue-js/${Tr}`};var sn="X-Supabase-Api-Version",ss={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ic=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Dc=6e5;var an=class extends Error{constructor(t,e,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=i}};function A(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}var Pr=class extends an{constructor(t,e,i){super(t,e,i),this.name="AuthApiError",this.status=e,this.code=i}};function Rc(r){return A(r)&&r.name==="AuthApiError"}var hi=class extends an{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},$e=class extends an{constructor(t,e,i,n){super(t,i,n),this.name=e,this.status=i}},Ee=class extends $e{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Fc(r){return A(r)&&r.name==="AuthSessionMissingError"}var Pt=class extends $e{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Ot=class extends $e{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},At=class extends $e{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Lc(r){return A(r)&&r.name==="AuthImplicitGrantRedirectError"}var ln=class extends $e{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},mi=class extends $e{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}};function Or(r){return A(r)&&r.name==="AuthRetryableFetchError"}var cn=class extends $e{constructor(t,e,i){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=i}};var tt=class extends $e{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var Ar="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Nc=` 	
\r=`.split(""),Yh=(()=>{let r=new Array(128);for(let t=0;t<r.length;t+=1)r[t]=-1;for(let t=0;t<Nc.length;t+=1)r[Nc[t].charCodeAt(0)]=-2;for(let t=0;t<Ar.length;t+=1)r[Ar[t].charCodeAt(0)]=t;return r})();function jc(r,t,e){if(r!==null)for(t.queue=t.queue<<8|r,t.queuedBits+=8;t.queuedBits>=6;){let i=t.queue>>t.queuedBits-6&63;e(Ar[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let i=t.queue>>t.queuedBits-6&63;e(Ar[i]),t.queuedBits-=6}}function Bc(r,t,e){let i=Yh[r];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function as(r){let t=[],e=s=>{t.push(String.fromCodePoint(s))},i={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},o=s=>{em(s,i,e)};for(let s=0;s<r.length;s+=1)Bc(r.charCodeAt(s),n,o);return t.join("")}function Xh(r,t){if(r<=127){t(r);return}else if(r<=2047){t(192|r>>6),t(128|r&63);return}else if(r<=65535){t(224|r>>12),t(128|r>>6&63),t(128|r&63);return}else if(r<=1114111){t(240|r>>18),t(128|r>>12&63),t(128|r>>6&63),t(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Zh(r,t){for(let e=0;e<r.length;e+=1){let i=r.charCodeAt(e);if(i>55295&&i<=56319){let n=(i-55296)*1024&65535;i=(r.charCodeAt(e+1)-56320&65535|n)+65536,e+=1}Xh(i,t)}}function em(r,t,e){if(t.utf8seq===0){if(r<=127){e(r);return}for(let i=1;i<6;i+=1)if((r>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=r&31;else if(t.utf8seq===3)t.codepoint=r&15;else if(t.utf8seq===4)t.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|r&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function Uc(r){let t=[],e={queue:0,queuedBits:0},i=n=>{t.push(n)};for(let n=0;n<r.length;n+=1)Bc(r.charCodeAt(n),e,i);return new Uint8Array(t)}function zc(r){let t=[];return Zh(r,e=>t.push(e)),new Uint8Array(t)}function $c(r){let t=[],e={queue:0,queuedBits:0},i=n=>{t.push(n)};return r.forEach(n=>jc(n,e,i)),jc(null,e,i),t.join("")}function Vc(r){return Math.round(Date.now()/1e3)+r}function qc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){let t=Math.random()*16|0;return(r=="x"?t:t&3|8).toString(16)})}var Me=()=>typeof window<"u"&&typeof document<"u",It={tested:!1,writable:!1},dt=()=>{if(!Me())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(It.tested)return It.writable;let r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),It.tested=!0,It.writable=!0}catch{It.tested=!0,It.writable=!1}return It.writable};function Hc(r){let t={},e=new URL(r);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((n,o)=>{t[o]=n})}catch{}return e.searchParams.forEach((i,n)=>{t[n]=i}),t}var Ir=r=>{let t;return r?t=r:typeof fetch>"u"?t=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:i})=>i(...e)):t=fetch,(...e)=>t(...e)},Gc=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ls=(r,t,e)=>h(null,null,function*(){yield r.setItem(t,JSON.stringify(e))}),un=(r,t)=>h(null,null,function*(){let e=yield r.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),hn=(r,t)=>h(null,null,function*(){yield r.removeItem(t)}),dn=class r{constructor(){this.promise=new r.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};dn.promiseConstructor=Promise;function Dr(r){let t=r.split(".");if(t.length!==3)throw new tt("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!Ic.test(t[i]))throw new tt("JWT not in base64url format");return{header:JSON.parse(as(t[0])),payload:JSON.parse(as(t[1])),signature:Uc(t[2]),raw:{header:t[0],payload:t[1]}}}function Wc(r){return h(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),r)})})}function Kc(r,t){return new Promise((i,n)=>{h(null,null,function*(){for(let o=0;o<1/0;o++)try{let s=yield r(o);if(!t(o,null,s)){i(s);return}}catch(s){if(!t(o,s)){n(s);return}}})})}function tm(r){return("0"+r.toString(16)).substr(-2)}function im(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=e.length,n="";for(let o=0;o<56;o++)n+=e.charAt(Math.floor(Math.random()*i));return n}return crypto.getRandomValues(t),Array.from(t,tm).join("")}function nm(r){return h(this,null,function*(){let e=new TextEncoder().encode(r),i=yield crypto.subtle.digest("SHA-256",e),n=new Uint8Array(i);return Array.from(n).map(o=>String.fromCharCode(o)).join("")})}function rm(r){return h(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;let e=yield nm(r);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function Dt(r,t,e=!1){return h(this,null,function*(){let i=im(),n=i;e&&(n+="/PASSWORD_RECOVERY"),yield ls(r,`${t}-code-verifier`,n);let o=yield rm(i);return[o,i===o?"plain":"s256"]})}var om=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Qc(r){let t=r.headers.get(sn);if(!t||!t.match(om))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Jc(r){if(!r)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(r<=t)throw new Error("JWT has expired")}function Yc(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var sm=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Rt(r){if(!sm.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var am=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(e[i[n]]=r[i[n]]);return e},Ft=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),lm=[502,503,504];function Xc(r){return h(this,null,function*(){var t;if(!Gc(r))throw new mi(Ft(r),0);if(lm.includes(r.status))throw new mi(Ft(r),r.status);let e;try{e=yield r.json()}catch(o){throw new hi(Ft(o),o)}let i,n=Qc(r);if(n&&n.getTime()>=ss["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?i=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(i=e.error_code),i){if(i==="weak_password")throw new cn(Ft(e),r.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Ee}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new cn(Ft(e),r.status,e.weak_password.reasons);throw new Pr(Ft(e),r.status||500,i)})}var cm=(r,t,e,i)=>{let n={method:r,headers:t?.headers||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),n.body=JSON.stringify(i),Object.assign(Object.assign({},n),e))};function R(r,t,e,i){return h(this,null,function*(){var n;let o=Object.assign({},i?.headers);o[sn]||(o[sn]=ss["2024-01-01"].name),i?.jwt&&(o.Authorization=`Bearer ${i.jwt}`);let s=(n=i?.query)!==null&&n!==void 0?n:{};i?.redirectTo&&(s.redirect_to=i.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=yield dm(r,t,e+a,{headers:o,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(l):{data:Object.assign({},l),error:null}})}function dm(r,t,e,i,n,o){return h(this,null,function*(){let s=cm(t,i,n,o),a;try{a=yield r(e,Object.assign({},s))}catch(l){throw console.error(l),new mi(Ft(l),0)}if(a.ok||(yield Xc(a)),i?.noResolveJson)return a;try{return yield a.json()}catch(l){yield Xc(l)}})}function Ve(r){var t;let e=null;um(r)&&(e=Object.assign({},r),r.expires_at||(e.expires_at=Vc(r.expires_in)));let i=(t=r.user)!==null&&t!==void 0?t:r;return{data:{session:e,user:i},error:null}}function cs(r){let t=Ve(r);return!t.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((e,i)=>e&&typeof i=="string",!0)&&(t.data.weak_password=r.weak_password),t}function qe(r){var t;return{data:{user:(t=r.user)!==null&&t!==void 0?t:r},error:null}}function Zc(r){return{data:r,error:null}}function ed(r){let{action_link:t,email_otp:e,hashed_token:i,redirect_to:n,verification_type:o}=r,s=am(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:i,redirect_to:n,verification_type:o},l=Object.assign({},s);return{data:{properties:a,user:l},error:null}}function td(r){return r}function um(r){return r.access_token&&r.refresh_token&&r.expires_in}var Rr=["global","local","others"];var hm=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(e[i[n]]=r[i[n]]);return e},pi=class{constructor({url:t="",headers:e={},fetch:i}){this.url=t,this.headers=e,this.fetch=Ir(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(i){return h(this,arguments,function*(t,e=Rr[0]){if(Rr.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rr.join(", ")}`);try{return yield R(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(A(n))return{data:null,error:n};throw n}})}inviteUserByEmail(i){return h(this,arguments,function*(t,e={}){try{return yield R(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:qe})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}})}generateLink(t){return h(this,null,function*(){try{let{options:e}=t,i=hm(t,["options"]),n=Object.assign(Object.assign({},i),e);return"newEmail"in i&&(n.new_email=i?.newEmail,delete n.newEmail),yield R(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:ed,redirectTo:e?.redirectTo})}catch(e){if(A(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(t){return h(this,null,function*(){try{return yield R(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:qe})}catch(e){if(A(e))return{data:{user:null},error:e};throw e}})}listUsers(t){return h(this,null,function*(){var e,i,n,o,s,a,l;try{let c={nextPage:null,lastPage:0,total:0},d=yield R(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&i!==void 0?i:"",per_page:(o=(n=t?.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:td});if(d.error)throw d.error;let u=yield d.json(),_=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(y=>{let b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(y.split(";")[1].split("=")[1]);c[`${C}Page`]=b}),c.total=parseInt(_)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(c){if(A(c))return{data:{users:[]},error:c};throw c}})}getUserById(t){return h(this,null,function*(){Rt(t);try{return yield R(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:qe})}catch(e){if(A(e))return{data:{user:null},error:e};throw e}})}updateUserById(t,e){return h(this,null,function*(){Rt(t);try{return yield R(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:qe})}catch(i){if(A(i))return{data:{user:null},error:i};throw i}})}deleteUser(t,e=!1){return h(this,null,function*(){Rt(t);try{return yield R(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:qe})}catch(i){if(A(i))return{data:{user:null},error:i};throw i}})}_listFactors(t){return h(this,null,function*(){Rt(t.userId);try{let{data:e,error:i}=yield R(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:e,error:i}}catch(e){if(A(e))return{data:null,error:e};throw e}})}_deleteFactor(t){return h(this,null,function*(){Rt(t.userId),Rt(t.id);try{return{data:yield R(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(A(e))return{data:null,error:e};throw e}})}};var id={getItem:r=>dt()?globalThis.localStorage.getItem(r):null,setItem:(r,t)=>{dt()&&globalThis.localStorage.setItem(r,t)},removeItem:r=>{dt()&&globalThis.localStorage.removeItem(r)}};function ds(r={}){return{getItem:t=>r[t]||null,setItem:(t,e)=>{r[t]=e},removeItem:t=>{delete r[t]}}}function nd(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var Lt={debug:!!(globalThis&&dt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},mn=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},Fr=class extends mn{};function us(r,t,e){return h(this,null,function*(){Lt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,t);let i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Lt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(r,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},n=>h(null,null,function*(){if(n){Lt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return yield e()}finally{Lt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(t===0)throw Lt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Fr(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Lt.debug)try{let o=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}})))})}nd();var mm={url:Pc,storageKey:Oc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ac,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function rd(r,t,e){return h(this,null,function*(){return yield e()})}var hs=(()=>{class r{constructor(e){var i,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=r.nextInstanceID,r.nextInstanceID+=1,this.instanceID>0&&Me()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let o=Object.assign(Object.assign({},mm),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new pi({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Ir(o.fetch),this.lock=o.lock||rd,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Me()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=us:this.lock=rd,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:dt()?this.storage=id:(this.memoryStorage={},this.storage=ds(this.memoryStorage)):(this.memoryStorage={},this.storage=ds(this.memoryStorage)),Me()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",s=>h(this,null,function*(){this._debug("received broadcast notification from other tab or client",s),yield this._notifyAllSubscribers(s.data.event,s.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Tr}) ${new Date().toISOString()}`,...e),this}initialize(){return h(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=h(this,null,function*(){return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return h(this,null,function*(){var e;try{let i=Hc(window.location.href),n="none";if(this._isImplicitGrantCallback(i)?n="implicit":(yield this._isPKCECallback(i))&&(n="pkce"),Me()&&this.detectSessionInUrl&&n!=="none"){let{data:o,error:s}=yield this._getSessionFromURL(i,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Lc(s)){let c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return yield this._removeSession(),{error:s}}let{session:a,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),yield this._saveSession(a),setTimeout(()=>h(this,null,function*(){l==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(i){return A(i)?{error:i}:{error:new hi("Unexpected error during initialization",i)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return h(this,null,function*(){var i,n,o;try{let s=yield R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(i=e?.options)===null||i===void 0?void 0:i.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Ve}),{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};let c=a.session,d=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(A(s))return{data:{user:null,session:null},error:s};throw s}})}signUp(e){return h(this,null,function*(){var i,n,o;try{let s;if("email"in e){let{email:u,password:_,options:f}=e,y=null,b=null;this.flowType==="pkce"&&([y,b]=yield Dt(this.storage,this.storageKey)),s=yield R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:u,password:_,data:(i=f?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:y,code_challenge_method:b},xform:Ve})}else if("phone"in e){let{phone:u,password:_,options:f}=e;s=yield R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:_,data:(n=f?.data)!==null&&n!==void 0?n:{},channel:(o=f?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Ve})}else throw new Ot("You must provide either an email or phone number and a password");let{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};let c=a.session,d=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(A(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithPassword(e){return h(this,null,function*(){try{let i;if("email"in e){let{email:s,password:a,options:l}=e;i=yield R(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:cs})}else if("phone"in e){let{phone:s,password:a,options:l}=e;i=yield R(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:cs})}else throw new Ot("You must provide either an email or phone number and a password");let{data:n,error:o}=i;return o?{data:{user:null,session:null},error:o}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Pt}:(n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:o})}catch(i){if(A(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithOAuth(e){return h(this,null,function*(){var i,n,o,s;return yield this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})})}exchangeCodeForSession(e){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._exchangeCodeForSession(e)}))})}signInWithWeb3(e){return h(this,null,function*(){let{chain:i}=e;if(i==="solana")return yield this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)})}signInWithSolana(e){return h(this,null,function*(){var i,n,o,s,a,l,c,d,u,_,f,y;let b,C;if("message"in e)b=e.message,C=e.signature;else{let{chain:M,wallet:F,statement:V,options:x}=e,$;if(Me())if(typeof F=="object")$=F;else{let L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))$=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof F!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=F}let Q=new URL((i=x?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in $&&$.signIn){let L=yield $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x?.signInWithSolana),{version:"1",domain:Q.host,uri:Q.href}),V?{statement:V}:null)),H;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")H=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)H=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)b=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),C=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${Q.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...V?["",V,""]:[""],"Version: 1",`URI: ${Q.href}`,`Issued At: ${(o=(n=x?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=x?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((d=x?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((_=(u=x?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||_===void 0)&&_.length?["Resources",...x.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);let L=yield $.signMessage(new TextEncoder().encode(b),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=L}}try{let{data:M,error:F}=yield R(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:$c(C)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ve});if(F)throw F;return!M||!M.session||!M.user?{data:{user:null,session:null},error:new Pt}:(M.session&&(yield this._saveSession(M.session),yield this._notifyAllSubscribers("SIGNED_IN",M.session)),{data:Object.assign({},M),error:F})}catch(M){if(A(M))return{data:{user:null,session:null},error:M};throw M}})}_exchangeCodeForSession(e){return h(this,null,function*(){let i=yield un(this.storage,`${this.storageKey}-code-verifier`),[n,o]=(i??"").split("/");try{let{data:s,error:a}=yield R(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ve});if(yield hn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Pt}:(s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}catch(s){if(A(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}})}signInWithIdToken(e){return h(this,null,function*(){try{let{options:i,provider:n,token:o,access_token:s,nonce:a}=e,l=yield R(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:Ve}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Pt}:(c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(i){if(A(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithOtp(e){return h(this,null,function*(){var i,n,o,s,a;try{if("email"in e){let{email:l,options:c}=e,d=null,u=null;this.flowType==="pkce"&&([d,u]=yield Dt(this.storage,this.storageKey));let{error:_}=yield R(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(i=c?.data)!==null&&i!==void 0?i:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){let{phone:l,options:c}=e,{data:d,error:u}=yield R(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=c?.data)!==null&&o!==void 0?o:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:u}}throw new Ot("You must provide either an email or phone number.")}catch(l){if(A(l))return{data:{user:null,session:null},error:l};throw l}})}verifyOtp(e){return h(this,null,function*(){var i,n;try{let o,s;"options"in e&&(o=(i=e.options)===null||i===void 0?void 0:i.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);let{data:a,error:l}=yield R(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:Ve});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,d=a.user;return c?.access_token&&(yield this._saveSession(c),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(A(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithSSO(e){return h(this,null,function*(){var i,n,o;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=yield Dt(this.storage,this.storageKey)),yield R(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&n!==void 0?n:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:Zc})}catch(s){if(A(s))return{data:null,error:s};throw s}})}reauthenticate(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return h(this,null,function*(){try{return yield this._useSession(e=>h(this,null,function*(){let{data:{session:i},error:n}=e;if(n)throw n;if(!i)throw new Ee;let{error:o}=yield R(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return{data:{user:null,session:null},error:o}}))}catch(e){if(A(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return h(this,null,function*(){try{let i=`${this.url}/resend`;if("email"in e){let{email:n,type:o,options:s}=e,{error:a}=yield R(this.fetch,"POST",i,{headers:this.headers,body:{email:n,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:n,type:o,options:s}=e,{data:a,error:l}=yield R(this.fetch,"POST",i,{headers:this.headers,body:{phone:n,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new Ot("You must provide either an email or phone number and a type")}catch(i){if(A(i))return{data:{user:null,session:null},error:i};throw i}})}getSession(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return this._useSession(i=>h(this,null,function*(){return i}))}))})}_acquireLock(e,i){return h(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=h(this,null,function*(){return yield n,yield i()});return this.pendingInLock.push(h(this,null,function*(){try{yield o}catch{}})),o}return yield this.lock(`lock:${this.storageKey}`,e,()=>h(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let n=i();for(this.pendingInLock.push(h(this,null,function*(){try{yield n}catch{}})),yield n;this.pendingInLock.length;){let o=[...this.pendingInLock];yield Promise.all(o),this.pendingInLock.splice(0,o.length)}return yield n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return h(this,null,function*(){this._debug("#_useSession","begin");try{let i=yield this.__loadSession();return yield e(i)}finally{this._debug("#_useSession","end")}})}__loadSession(){return h(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,i=yield un(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let n=e.expires_at?e.expires_at*1e3-Date.now()<Mr:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}let{session:o,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return h(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return h(this,null,function*(){try{return e?yield R(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:qe}):yield this._useSession(i=>h(this,null,function*(){var n,o,s;let{data:a,error:l}=i;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ee}:yield R(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:qe})}))}catch(i){if(A(i))return Fc(i)&&(yield this._removeSession(),yield hn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:i};throw i}})}updateUser(n){return h(this,arguments,function*(e,i={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._updateUser(e,i)}))})}_updateUser(n){return h(this,arguments,function*(e,i={}){try{return yield this._useSession(o=>h(this,null,function*(){let{data:s,error:a}=o;if(a)throw a;if(!s.session)throw new Ee;let l=s.session,c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=yield Dt(this.storage,this.storageKey));let{data:u,error:_}=yield R(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:l.access_token,xform:qe});if(_)throw _;return l.user=u.user,yield this._saveSession(l),yield this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}}))}catch(o){if(A(o))return{data:{user:null},error:o};throw o}})}setSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return h(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new Ee;let i=Date.now()/1e3,n=i,o=!0,s=null,{payload:a}=Dr(e.access_token);if(a.exp&&(n=a.exp,o=n<=i),o){let{session:l,error:c}=yield this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{let{data:l,error:c}=yield this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-i,expires_at:n},yield this._saveSession(s),yield this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(i){if(A(i))return{data:{session:null,user:null},error:i};throw i}})}refreshSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return h(this,null,function*(){try{return yield this._useSession(i=>h(this,null,function*(){var n;if(!e){let{data:a,error:l}=i;if(l)throw l;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new Ee;let{session:o,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}}))}catch(i){if(A(i))return{data:{user:null,session:null},error:i};throw i}})}_getSessionFromURL(e,i){return h(this,null,function*(){try{if(!Me())throw new At("No browser detected.");if(e.error||e.error_description||e.error_code)throw new At(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new ln("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new At("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ln("No code detected.");let{data:V,error:x}=yield this._exchangeCodeForSession(e.code);if(x)throw x;let $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:V.session,redirectType:null},error:null}}let{provider_token:n,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:l,expires_at:c,token_type:d}=e;if(!s||!l||!a||!d)throw new At("No session defined in URL");let u=Math.round(Date.now()/1e3),_=parseInt(l),f=u+_;c&&(f=parseInt(c));let y=f-u;y*1e3<=Mt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${_}s`);let b=f-_;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,f,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,f,u);let{data:C,error:M}=yield this._getUser(s);if(M)throw M;let F={provider_token:n,provider_refresh_token:o,access_token:s,expires_in:_,expires_at:f,refresh_token:a,token_type:d,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:F,redirectType:e.type},error:null}}catch(n){if(A(n))return{data:{session:null,redirectType:null},error:n};throw n}})}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}_isPKCECallback(e){return h(this,null,function*(){let i=yield un(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)})}signOut(){return h(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return h(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(i=>h(this,null,function*(){var n;let{data:o,error:s}=i;if(s)return{error:s};let a=(n=o.session)===null||n===void 0?void 0:n.access_token;if(a){let{error:l}=yield this.admin.signOut(a,e);if(l&&!(Rc(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(yield this._removeSession(),yield hn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){let i=qc(),n={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,n),h(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){this._emitInitialSession(i)}))}),{data:{subscription:n}}}_emitInitialSession(e){return h(this,null,function*(){return yield this._useSession(i=>h(this,null,function*(){var n,o;try{let{data:{session:s},error:a}=i;if(a)throw a;yield(n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){yield(o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}}))})}resetPasswordForEmail(n){return h(this,arguments,function*(e,i={}){let o=null,s=null;this.flowType==="pkce"&&([o,s]=yield Dt(this.storage,this.storageKey,!0));try{return yield R(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:s,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(a){if(A(a))return{data:null,error:a};throw a}})}getUserIdentities(){return h(this,null,function*(){var e;try{let{data:i,error:n}=yield this.getUser();if(n)throw n;return{data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(i){if(A(i))return{data:null,error:i};throw i}})}linkIdentity(e){return h(this,null,function*(){var i;try{let{data:n,error:o}=yield this._useSession(s=>h(this,null,function*(){var a,l,c,d,u;let{data:_,error:f}=s;if(f)throw f;let y=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return yield R(this.fetch,"GET",y,{headers:this.headers,jwt:(u=(d=_.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})}));if(o)throw o;return Me()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:e.provider,url:n?.url},error:null}}catch(n){if(A(n))return{data:{provider:e.provider,url:null},error:n};throw n}})}unlinkIdentity(e){return h(this,null,function*(){try{return yield this._useSession(i=>h(this,null,function*(){var n,o;let{data:s,error:a}=i;if(a)throw a;return yield R(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0})}))}catch(i){if(A(i))return{data:null,error:i};throw i}})}_refreshAccessToken(e){return h(this,null,function*(){let i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{let n=Date.now();return yield Kc(o=>h(this,null,function*(){return o>0&&(yield Wc(200*Math.pow(2,o-1))),this._debug(i,"refreshing attempt",o),yield R(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ve})}),(o,s)=>{let a=200*Math.pow(2,o);return s&&Or(s)&&Date.now()+a-n<Mt})}catch(n){if(this._debug(i,"error",n),A(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(i,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,i){return h(this,null,function*(){let n=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",n),Me()&&!i.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}})}_recoverAndRefresh(){return h(this,null,function*(){var e;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let n=yield un(this.storage,this.storageKey);if(this._debug(i,"session from storage",n),!this._isValidSession(n)){this._debug(i,"session is not valid"),n!==null&&(yield this._removeSession());return}let o=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Mr;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${Mr}s`),o){if(this.autoRefreshToken&&n.refresh_token){let{error:s}=yield this._callRefreshToken(n.refresh_token);s&&(console.error(s),Or(s)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",s),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(i,"error",n),console.error(n);return}finally{this._debug(i,"end")}})}_callRefreshToken(e){return h(this,null,function*(){var i,n;if(!e)throw new Ee;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new dn;let{data:s,error:a}=yield this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Ee;yield this._saveSession(s.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(o,"error",s),A(s)){let a={session:null,error:s};return Or(s)||(yield this._removeSession()),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}})}_notifyAllSubscribers(e,i,n=!0){return h(this,null,function*(){let o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",i,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:i});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(l=>h(this,null,function*(){try{yield l.callback(e,i)}catch(c){s.push(c)}}));if(yield Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(o,"end")}})}_saveSession(e){return h(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,yield ls(this.storage,this.storageKey,e)})}_removeSession(){return h(this,null,function*(){this._debug("#_removeSession()"),yield hn(this.storage,this.storageKey),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Me()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}_startAutoRefresh(){return h(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),Mt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>h(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return h(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return h(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>h(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(i=>h(this,null,function*(){let{data:{session:n}}=i;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((n.expires_at*1e3-e)/Mt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Mt}ms, refresh threshold is ${Er} ticks`),o<=Er&&(yield this._callRefreshToken(n.refresh_token))}))}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof mn)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return h(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Me()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>h(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return h(this,null,function*(){let i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,i,n){return h(this,null,function*(){let o=[`provider=${encodeURIComponent(i)}`];if(n?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&o.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){let[s,a]=yield Dt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(l.toString())}if(n?.queryParams){let s=new URLSearchParams(n.queryParams);o.push(s.toString())}return n?.skipBrowserRedirect&&o.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${o.join("&")}`})}_unenroll(e){return h(this,null,function*(){try{return yield this._useSession(i=>h(this,null,function*(){var n;let{data:o,error:s}=i;return s?{data:null,error:s}:yield R(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token})}))}catch(i){if(A(i))return{data:null,error:i};throw i}})}_enroll(e){return h(this,null,function*(){try{return yield this._useSession(i=>h(this,null,function*(){var n,o;let{data:s,error:a}=i;if(a)return{data:null,error:a};let l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=yield R(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((o=c?.totp)===null||o===void 0)&&o.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})}))}catch(i){if(A(i))return{data:null,error:i};throw i}})}_verify(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(i=>h(this,null,function*(){var n;let{data:o,error:s}=i;if(s)return{data:null,error:s};let{data:a,error:l}=yield R(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})}))}catch(i){if(A(i))return{data:null,error:i};throw i}}))})}_challenge(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(i=>h(this,null,function*(){var n;let{data:o,error:s}=i;return s?{data:null,error:s}:yield R(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token})}))}catch(i){if(A(i))return{data:null,error:i};throw i}}))})}_challengeAndVerify(e){return h(this,null,function*(){let{data:i,error:n}=yield this._challenge({factorId:e.factorId});return n?{data:null,error:n}:yield this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})})}_listFactors(){return h(this,null,function*(){let{data:{user:e},error:i}=yield this.getUser();if(i)return{data:null,error:i};let n=e?.factors||[],o=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:o,phone:s},error:null}})}_getAuthenticatorAssuranceLevel(){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){return yield this._useSession(e=>h(this,null,function*(){var i,n;let{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:a}=Dr(o.access_token),l=null;a.aal&&(l=a.aal);let c=l;((n=(i=o.user.factors)===null||i===void 0?void 0:i.filter(_=>_.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");let u=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}))})}fetchJwk(n){return h(this,arguments,function*(e,i={keys:[]}){let o=i.keys.find(l=>l.kid===e);if(o||(o=this.jwks.keys.find(l=>l.kid===e),o&&this.jwks_cached_at+Dc>Date.now()))return o;let{data:s,error:a}=yield R(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!s.keys||s.keys.length===0)throw new tt("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),o=s.keys.find(l=>l.kid===e),!o)throw new tt("No matching signing key found in JWKS");return o})}getClaims(n){return h(this,arguments,function*(e,i={keys:[]}){try{let o=e;if(!o){let{data:b,error:C}=yield this.getSession();if(C||!b.session)return{data:null,error:C};o=b.session.access_token}let{header:s,payload:a,signature:l,raw:{header:c,payload:d}}=Dr(o);if(Jc(a.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){let{error:b}=yield this.getUser(o);if(b)throw b;return{data:{claims:a,header:s,signature:l},error:null}}let u=Yc(s.alg),_=yield this.fetchJwk(s.kid,i),f=yield crypto.subtle.importKey("jwk",_,u,!0,["verify"]);if(!(yield crypto.subtle.verify(u,f,l,zc(`${c}.${d}`))))throw new tt("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(o){if(A(o))return{data:null,error:o};throw o}})}}return r.nextInstanceID=0,r})();var pm=hs,ms=pm;var Lr=class extends ms{constructor(t){super(t)}};var fm=function(r,t,e,i){function n(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,t||[])).next())})},Nr=class{constructor(t,e,i){var n,o,s;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let a=Ec(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);let c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:xc,realtime:kc,auth:Object.assign(Object.assign({},Cc),{storageKey:c}),global:Sc},u=Mc(i??{},d);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(_,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=u.auth)!==null&&s!==void 0?s:{},this.headers,u.global.fetch),this.fetch=Tc(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new sc(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Hi(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new rn(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},i={}){return this.rest.rpc(t,e,i)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return fm(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:i}=yield this.auth.getSession();return(e=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:n,storageKey:o,flowType:s,lock:a,debug:l},c,d){let u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Lr({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),c),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:n,flowType:s,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new tn(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,i)=>{this._handleTokenChanged(e,"CLIENT",i?.access_token)})}_handleTokenChanged(t,e,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var od=(r,t,e)=>new Nr(r,t,e);var gm=io.supabaseUrl,_m=io.supabaseKey,ps=od(gm,_m);var fi=class r{signIn(t,e){return h(this,null,function*(){let{data:i,error:n}=yield ps.auth.signInWithPassword({email:t,password:e});return{data:i,error:n}})}signUp(t,e){return h(this,null,function*(){let{data:i,error:n}=yield ps.auth.signUp({email:t,password:e});return{data:i,error:n}})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=le({token:r,factory:r.\u0275fac,providedIn:"root"})};function vm(r,t){if(r&1&&(m(0,"div",13),v(1),p()),r&2){let e=E();g(),X(e.error)}}var jr=class r{constructor(t,e,i){this.supabaseService=t;this.router=e;this.location=i}email="";password="";error=null;loading=!1;ngOnInit(){this.scrollToTop()}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}login(){return h(this,null,function*(){this.loading=!0,this.error=null;let{error:t}=yield this.supabaseService.signIn(this.email,this.password);this.loading=!1,t?this.error=t.message:this.router.navigate(["/"])})}register(){this.router.navigate(["/register"],{queryParams:{fromLogin:"true"}})}goBack(){this.location.back()}static \u0275fac=function(e){return new(e||r)(N(fi),N(st),N(zt))};static \u0275cmp=G({type:r,selectors:[["app-login"]],decls:27,vars:4,consts:[["loginForm","ngForm"],["mat-icon-button","","aria-label","Volver",1,"back-button",3,"click"],[1,"login-container"],[3,"ngSubmit"],[1,"form-group"],["appearance","outline",1,"full-width"],["matInput","","id","email","name","email","type","email","required","",3,"ngModelChange","ngModel"],["matInput","","id","password","name","password","type","password","required","",3,"ngModelChange","ngModel"],["type","submit","mat-raised-button","","color","primary",1,"login-btn",3,"disabled"],["class","error",4,"ngIf"],[1,"login-actions"],[1,"forgot-password",3,"click"],["type","button","mat-button","",1,"action-btn",3,"click"],[1,"error"]],template:function(e,i){if(e&1){let n=J();q(0,"app-login-background"),m(1,"button",1),O("click",function(){return j(n),B(i.goBack())}),m(2,"mat-icon"),v(3,"arrow_back"),p()(),m(4,"div",2)(5,"form",3,0),O("ngSubmit",function(){return j(n),B(i.login())}),m(7,"h2"),v(8,"Iniciar sesi\xF3n"),p(),m(9,"div",4)(10,"mat-form-field",5)(11,"mat-label"),v(12,"Email"),p(),m(13,"input",6),Ye("ngModelChange",function(s){return j(n),Je(i.email,s)||(i.email=s),B(s)}),p()()(),m(14,"div",4)(15,"mat-form-field",5)(16,"mat-label"),v(17,"Contrase\xF1a"),p(),m(18,"input",7),Ye("ngModelChange",function(s){return j(n),Je(i.password,s)||(i.password=s),B(s)}),p()()(),m(19,"button",8),v(20,"Entrar"),p(),I(21,vm,2,1,"div",9),m(22,"div",10)(23,"a",11),O("click",function(s){return j(n),B(s.preventDefault())}),v(24,"\xBFOlvidaste tu contrase\xF1a?"),p(),m(25,"button",12),O("click",function(){return j(n),B(i.register())}),v(26,"Registrarse"),p()()()()}e&2&&(g(13),Qe("ngModel",i.email),g(5),Qe("ngModel",i.password),g(),w("disabled",i.loading),g(2),w("ngIf",i.error))},dependencies:[Yt,In,Wt,Kt,An,Dn,Jt,Qt,re,be,$t,Ce,xe,Se,Ne,we,je,vt,Ci,ri,ni,hr],styles:[".back-button[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;z-index:10;color:#fff;background:#00000080;border-radius:50%}.login-container[_ngcontent-%COMP%]{max-width:400px;margin:10rem auto 0;padding:32px 24px;background:#d1d1d1;border-radius:8px;box-shadow:0 4px 16px #0000001a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}  .dark-mode .login-container{background:var(--card-bg);border:none;box-shadow:0 2px 8px #00000014}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px;color:var(--text-color)}label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;color:var(--text-color)}input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid var(--card-border);border-radius:4px;background:var(--card-bg);color:var(--text-color)}.login-btn[_ngcontent-%COMP%]{width:50%;color:#fff;border:none;border-radius:50px;font-size:1rem;cursor:pointer;margin:0 auto;display:block;align-items:center;justify-content:center}.login-btn[_ngcontent-%COMP%]:disabled{opacity:.9;cursor:not-allowed}.error[_ngcontent-%COMP%]{color:#f44336;margin-top:12px;text-align:center}.success[_ngcontent-%COMP%]{color:#4caf50;margin-top:12px;text-align:center}.login-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.forgot-password[_ngcontent-%COMP%]{text-align:center;width:100%;margin-top:8px}.action-btn[_ngcontent-%COMP%]{color:var(--text-color)}  .dark-mode .action-btn{color:#fff!important}.full-width[_ngcontent-%COMP%]{width:100%}  .mat-mdc-form-field-infill,   .mat-mdc-form-field,   .mat-mdc-form-field .mat-mdc-form-field-focus-overlay,   .mat-mdc-form-field .mat-mdc-text-field-wrapper,   .mat-mdc-form-field .mat-mdc-form-field-flex,   .mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay,   .mat-mdc-form-field.mat-focused .mat-mdc-text-field-wrapper,   .dark-mode .mat-mdc-form-field-infill,   .dark-mode .mat-mdc-form-field,   .dark-mode .mat-mdc-form-field .mat-mdc-form-field-focus-overlay,   .dark-mode .mat-mdc-form-field .mat-mdc-text-field-wrapper,   .dark-mode .mat-mdc-form-field .mat-mdc-form-field-flex,   .dark-mode .mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay,   .dark-mode .mat-mdc-form-field.mat-focused .mat-mdc-text-field-wrapper{background:transparent!important;background-color:transparent!important}  .dark-mode .mat-mdc-form-field .mat-mdc-form-field-label,   .dark-mode .mat-mdc-form-field .mat-mdc-form-field-label.mat-mdc-form-field-label-always-float,   .dark-mode .mat-mdc-form-field input.mat-mdc-input-element,   .dark-mode .mat-mdc-form-field .mat-mdc-form-field-label-wrapper,   .dark-mode .mat-mdc-form-field .mat-mdc-form-field-label-wrapper .mat-mdc-form-field-label,   .dark-mode mat-label,   .dark-mode .mat-mdc-form-field mat-label,   .dark-mode .mat-mdc-form-field .mat-mdc-form-field-label-wrapper mat-label{color:#ffffffde!important}"]})};function ym(r,t){if(r&1&&q(0,"div",2),r&2){let e=t.$implicit,i=t.index,n=E();rt("background-image","url("+e+")"),ce("visible",i===n.currentIndex)}}var pn=class r{constructor(t,e){this.tmdb=t;this.platformId=e;this.isBrowser=te(this.platformId)}backdropUrls=[];currentIndex=0;timerSub;fadeInterval=5e3;isBrowser;ngOnInit(){this.isBrowser&&this.loadPopularMovies()}loadPopularMovies(){console.log("RegisterBackground: Cargando pel\xEDculas populares..."),this.tmdb.getPopularMovies(1).subscribe({next:t=>{this.backdropUrls=t.results.map(e=>e.backdrop_path).filter(Boolean).map(e=>this.tmdb.getHighQualityImageUrl(e)),console.log("RegisterBackground: Pel\xEDculas cargadas:",this.backdropUrls.length),this.startAnimation()},error:t=>{console.error("Error cargando pel\xEDculas populares:",t)}})}startAnimation(){console.log("RegisterBackground: Iniciando animaci\xF3n con",this.backdropUrls.length,"im\xE1genes"),this.backdropUrls.length>1?this.timerSub=_n(this.fadeInterval).subscribe(()=>{this.currentIndex=(this.currentIndex+1)%this.backdropUrls.length,console.log("RegisterBackground: Cambiando a imagen",this.currentIndex)}):this.backdropUrls.length===1?console.log("RegisterBackground: Solo una imagen disponible"):console.log("RegisterBackground: No hay im\xE1genes disponibles")}ngOnDestroy(){this.timerSub?.unsubscribe()}static \u0275fac=function(e){return new(e||r)(N(Be),N(Fe))};static \u0275cmp=G({type:r,selectors:[["app-register-background"]],decls:2,vars:1,consts:[[1,"background-wrapper"],["class","background-image",3,"visible","backgroundImage",4,"ngFor","ngForOf"],[1,"background-image"]],template:function(e,i){e&1&&(m(0,"div",0),I(1,ym,1,4,"div",1),p()),e&2&&(g(),w("ngForOf",i.backdropUrls))},dependencies:[re,ot],styles:[".background-wrapper[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:-1;overflow:hidden;pointer-events:none}.background-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100vw;height:100vh;background-size:cover;background-position:center;opacity:0;transition:opacity 1.5s ease;will-change:opacity}.background-image.visible[_ngcontent-%COMP%]{opacity:1;z-index:0}"]})};function bm(r,t){r&1&&(m(0,"div",13),v(1,"Las contrase\xF1as no coinciden"),p())}function wm(r,t){if(r&1&&(m(0,"div",13),v(1),p()),r&2){let e=E();g(),X(e.error)}}function Sm(r,t){if(r&1&&(m(0,"div",14),v(1),p()),r&2){let e=E();g(),X(e.success)}}var Br=class r{constructor(t,e,i,n){this.supabaseService=t;this.router=e;this.route=i;this.location=n}registerBackground;email="";password="";confirmPassword="";showPassword=!1;showConfirmPassword=!1;error=null;success=null;loading=!1;hide=Ms(!0);ngOnInit(){this.scrollToTop(),this.route.queryParams.subscribe(t=>{t.fromLogin==="true"&&(console.log("RegisterComponent: Detectada navegaci\xF3n desde login"),setTimeout(()=>{this.triggerBackgroundAnimation()},300))})}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}ngAfterViewInit(){console.log("RegisterComponent: ngAfterViewInit ejecutado"),setTimeout(()=>{console.log("RegisterComponent: Intentando iniciar animaci\xF3n del fondo"),this.registerBackground?(console.log("RegisterComponent: Componente de fondo encontrado"),this.registerBackground.startAnimation()):console.log("RegisterComponent: Componente de fondo no encontrado")},100)}triggerBackgroundAnimation(){console.log("RegisterComponent: Forzando reinicio de animaci\xF3n del fondo"),this.registerBackground&&this.registerBackground.startAnimation()}togglePasswordVisibility(t){this.hide.set(!this.hide()),t.stopPropagation()}passwordsMatch(){return this.password===this.confirmPassword&&this.password.length>0}register(){return h(this,null,function*(){if(!this.passwordsMatch()){this.error="Las contrase\xF1as no coinciden";return}this.loading=!0,this.error=null,this.success=null;let{error:t,data:e}=yield this.supabaseService.signUp(this.email,this.password);this.loading=!1,t?this.error=t.message:this.success="Registro exitoso. Revisa tu correo para confirmar tu cuenta."})}goBack(){this.location.back()}onNavigateFromLogin(){console.log("RegisterComponent: Navegaci\xF3n desde login detectada"),setTimeout(()=>{this.triggerBackgroundAnimation()},200)}static \u0275fac=function(e){return new(e||r)(N(fi),N(st),N(Sn),N(zt))};static \u0275cmp=G({type:r,selectors:[["app-register"]],viewQuery:function(e,i){if(e&1&&Ut(pn,5),e&2){let n;gt(n=_t())&&(i.registerBackground=n.first)}},decls:30,vars:9,consts:[["registerBackground",""],["registerForm","ngForm"],["mat-icon-button","","aria-label","Volver",1,"back-button",3,"click"],[1,"register-container"],[1,"example-container",3,"ngSubmit"],[1,"form-group"],["appearance","outline",1,"full-width"],["matInput","","id","email","name","email","type","email","required","",3,"ngModelChange","ngModel"],["matInput","","id","password","name","password","required","",3,"ngModelChange","type","ngModel"],["matInput","","id","confirmPassword","name","confirmPassword","required","",3,"ngModelChange","type","ngModel"],["class","error",4,"ngIf"],["type","submit","mat-raised-button","","color","primary",1,"register-btn",3,"disabled"],["class","success",4,"ngIf"],[1,"error"],[1,"success"]],template:function(e,i){if(e&1){let n=J();q(0,"app-register-background",null,0),m(2,"button",2),O("click",function(){return j(n),B(i.goBack())}),m(3,"mat-icon"),v(4,"arrow_back"),p()(),m(5,"div",3)(6,"form",4,1),O("ngSubmit",function(){return j(n),B(i.register())}),m(8,"h2"),v(9,"Registrarse"),p(),m(10,"div",5)(11,"mat-form-field",6)(12,"mat-label"),v(13,"Email"),p(),m(14,"input",7),Ye("ngModelChange",function(s){return j(n),Je(i.email,s)||(i.email=s),B(s)}),p()()(),m(15,"div",5)(16,"mat-form-field",6)(17,"mat-label"),v(18,"Contrase\xF1a"),p(),m(19,"input",8),Ye("ngModelChange",function(s){return j(n),Je(i.password,s)||(i.password=s),B(s)}),p()()(),m(20,"div",5)(21,"mat-form-field",6)(22,"mat-label"),v(23,"Confirmar Contrase\xF1a"),p(),m(24,"input",9),Ye("ngModelChange",function(s){return j(n),Je(i.confirmPassword,s)||(i.confirmPassword=s),B(s)}),p()()(),I(25,bm,2,0,"div",10),m(26,"button",11),v(27,"Crear cuenta"),p(),I(28,wm,2,1,"div",10)(29,Sm,2,1,"div",12),p()()}e&2&&(g(14),Qe("ngModel",i.email),g(5),w("type",i.showPassword?"text":"password"),Qe("ngModel",i.password),g(5),w("type",i.showConfirmPassword?"text":"password"),Qe("ngModel",i.confirmPassword),g(),w("ngIf",i.confirmPassword&&!i.passwordsMatch()),g(),w("disabled",i.loading||!i.passwordsMatch()),g(2),w("ngIf",i.error),g(),w("ngIf",i.success))},dependencies:[Yt,In,Wt,Kt,An,Dn,Jt,Qt,re,be,$t,Ce,xe,Se,Ne,we,je,vt,Ci,ri,ni,pn],styles:[".back-button[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;z-index:10;color:#fff;background:#00000080;border-radius:50%}.register-container[_ngcontent-%COMP%]{max-width:400px;margin:10rem auto 0;padding:32px 24px;background:#d1d1d1;border-radius:8px;box-shadow:0 4px 16px #0000001a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px;color:var(--text-color)}.form-group[_ngcontent-%COMP%]{margin-bottom:8px}.register-btn[_ngcontent-%COMP%]{width:50%;color:#fff;border:none;border-radius:50px;font-size:1rem;cursor:pointer;margin:8px auto 0;display:block;align-items:center;justify-content:center}.register-btn[_ngcontent-%COMP%]:disabled{opacity:.9;cursor:not-allowed}.error[_ngcontent-%COMP%]{color:#f44336;text-align:center}.success[_ngcontent-%COMP%]{color:#4caf50;text-align:center}.full-width[_ngcontent-%COMP%]{width:100%}  .dark-mode .mat-mdc-form-field .mat-mdc-form-field-label{color:#ffffffde!important}  .dark-mode .mat-mdc-form-field .mat-mdc-form-field-label.mat-mdc-form-field-label-always-float{color:#ffffffde!important}  .dark-mode .mat-mdc-form-field input.mat-mdc-input-element{color:#ffffffde!important}  .dark-mode .mat-mdc-form-field .mat-mdc-form-field-label-wrapper{color:#ffffffde!important}  .dark-mode .mat-mdc-form-field .mat-mdc-form-field-label-wrapper .mat-mdc-form-field-label{color:#ffffffde!important}  .dark-mode mat-label{color:#ffffffde!important}  .dark-mode .mat-mdc-form-field mat-label{color:#ffffffde!important}  .dark-mode .mat-mdc-form-field .mat-mdc-form-field-label-wrapper mat-label{color:#ffffffde!important}  .dark-mode .mat-mdc-form-field .mat-mdc-form-field-label-wrapper .mat-mdc-form-field-label mat-label{color:#ffffffde!important}  .dark-mode .mat-mdc-form-field.mat-focused .mat-mdc-form-field-label{color:#ffffffde!important}  .dark-mode .mat-mdc-form-field.mat-form-field-should-float .mat-mdc-form-field-label{color:#ffffffde!important}  .dark-mode .register-container{background:var(--card-bg);border:none;box-shadow:0 2px 8px #00000014}"]})};var ad=[{path:"",component:sr},{path:"movie/:id",component:ur},{path:"cast/:id",loadComponent:()=>import("./chunk-HVLCFB6U.js").then(r=>r.CastDetailComponent)},{path:"genre/:id",loadComponent:()=>import("./chunk-T3PZSXPT.js").then(r=>r.GenreComponent)},{path:"login",component:jr},{path:"register",component:Br},{path:"**",redirectTo:""}];var ld={providers:[Xs(ad),Ws(Ks()),Cl()]};var Ur=class r{constructor(t){this.themeService=t}title="FilmNest";ngOnInit(){}static \u0275fac=function(e){return new(e||r)(N(oi))};static \u0275cmp=G({type:r,selectors:[["app-root"]],decls:11,vars:0,consts:[[1,"main-wrapper"],[1,"main-content"],[1,"footer"],["href","https://github.com/xRev4n","target","_blank","rel","noopener noreferrer"],["href","https://github.com/xRev4n/FilmNest","target","_blank","rel","noopener noreferrer"],[1,"fa-brands","fa-github"]],template:function(e,i){e&1&&(m(0,"div",0)(1,"main",1),q(2,"router-outlet"),p(),m(3,"footer",2)(4,"span"),v(5," \xA9 2025 FilmNest | Desarrollado por"),m(6,"a",3),v(7,"xRev4n"),p()(),m(8,"a",4),q(9,"i",5),v(10," Ver repositorio en GitHub "),p()()())},dependencies:[Js],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}main[_ngcontent-%COMP%]{min-height:100vh}*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:var(--background-color);color:var(--text-color)}body.dark-mode[_ngcontent-%COMP%]   .mat-button-toggle-group[_ngcontent-%COMP%]{background:#232323!important;border-radius:8px}body.dark-mode[_ngcontent-%COMP%]   .mat-button-toggle-button[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#fff!important}.footer[_ngcontent-%COMP%]{width:100%;background:#232323;color:#fafafa;text-align:center;padding:16px 0;font-size:1rem;position:relative;left:unset;bottom:unset;z-index:1000;display:flex;flex-direction:column;gap:8px}.footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#90caf9;text-decoration:none;margin-left:8px}body.dark-mode[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{background:#181818;color:#fafafa}body.dark-mode[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#90caf9}@media (max-width: 600px){.footer[_ngcontent-%COMP%]{font-size:.9rem;padding:12px 0}}"]})};Gs(Ur,ld).catch(r=>console.error(r));
